<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - FontForge coverage report 2017-08-04 01:21:11+02:00 (commit d35f7e4107a9e1db65cce47c468fcc914cecb8fd) - fontforgeexe/cvgetinfo.c</title>
  <link rel="stylesheet" type="text/css" href="../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../index.html">top level</a> - <a href="index.html">fontforgeexe</a> - cvgetinfo.c<span style="font-size: 80%;"> (source / <a href="cvgetinfo.c.func.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">FontForge coverage report 2017-08-04 01:21:11+02:00 (commit d35f7e4107a9e1db65cce47c468fcc914cecb8fd)</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntry">2909</td>
            <td class="headerCovTableEntryLo">0.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2017-08-04</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntry">78</td>
            <td class="headerCovTableEntryLo">0.0 %</td>
          </tr>
          <tr><td><img src="../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /* Copyright (C) 2000-2012 by George Williams */</a>
<span class="lineNum">       2 </span>            : /*
<span class="lineNum">       3 </span>            :  * Redistribution and use in source and binary forms, with or without
<span class="lineNum">       4 </span>            :  * modification, are permitted provided that the following conditions are met:
<span class="lineNum">       5 </span>            : 
<span class="lineNum">       6 </span>            :  * Redistributions of source code must retain the above copyright notice, this
<span class="lineNum">       7 </span>            :  * list of conditions and the following disclaimer.
<span class="lineNum">       8 </span>            : 
<span class="lineNum">       9 </span>            :  * Redistributions in binary form must reproduce the above copyright notice,
<span class="lineNum">      10 </span>            :  * this list of conditions and the following disclaimer in the documentation
<span class="lineNum">      11 </span>            :  * and/or other materials provided with the distribution.
<span class="lineNum">      12 </span>            : 
<span class="lineNum">      13 </span>            :  * The name of the author may not be used to endorse or promote products
<span class="lineNum">      14 </span>            :  * derived from this software without specific prior written permission.
<span class="lineNum">      15 </span>            : 
<span class="lineNum">      16 </span>            :  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
<span class="lineNum">      17 </span>            :  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
<span class="lineNum">      18 </span>            :  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO
<span class="lineNum">      19 </span>            :  * EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
<span class="lineNum">      20 </span>            :  * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
<span class="lineNum">      21 </span>            :  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
<span class="lineNum">      22 </span>            :  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
<span class="lineNum">      23 </span>            :  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
<span class="lineNum">      24 </span>            :  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
<span class="lineNum">      25 </span>            :  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
<span class="lineNum">      26 </span>            :  */
<span class="lineNum">      27 </span>            : #include &quot;cvundoes.h&quot;
<span class="lineNum">      28 </span>            : #include &quot;fontforgeui.h&quot;
<span class="lineNum">      29 </span>            : #include &quot;lookups.h&quot;
<span class="lineNum">      30 </span>            : #include &quot;parsettf.h&quot;
<span class="lineNum">      31 </span>            : #include &quot;spiro.h&quot;
<span class="lineNum">      32 </span>            : #include &quot;splineorder2.h&quot;
<span class="lineNum">      33 </span>            : #include &quot;splineutil.h&quot;
<span class="lineNum">      34 </span>            : #include &quot;splineutil2.h&quot;
<span class="lineNum">      35 </span>            : #include &quot;tottfgpos.h&quot;
<span class="lineNum">      36 </span>            : #include &lt;ustring.h&gt;
<span class="lineNum">      37 </span>            : #include &lt;math.h&gt;
<span class="lineNum">      38 </span>            : #include &lt;utype.h&gt;
<span class="lineNum">      39 </span>            : #include &lt;gkeysym.h&gt;
<span class="lineNum">      40 </span>            : #include &lt;dlist.h&gt;
<span class="lineNum">      41 </span>            : 
<span class="lineNum">      42 </span>            : #define RAD2DEG (180/3.1415926535897932)
<span class="lineNum">      43 </span>            : #define TCnt    3
<span class="lineNum">      44 </span>            : 
<span class="lineNum">      45 </span>            : typedef struct gidata {
<span class="lineNum">      46 </span>            :     struct dlistnode ln;
<span class="lineNum">      47 </span>            :     CharView *cv;
<span class="lineNum">      48 </span>            :     SplineChar *sc;
<span class="lineNum">      49 </span>            :     RefChar *rf;
<span class="lineNum">      50 </span>            :     ImageList *img;
<span class="lineNum">      51 </span>            :     AnchorPoint *ap;
<span class="lineNum">      52 </span>            :     SplinePoint *cursp;
<span class="lineNum">      53 </span>            :     spiro_cp *curcp;
<span class="lineNum">      54 </span>            :     SplinePointList *curspl;
<span class="lineNum">      55 </span>            :     SplinePointList *oldstate;
<span class="lineNum">      56 </span>            :     AnchorPoint *oldaps;
<span class="lineNum">      57 </span>            :     GWindow gw;
<span class="lineNum">      58 </span>            :     int done, first, changed;
<span class="lineNum">      59 </span>            :     int prevchanged, nextchanged;
<span class="lineNum">      60 </span>            :     int normal_start, normal_end;
<span class="lineNum">      61 </span>            :     int interp_start, interp_end;
<span class="lineNum">      62 </span>            :     GGadgetCreateData* gcd;
<span class="lineNum">      63 </span>            :     GGadget *group1ret, *group2ret;
<span class="lineNum">      64 </span>            :     int nonmodal;
<span class="lineNum">      65 </span>            : } GIData;
<span class="lineNum">      66 </span>            : 
<span class="lineNum">      67 </span>            : #define CID_BaseX       2001
<span class="lineNum">      68 </span>            : #define CID_BaseY       2002
<span class="lineNum">      69 </span>            : #define CID_NextXOff    2003
<span class="lineNum">      70 </span>            : #define CID_NextYOff    2004
<span class="lineNum">      71 </span>            : #define CID_NextPos     2005
<span class="lineNum">      72 </span>            : #define CID_PrevXOff    2006
<span class="lineNum">      73 </span>            : #define CID_PrevYOff    2007
<span class="lineNum">      74 </span>            : #define CID_PrevPos     2008
<span class="lineNum">      75 </span>            : #define CID_NextDef     2009
<span class="lineNum">      76 </span>            : #define CID_PrevDef     2010
<span class="lineNum">      77 </span>            : #define CID_NextR       2014
<span class="lineNum">      78 </span>            : #define CID_NextTheta   2015
<span class="lineNum">      79 </span>            : #define CID_PrevR       2016
<span class="lineNum">      80 </span>            : #define CID_PrevTheta   2017
<span class="lineNum">      81 </span>            : #define CID_HintMask    2020
<span class="lineNum">      82 </span>            : #define CID_ActiveHints 2030
<span class="lineNum">      83 </span>            : #define CID_NextX       2031
<span class="lineNum">      84 </span>            : #define CID_NextY       2032
<span class="lineNum">      85 </span>            : #define CID_PrevX       2033
<span class="lineNum">      86 </span>            : #define CID_PrevY       2034
<span class="lineNum">      87 </span>            : #define CID_BasePos     2035
<span class="lineNum">      88 </span>            : #define CID_Normal      2036
<span class="lineNum">      89 </span>            : #define CID_Interpolated 2037
<span class="lineNum">      90 </span>            : #define CID_NeverInterpolate    2038
<span class="lineNum">      91 </span>            : /* Also use CID_Next, CID_Prev below */
<span class="lineNum">      92 </span>            : #define CID_NextC       2041
<span class="lineNum">      93 </span>            : #define CID_PrevC       2042
<span class="lineNum">      94 </span>            : #define CID_PrevCurvature       2043
<span class="lineNum">      95 </span>            : #define CID_NextCurvature       2044
<span class="lineNum">      96 </span>            : #define CID_DeltaCurvature      2045
<span class="lineNum">      97 </span>            : #define CID_Curve       2050            /* Next four must be in order */
<span class="lineNum">      98 </span>            : #define CID_Corner      2051
<span class="lineNum">      99 </span>            : #define CID_Tangent     2052
<span class="lineNum">     100 </span>            : #define CID_HVCurve     2053
<span class="lineNum">     101 </span>            : #define CID_SpiroLeft   2054
<span class="lineNum">     102 </span>            : #define CID_SpiroRight  2055
<span class="lineNum">     103 </span>            : #define CID_TabSet      2100
<span class="lineNum">     104 </span>            : 
<span class="lineNum">     105 </span>            : #define CID_X           3001
<span class="lineNum">     106 </span>            : #define CID_Y           3002
<span class="lineNum">     107 </span>            : #define CID_NameList    3003
<span class="lineNum">     108 </span>            : #define CID_Mark        3004
<span class="lineNum">     109 </span>            : #define CID_BaseChar    3005
<span class="lineNum">     110 </span>            : #define CID_BaseLig     3006
<span class="lineNum">     111 </span>            : #define CID_BaseMark    3007
<span class="lineNum">     112 </span>            : #define CID_CursEntry   3008
<span class="lineNum">     113 </span>            : #define CID_CursExit    3009
<span class="lineNum">     114 </span>            : #define CID_LigIndex    3010
<span class="lineNum">     115 </span>            : #define CID_Next        3011
<span class="lineNum">     116 </span>            : #define CID_Prev        3012
<span class="lineNum">     117 </span>            : #define CID_Delete      3013
<span class="lineNum">     118 </span>            : #define CID_New         3014
<span class="lineNum">     119 </span>            : #define CID_MatchPt     3015
<span class="lineNum">     120 </span>            : 
<span class="lineNum">     121 </span>            : #define RI_Width        225
<span class="lineNum">     122 </span>            : #define RI_Height       246
<span class="lineNum">     123 </span>            : #define CID_Match_Pt_Base       1010
<span class="lineNum">     124 </span>            : #define CID_Match_Pt_Ref        1011
<span class="lineNum">     125 </span>            : 
<span class="lineNum">     126 </span>            : #define II_Width        130
<span class="lineNum">     127 </span>            : #define II_Height       70
<span class="lineNum">     128 </span>            : 
<span class="lineNum">     129 </span>            : #define PI_Width        228
<span class="lineNum">     130 </span>            : #define PI_Height       434
<span class="lineNum">     131 </span>            : 
<span class="lineNum">     132 </span>            : #define AI_Width        160
<a name="133"><span class="lineNum">     133 </span>            : #define AI_Height       258</a>
<span class="lineNum">     134 </span>            : 
<span class="lineNum">     135 </span><span class="lineNoCov">          0 : static int GI_Cancel(GGadget *g, GEvent *e) {</span>
<span class="lineNum">     136 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_buttonactivate ) {</span>
<span class="lineNum">     137 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">     138 </span><span class="lineNoCov">          0 :         ci-&gt;done = true;</span>
<span class="lineNum">     139 </span>            :     }
<span class="lineNum">     140 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="141"><span class="lineNum">     141 </span>            : }</a>
<span class="lineNum">     142 </span>            : 
<span class="lineNum">     143 </span><span class="lineNoCov">          0 : static int GI_TransChange(GGadget *g, GEvent *e) {</span>
<span class="lineNum">     144 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_textchanged ) {</span>
<span class="lineNum">     145 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">     146 </span><span class="lineNoCov">          0 :         ci-&gt;changed = true;</span>
<span class="lineNum">     147 </span>            :     }
<span class="lineNum">     148 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="149"><span class="lineNum">     149 </span>            : }</a>
<span class="lineNum">     150 </span>            : 
<span class="lineNum">     151 </span><span class="lineNoCov">          0 : static int GI_MatchPtChange(GGadget *g, GEvent *e) {</span>
<span class="lineNum">     152 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_textchanged ) {</span>
<span class="lineNum">     153 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">     154 </span><span class="lineNoCov">          0 :         const unichar_t *t1 = _GGadgetGetTitle(GWidgetGetControl(ci-&gt;gw,CID_Match_Pt_Base));</span>
<span class="lineNum">     155 </span><span class="lineNoCov">          0 :         const unichar_t *t2 = _GGadgetGetTitle(GWidgetGetControl(ci-&gt;gw,CID_Match_Pt_Ref));</span>
<span class="lineNum">     156 </span><span class="lineNoCov">          0 :         while ( *t1==' ' ) ++t1;</span>
<span class="lineNum">     157 </span><span class="lineNoCov">          0 :         while ( *t2==' ' ) ++t2;</span>
<span class="lineNum">     158 </span><span class="lineNoCov">          0 :         GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,1004),*t1=='\0' &amp;&amp; *t2=='\0' );</span>
<span class="lineNum">     159 </span><span class="lineNoCov">          0 :         GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,1005),*t1=='\0' &amp;&amp; *t2=='\0' );</span>
<span class="lineNum">     160 </span><span class="lineNoCov">          0 :         if ( isdigit(*t1) &amp;&amp; isdigit(*t2)) {</span>
<span class="lineNum">     161 </span>            :             BasePoint inbase, inref;
<span class="lineNum">     162 </span>            :             int basept, refpt;
<span class="lineNum">     163 </span><span class="lineNoCov">          0 :             basept = u_strtol(t1,NULL,10);</span>
<span class="lineNum">     164 </span><span class="lineNoCov">          0 :             refpt = u_strtol(t2,NULL,10);</span>
<span class="lineNum">     165 </span><span class="lineNoCov">          0 :             if ( ttfFindPointInSC(ci-&gt;cv-&gt;b.sc,CVLayer((CharViewBase *) ci-&gt;cv),basept,&amp;inbase,ci-&gt;rf)==-1 &amp;&amp;</span>
<span class="lineNum">     166 </span><span class="lineNoCov">          0 :                     ttfFindPointInSC(ci-&gt;rf-&gt;sc,CVLayer((CharViewBase *) ci-&gt;cv),refpt,&amp;inref,NULL)==-1 ) {</span>
<span class="lineNum">     167 </span>            :                 char buffer[40];
<span class="lineNum">     168 </span><span class="lineNoCov">          0 :                 sprintf(buffer,&quot;%g&quot;,(double) (inbase.x-inref.x));</span>
<span class="lineNum">     169 </span><span class="lineNoCov">          0 :                 GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,1004),buffer);</span>
<span class="lineNum">     170 </span><span class="lineNoCov">          0 :                 sprintf(buffer,&quot;%g&quot;,(double) (inbase.y-inref.y));</span>
<span class="lineNum">     171 </span><span class="lineNoCov">          0 :                 GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,1005),buffer);</span>
<span class="lineNum">     172 </span>            :             }
<span class="lineNum">     173 </span>            :         }
<span class="lineNum">     174 </span>            :     }
<span class="lineNum">     175 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="176"><span class="lineNum">     176 </span>            : }</a>
<span class="lineNum">     177 </span>            : 
<span class="lineNum">     178 </span><span class="lineNoCov">          0 : static int GI_ROK_Do(GIData *ci) {</span>
<span class="lineNum">     179 </span><span class="lineNoCov">          0 :     int errs=false,i;</span>
<span class="lineNum">     180 </span>            :     real trans[6];
<span class="lineNum">     181 </span>            :     SplinePointList *spl, *new;
<span class="lineNum">     182 </span><span class="lineNoCov">          0 :     RefChar *ref = ci-&gt;rf, *subref;</span>
<span class="lineNum">     183 </span><span class="lineNoCov">          0 :     int usemy = GGadgetIsChecked(GWidgetGetControl(ci-&gt;gw,6+1000));</span>
<span class="lineNum">     184 </span><span class="lineNoCov">          0 :     int round = GGadgetIsChecked(GWidgetGetControl(ci-&gt;gw,7+1000));</span>
<span class="lineNum">     185 </span><span class="lineNoCov">          0 :     int basept=-1, refpt=-1;</span>
<span class="lineNum">     186 </span>            :     BasePoint inbase, inref;
<span class="lineNum">     187 </span>            : 
<span class="lineNum">     188 </span><span class="lineNoCov">          0 :     for ( i=0; i&lt;6; ++i ) {</span>
<span class="lineNum">     189 </span><span class="lineNoCov">          0 :         trans[i] = GetReal8(ci-&gt;gw,1000+i,_(&quot;Transformation Matrix&quot;),&amp;errs);</span>
<span class="lineNum">     190 </span><span class="lineNoCov">          0 :         if ( !errs &amp;&amp;</span>
<span class="lineNum">     191 </span><span class="lineNoCov">          0 :                 ((i&lt;4 &amp;&amp; (trans[i]&gt;30 || trans[i]&lt;-30)) ||</span>
<span class="lineNum">     192 </span><span class="lineNoCov">          0 :                  (i&gt;=4 &amp;&amp; (trans[i]&gt;16000 || trans[i]&lt;-16000))) ) {</span>
<span class="lineNum">     193 </span>            :             /* Don't want the user to insert an enormous scale factor or */
<span class="lineNum">     194 </span>            :             /*  it will move points outside the legal range. */
<span class="lineNum">     195 </span><span class="lineNoCov">          0 :             GTextFieldSelect(GWidgetGetControl(ci-&gt;gw,1000+i),0,-1);</span>
<span class="lineNum">     196 </span><span class="lineNoCov">          0 :             ff_post_error(_(&quot;Value out of range&quot;),_(&quot;Value out of range&quot;));</span>
<span class="lineNum">     197 </span><span class="lineNoCov">          0 :             errs = true;</span>
<span class="lineNum">     198 </span>            :         }
<span class="lineNum">     199 </span><span class="lineNoCov">          0 :         if ( errs )</span>
<span class="lineNum">     200 </span><span class="lineNoCov">          0 : return( false );</span>
<span class="lineNum">     201 </span>            :     }
<span class="lineNum">     202 </span><span class="lineNoCov">          0 :     if ( !ci-&gt;cv-&gt;b.sc-&gt;layers[ly_fore].order2 )</span>
<span class="lineNum">     203 </span>            :         /* No point matching */;
<span class="lineNum">     204 </span>            :     else {
<span class="lineNum">     205 </span>            :         const unichar_t *txt;
<span class="lineNum">     206 </span><span class="lineNoCov">          0 :         txt = _GGadgetGetTitle(GWidgetGetControl(ci-&gt;gw,CID_Match_Pt_Base));</span>
<span class="lineNum">     207 </span><span class="lineNoCov">          0 :         while ( isspace(*txt)) ++txt;</span>
<span class="lineNum">     208 </span><span class="lineNoCov">          0 :         if ( *txt!='\0' )</span>
<span class="lineNum">     209 </span><span class="lineNoCov">          0 :             basept = GetInt8(ci-&gt;gw,CID_Match_Pt_Base,_(&quot;_Base:&quot;),&amp;errs);</span>
<span class="lineNum">     210 </span><span class="lineNoCov">          0 :         txt = _GGadgetGetTitle(GWidgetGetControl(ci-&gt;gw,CID_Match_Pt_Ref));</span>
<span class="lineNum">     211 </span><span class="lineNoCov">          0 :         while ( isspace(*txt)) ++txt;</span>
<span class="lineNum">     212 </span><span class="lineNoCov">          0 :         if ( *txt!='\0' )</span>
<span class="lineNum">     213 </span><span class="lineNoCov">          0 :             refpt = GetInt8(ci-&gt;gw,CID_Match_Pt_Ref,_(&quot;Ref:&quot;),&amp;errs);</span>
<span class="lineNum">     214 </span><span class="lineNoCov">          0 :         if ( errs )</span>
<span class="lineNum">     215 </span><span class="lineNoCov">          0 : return( false );</span>
<span class="lineNum">     216 </span><span class="lineNoCov">          0 :         if ( (basept!=-1) ^ (refpt!=-1) ) {</span>
<span class="lineNum">     217 </span><span class="lineNoCov">          0 :             ff_post_error(_(&quot;Bad Point Match&quot;),_(&quot;Both points must be specified, or neither&quot;));</span>
<span class="lineNum">     218 </span>            :         }
<span class="lineNum">     219 </span><span class="lineNoCov">          0 :         if ( basept!=-1 ) {</span>
<span class="lineNum">     220 </span><span class="lineNoCov">          0 :             if ( ttfFindPointInSC(ci-&gt;cv-&gt;b.sc,CVLayer((CharViewBase *) ci-&gt;cv),basept,&amp;inbase,ci-&gt;rf)!=-1 ) {</span>
<span class="lineNum">     221 </span><span class="lineNoCov">          0 :                 ff_post_error(_(&quot;Bad Point Match&quot;),_(&quot;Couldn't find base point&quot;));</span>
<span class="lineNum">     222 </span><span class="lineNoCov">          0 : return( false );</span>
<span class="lineNum">     223 </span><span class="lineNoCov">          0 :             } else if ( ttfFindPointInSC(ci-&gt;rf-&gt;sc,CVLayer((CharViewBase *) ci-&gt;cv),refpt,&amp;inref,NULL)!=-1 ) {</span>
<span class="lineNum">     224 </span><span class="lineNoCov">          0 :                 ff_post_error(_(&quot;Bad Point Match&quot;),_(&quot;Couldn't find point in reference&quot;));</span>
<span class="lineNum">     225 </span><span class="lineNoCov">          0 : return( false );</span>
<span class="lineNum">     226 </span>            :             }
<span class="lineNum">     227 </span>            :             /* Override user specified value */
<span class="lineNum">     228 </span><span class="lineNoCov">          0 :             trans[4] = inbase.x-inref.x;</span>
<span class="lineNum">     229 </span><span class="lineNoCov">          0 :             trans[5] = inbase.y-inref.y;</span>
<span class="lineNum">     230 </span>            :         }
<span class="lineNum">     231 </span>            :     }
<span class="lineNum">     232 </span>            : 
<span class="lineNum">     233 </span><span class="lineNoCov">          0 :     for ( i=0; i&lt;6 &amp;&amp; ref-&gt;transform[i]==trans[i]; ++i );</span>
<span class="lineNum">     234 </span><span class="lineNoCov">          0 :     if ( i==6 &amp;&amp;</span>
<span class="lineNum">     235 </span><span class="lineNoCov">          0 :             usemy==ref-&gt;use_my_metrics &amp;&amp;</span>
<span class="lineNum">     236 </span><span class="lineNoCov">          0 :             round==ref-&gt;round_translation_to_grid &amp;&amp;</span>
<span class="lineNum">     237 </span><span class="lineNoCov">          0 :             (basept!=-1)==ref-&gt;point_match &amp;&amp;</span>
<span class="lineNum">     238 </span><span class="lineNoCov">          0 :             (basept==-1 ||</span>
<span class="lineNum">     239 </span><span class="lineNoCov">          0 :                 (ref-&gt;match_pt_base==basept &amp;&amp; ref-&gt;match_pt_ref==refpt))) {</span>
<span class="lineNum">     240 </span><span class="lineNoCov">          0 :         ref-&gt;point_match_out_of_date = false;</span>
<span class="lineNum">     241 </span><span class="lineNoCov">          0 : return( true );         /* Didn't really change */</span>
<span class="lineNum">     242 </span>            :     }
<span class="lineNum">     243 </span>            : 
<span class="lineNum">     244 </span><span class="lineNoCov">          0 :     for ( i=0; i&lt;6; ++i )</span>
<span class="lineNum">     245 </span><span class="lineNoCov">          0 :         ref-&gt;transform[i] = trans[i];</span>
<span class="lineNum">     246 </span><span class="lineNoCov">          0 :     SplinePointListsFree(ref-&gt;layers[0].splines);</span>
<span class="lineNum">     247 </span><span class="lineNoCov">          0 :     ref-&gt;layers[0].splines = SplinePointListTransform(SplinePointListCopy(ref-&gt;sc-&gt;layers[ly_fore].splines),trans,tpt_AllPoints);</span>
<span class="lineNum">     248 </span><span class="lineNoCov">          0 :     spl = NULL;</span>
<span class="lineNum">     249 </span><span class="lineNoCov">          0 :     if ( ref-&gt;layers[0].splines!=NULL )</span>
<span class="lineNum">     250 </span><span class="lineNoCov">          0 :         for ( spl = ref-&gt;layers[0].splines; spl-&gt;next!=NULL; spl = spl-&gt;next );</span>
<span class="lineNum">     251 </span><span class="lineNoCov">          0 :     for ( subref = ref-&gt;sc-&gt;layers[ly_fore].refs; subref!=NULL; subref=subref-&gt;next ) {</span>
<span class="lineNum">     252 </span><span class="lineNoCov">          0 :         new = SplinePointListTransform(SplinePointListCopy(subref-&gt;layers[0].splines),trans,tpt_AllPoints);</span>
<span class="lineNum">     253 </span><span class="lineNoCov">          0 :         if ( spl==NULL )</span>
<span class="lineNum">     254 </span><span class="lineNoCov">          0 :             ref-&gt;layers[0].splines = new;</span>
<span class="lineNum">     255 </span>            :         else
<span class="lineNum">     256 </span><span class="lineNoCov">          0 :             spl-&gt;next = new;</span>
<span class="lineNum">     257 </span><span class="lineNoCov">          0 :         if ( new!=NULL )</span>
<span class="lineNum">     258 </span><span class="lineNoCov">          0 :             for ( spl = new; spl-&gt;next!=NULL; spl = spl-&gt;next );</span>
<span class="lineNum">     259 </span>            :     }
<span class="lineNum">     260 </span><span class="lineNoCov">          0 :     ref-&gt;use_my_metrics = usemy;</span>
<span class="lineNum">     261 </span><span class="lineNoCov">          0 :     ref-&gt;round_translation_to_grid = round;</span>
<span class="lineNum">     262 </span><span class="lineNoCov">          0 :     ref-&gt;point_match = basept!=-1;</span>
<span class="lineNum">     263 </span><span class="lineNoCov">          0 :     ref-&gt;match_pt_base = basept; ref-&gt;match_pt_ref = refpt;</span>
<span class="lineNum">     264 </span><span class="lineNoCov">          0 :     ref-&gt;point_match_out_of_date = false;</span>
<span class="lineNum">     265 </span>            : 
<span class="lineNum">     266 </span><span class="lineNoCov">          0 :     SplineSetFindBounds(ref-&gt;layers[0].splines,&amp;ref-&gt;bb);</span>
<span class="lineNum">     267 </span><span class="lineNoCov">          0 :     CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b);</span>
<span class="lineNum">     268 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="269"><span class="lineNum">     269 </span>            : }</a>
<span class="lineNum">     270 </span>            : 
<span class="lineNum">     271 </span><span class="lineNoCov">          0 : static int GI_ROK(GGadget *g, GEvent *e) {</span>
<span class="lineNum">     272 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_buttonactivate ) {</span>
<span class="lineNum">     273 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">     274 </span><span class="lineNoCov">          0 :         if ( GI_ROK_Do(ci))</span>
<span class="lineNum">     275 </span><span class="lineNoCov">          0 :             ci-&gt;done = true;</span>
<span class="lineNum">     276 </span>            :     }
<span class="lineNum">     277 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="278"><span class="lineNum">     278 </span>            : }</a>
<span class="lineNum">     279 </span>            : 
<span class="lineNum">     280 </span><span class="lineNoCov">          0 : static int GI_Show(GGadget *g, GEvent *e) {</span>
<span class="lineNum">     281 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_buttonactivate ) {</span>
<span class="lineNum">     282 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">     283 </span><span class="lineNoCov">          0 :         if ( ci-&gt;changed ) {</span>
<span class="lineNum">     284 </span>            :             char *buts[4];
<span class="lineNum">     285 </span>            :             int ans;
<span class="lineNum">     286 </span><span class="lineNoCov">          0 :             buts[0] = _(&quot;C_hange&quot;);</span>
<span class="lineNum">     287 </span><span class="lineNoCov">          0 :             buts[1] = _(&quot;_Retain&quot;);</span>
<span class="lineNum">     288 </span><span class="lineNoCov">          0 :             buts[2] = _(&quot;_Cancel&quot;);</span>
<span class="lineNum">     289 </span><span class="lineNoCov">          0 :             buts[3] = NULL;</span>
<span class="lineNum">     290 </span><span class="lineNoCov">          0 :             ans = gwwv_ask(_(&quot;Transformation Matrix Changed&quot;),(const char **)buts,0,2,_(&quot;You have changed the transformation matrix, do you wish to use the new version?&quot;));</span>
<span class="lineNum">     291 </span><span class="lineNoCov">          0 :             if ( ans==2 )</span>
<span class="lineNum">     292 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">     293 </span><span class="lineNoCov">          0 :             else if ( ans==0 ) {</span>
<span class="lineNum">     294 </span><span class="lineNoCov">          0 :                 if ( !GI_ROK_Do(ci))</span>
<span class="lineNum">     295 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">     296 </span>            :             }
<span class="lineNum">     297 </span>            :         }
<span class="lineNum">     298 </span><span class="lineNoCov">          0 :         ci-&gt;done = true;</span>
<span class="lineNum">     299 </span><span class="lineNoCov">          0 :         CharViewCreate(ci-&gt;rf-&gt;sc,(FontView *) (ci-&gt;cv-&gt;b.fv),-1);</span>
<span class="lineNum">     300 </span>            :     }
<span class="lineNum">     301 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="302"><span class="lineNum">     302 </span>            : }</a>
<span class="lineNum">     303 </span>            : 
<span class="lineNum">     304 </span><span class="lineNoCov">          0 : static int gi_e_h(GWindow gw, GEvent *event) {</span>
<span class="lineNum">     305 </span><span class="lineNoCov">          0 :     if ( event-&gt;type==et_close ) {</span>
<span class="lineNum">     306 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(gw);</span>
<span class="lineNum">     307 </span><span class="lineNoCov">          0 :         ci-&gt;done = true;</span>
<span class="lineNum">     308 </span><span class="lineNoCov">          0 :     } else if ( event-&gt;type==et_char ) {</span>
<span class="lineNum">     309 </span><span class="lineNoCov">          0 :         if ( event-&gt;u.chr.keysym == GK_F1 || event-&gt;u.chr.keysym == GK_Help ) {</span>
<span class="lineNum">     310 </span><span class="lineNoCov">          0 :             help(&quot;getinfo.html&quot;);</span>
<span class="lineNum">     311 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">     312 </span>            :         }
<span class="lineNum">     313 </span><span class="lineNoCov">          0 : return( false );</span>
<span class="lineNum">     314 </span><span class="lineNoCov">          0 :     } else if ( event-&gt;type == et_map ) {</span>
<span class="lineNum">     315 </span>            :         /* Above palettes */
<span class="lineNum">     316 </span><span class="lineNoCov">          0 :         GDrawRaise(gw);</span>
<span class="lineNum">     317 </span>            :     }
<span class="lineNum">     318 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="319"><span class="lineNum">     319 </span>            : }</a>
<span class="lineNum">     320 </span>            : 
<span class="lineNum">     321 </span><span class="lineNoCov">          0 : static void RefGetInfo(CharView *cv, RefChar *ref) {</span>
<span class="lineNum">     322 </span>            :     static GIData gi;
<span class="lineNum">     323 </span>            :     GRect pos;
<span class="lineNum">     324 </span>            :     GWindowAttrs wattrs;
<span class="lineNum">     325 </span>            :     GGadgetCreateData gcd[33], boxes[7];
<span class="lineNum">     326 </span>            :     GGadgetCreateData *varray[19], *hvarray[16], *harray1[6], *harray2[4],
<span class="lineNum">     327 </span>            :             *harray3[7], *hvarray2[4][6];
<span class="lineNum">     328 </span>            :     GTextInfo label[33];
<span class="lineNum">     329 </span>            :     char tbuf[6][40], bbbuf[4][40];
<span class="lineNum">     330 </span>            :     char basebuf[20], refbuf[20];
<span class="lineNum">     331 </span>            :     char namebuf[100];
<span class="lineNum">     332 </span>            :     char ubuf[40];
<span class="lineNum">     333 </span>            :     int i,j,l;
<span class="lineNum">     334 </span>            : 
<span class="lineNum">     335 </span><span class="lineNoCov">          0 :     gi.cv = cv;</span>
<span class="lineNum">     336 </span><span class="lineNoCov">          0 :     gi.sc = cv-&gt;b.sc;</span>
<span class="lineNum">     337 </span><span class="lineNoCov">          0 :     gi.rf = ref;</span>
<span class="lineNum">     338 </span><span class="lineNoCov">          0 :     gi.changed = false;</span>
<span class="lineNum">     339 </span><span class="lineNoCov">          0 :     gi.done = false;</span>
<span class="lineNum">     340 </span>            : 
<span class="lineNum">     341 </span><span class="lineNoCov">          0 :         memset(&amp;wattrs,0,sizeof(wattrs));</span>
<span class="lineNum">     342 </span><span class="lineNoCov">          0 :         wattrs.mask = wam_events|wam_cursor|wam_utf8_wtitle|wam_undercursor|wam_isdlg|wam_restrict;</span>
<span class="lineNum">     343 </span><span class="lineNoCov">          0 :         wattrs.event_masks = ~(1&lt;&lt;et_charup);</span>
<span class="lineNum">     344 </span><span class="lineNoCov">          0 :         wattrs.restrict_input_to_me = 1;</span>
<span class="lineNum">     345 </span><span class="lineNoCov">          0 :         wattrs.undercursor = 1;</span>
<span class="lineNum">     346 </span><span class="lineNoCov">          0 :         wattrs.cursor = ct_pointer;</span>
<span class="lineNum">     347 </span><span class="lineNoCov">          0 :         wattrs.utf8_window_title = _(&quot;Reference Info&quot;);</span>
<span class="lineNum">     348 </span><span class="lineNoCov">          0 :         wattrs.is_dlg = true;</span>
<span class="lineNum">     349 </span><span class="lineNoCov">          0 :         pos.x = pos.y = 0;</span>
<span class="lineNum">     350 </span><span class="lineNoCov">          0 :         pos.width = GGadgetScale(GDrawPointsToPixels(NULL,RI_Width));</span>
<span class="lineNum">     351 </span><span class="lineNoCov">          0 :         pos.height = GDrawPointsToPixels(NULL,</span>
<span class="lineNum">     352 </span><span class="lineNoCov">          0 :                 ref-&gt;sc-&gt;unicodeenc!=-1?RI_Height+12:RI_Height);</span>
<span class="lineNum">     353 </span><span class="lineNoCov">          0 :         gi.gw = GDrawCreateTopWindow(NULL,&amp;pos,gi_e_h,&amp;gi,&amp;wattrs);</span>
<span class="lineNum">     354 </span>            : 
<span class="lineNum">     355 </span><span class="lineNoCov">          0 :         memset(&amp;gcd,0,sizeof(gcd));</span>
<span class="lineNum">     356 </span><span class="lineNoCov">          0 :         memset(&amp;label,0,sizeof(label));</span>
<span class="lineNum">     357 </span><span class="lineNoCov">          0 :         memset(&amp;boxes,0,sizeof(boxes));</span>
<span class="lineNum">     358 </span>            : 
<span class="lineNum">     359 </span><span class="lineNoCov">          0 :         snprintf( namebuf, sizeof(namebuf),</span>
<span class="lineNum">     360 </span><span class="lineNoCov">          0 :                 _(&quot;Reference to character %1$.20s at %2$d&quot;),</span>
<span class="lineNum">     361 </span><span class="lineNoCov">          0 :                 ref-&gt;sc-&gt;name, (int) cv-&gt;b.fv-&gt;map-&gt;backmap[ref-&gt;sc-&gt;orig_pos]);</span>
<span class="lineNum">     362 </span><span class="lineNoCov">          0 :         label[0].text = (unichar_t *) namebuf;</span>
<span class="lineNum">     363 </span><span class="lineNoCov">          0 :         label[0].text_is_1byte = true;</span>
<span class="lineNum">     364 </span><span class="lineNoCov">          0 :         gcd[0].gd.label = &amp;label[0];</span>
<span class="lineNum">     365 </span><span class="lineNoCov">          0 :         gcd[0].gd.pos.x = 5; gcd[0].gd.pos.y = 5;</span>
<span class="lineNum">     366 </span><span class="lineNoCov">          0 :         gcd[0].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     367 </span><span class="lineNoCov">          0 :         gcd[0].creator = GLabelCreate;</span>
<span class="lineNum">     368 </span><span class="lineNoCov">          0 :         l = 0;</span>
<span class="lineNum">     369 </span><span class="lineNoCov">          0 :         varray[l++] = &amp;gcd[0];</span>
<span class="lineNum">     370 </span><span class="lineNoCov">          0 :         j = 1;</span>
<span class="lineNum">     371 </span>            : 
<span class="lineNum">     372 </span><span class="lineNoCov">          0 :         if ( ref-&gt;sc-&gt;unicodeenc!=-1 ) {</span>
<span class="lineNum">     373 </span><span class="lineNoCov">          0 :             sprintf( ubuf, &quot; Unicode: U+%04x&quot;, ref-&gt;sc-&gt;unicodeenc );</span>
<span class="lineNum">     374 </span><span class="lineNoCov">          0 :             label[1].text = (unichar_t *) ubuf;</span>
<span class="lineNum">     375 </span><span class="lineNoCov">          0 :             label[1].text_is_1byte = true;</span>
<span class="lineNum">     376 </span><span class="lineNoCov">          0 :             gcd[1].gd.label = &amp;label[1];</span>
<span class="lineNum">     377 </span><span class="lineNoCov">          0 :             gcd[1].gd.pos.x = 5; gcd[1].gd.pos.y = 17;</span>
<span class="lineNum">     378 </span><span class="lineNoCov">          0 :             gcd[1].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     379 </span><span class="lineNoCov">          0 :             gcd[1].creator = GLabelCreate;</span>
<span class="lineNum">     380 </span><span class="lineNoCov">          0 :             varray[l++] = &amp;gcd[1];</span>
<span class="lineNum">     381 </span><span class="lineNoCov">          0 :             j=2;</span>
<span class="lineNum">     382 </span>            :         }
<span class="lineNum">     383 </span>            : 
<span class="lineNum">     384 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Transformed by:&quot;);</span>
<span class="lineNum">     385 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">     386 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">     387 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 5; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+14;</span>
<span class="lineNum">     388 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible|gg_utf8_popup;</span>
<span class="lineNum">     389 </span><span class="lineNoCov">          0 :         gcd[j].gd.popup_msg = (unichar_t *) _(&quot;The transformation matrix specifies how the points in\nthe source glyph should be transformed before\nthey are drawn in the current glyph.\n x(new) = tm[1,1]*x + tm[2,1]*y + tm[3,1]\n y(new) = tm[1,2]*x + tm[2,2]*y + tm[3,2]&quot;);</span>
<span class="lineNum">     390 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">     391 </span><span class="lineNoCov">          0 :         varray[l++] = &amp;gcd[j];</span>
<span class="lineNum">     392 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">     393 </span>            : 
<span class="lineNum">     394 </span><span class="lineNoCov">          0 :         for ( i=0; i&lt;6; ++i ) {</span>
<span class="lineNum">     395 </span><span class="lineNoCov">          0 :             if ( !(i&amp;1) ) hvarray[5*(i/2)] = GCD_Glue;</span>
<span class="lineNum">     396 </span><span class="lineNoCov">          0 :             sprintf(tbuf[i],&quot;%g&quot;, (double) ref-&gt;transform[i]);</span>
<span class="lineNum">     397 </span><span class="lineNoCov">          0 :             label[i+j].text = (unichar_t *) tbuf[i];</span>
<span class="lineNum">     398 </span><span class="lineNoCov">          0 :             label[i+j].text_is_1byte = true;</span>
<span class="lineNum">     399 </span><span class="lineNoCov">          0 :             gcd[i+j].gd.label = &amp;label[i+j];</span>
<span class="lineNum">     400 </span><span class="lineNoCov">          0 :             gcd[i+j].gd.pos.x = 20+((i&amp;1)?85:0); gcd[i+j].gd.pos.width=75;</span>
<span class="lineNum">     401 </span><span class="lineNoCov">          0 :             gcd[i+j].gd.pos.y = gcd[j-1].gd.pos.y+14+(i/2)*26;</span>
<span class="lineNum">     402 </span><span class="lineNoCov">          0 :             gcd[i+j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     403 </span><span class="lineNoCov">          0 :             gcd[i+j].gd.cid = i+1000;</span>
<span class="lineNum">     404 </span><span class="lineNoCov">          0 :             gcd[i+j].gd.handle_controlevent = GI_TransChange;</span>
<span class="lineNum">     405 </span><span class="lineNoCov">          0 :             gcd[i+j].creator = (i&gt;=4 ? GNumericFieldCreate : GTextFieldCreate);</span>
<span class="lineNum">     406 </span><span class="lineNoCov">          0 :             hvarray[5*(i/2)+1+(i&amp;1)] = &amp;gcd[i+j];</span>
<span class="lineNum">     407 </span><span class="lineNoCov">          0 :             if ( (i&amp;1) ) { hvarray[5*(i/2)+3] = GCD_Glue; hvarray[5*(i/2)+4] = NULL; }</span>
<span class="lineNum">     408 </span>            :         }
<span class="lineNum">     409 </span><span class="lineNoCov">          0 :         if ( ref-&gt;point_match )</span>
<span class="lineNum">     410 </span><span class="lineNoCov">          0 :             gcd[4+j].gd.flags = gcd[5+j].gd.flags = gg_visible;</span>
<span class="lineNum">     411 </span><span class="lineNoCov">          0 :         hvarray[15] = NULL;</span>
<span class="lineNum">     412 </span>            : 
<span class="lineNum">     413 </span><span class="lineNoCov">          0 :         boxes[2].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     414 </span><span class="lineNoCov">          0 :         boxes[2].gd.u.boxelements = hvarray;</span>
<span class="lineNum">     415 </span><span class="lineNoCov">          0 :         boxes[2].creator = GHVBoxCreate;</span>
<span class="lineNum">     416 </span><span class="lineNoCov">          0 :         varray[l++] = &amp;boxes[2];</span>
<span class="lineNum">     417 </span>            : 
<span class="lineNum">     418 </span><span class="lineNoCov">          0 :         label[6+j].text = (unichar_t *) _(&quot;_Use My Metrics&quot;);</span>
<span class="lineNum">     419 </span><span class="lineNoCov">          0 :         label[6+j].text_in_resource = true;</span>
<span class="lineNum">     420 </span><span class="lineNoCov">          0 :         label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     421 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     422 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.x = 5; gcd[6+j].gd.pos.y = gcd[6+j-1].gd.pos.y+21;</span>
<span class="lineNum">     423 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gg_enabled|gg_visible|gg_utf8_popup | (ref-&gt;use_my_metrics?gg_cb_on:0);</span>
<span class="lineNum">     424 </span><span class="lineNoCov">          0 :         gcd[i+j].gd.cid = 6+1000;</span>
<span class="lineNum">     425 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.popup_msg = (unichar_t *) _(&quot;Only relevant in a truetype font, this flag indicates that the width\nof the composite glyph should be the same as the width of this reference.&quot;);</span>
<span class="lineNum">     426 </span><span class="lineNoCov">          0 :         varray[l++] = &amp;gcd[6+j];</span>
<span class="lineNum">     427 </span><span class="lineNoCov">          0 :         gcd[6+j++].creator = GCheckBoxCreate;</span>
<span class="lineNum">     428 </span>            : 
<span class="lineNum">     429 </span><span class="lineNoCov">          0 :         label[6+j].text = (unichar_t *) _(&quot;_Round To Grid&quot;);</span>
<span class="lineNum">     430 </span><span class="lineNoCov">          0 :         label[6+j].text_in_resource = true;</span>
<span class="lineNum">     431 </span><span class="lineNoCov">          0 :         label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     432 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     433 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.x = 5; gcd[6+j].gd.pos.y = gcd[6+j-1].gd.pos.y+14;</span>
<span class="lineNum">     434 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gg_enabled|gg_visible|gg_utf8_popup | (ref-&gt;round_translation_to_grid?gg_cb_on:0);</span>
<span class="lineNum">     435 </span><span class="lineNoCov">          0 :         gcd[i+j].gd.cid = 7+1000;</span>
<span class="lineNum">     436 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.popup_msg = (unichar_t *) _(&quot;Only relevant in a truetype font, this flag indicates that if the reference\nis translated, then the translation should be rounded during grid fitting.&quot;);</span>
<span class="lineNum">     437 </span><span class="lineNoCov">          0 :         varray[l++] = &amp;gcd[6+j];</span>
<span class="lineNum">     438 </span><span class="lineNoCov">          0 :         gcd[6+j++].creator = GCheckBoxCreate;</span>
<span class="lineNum">     439 </span>            : 
<span class="lineNum">     440 </span><span class="lineNoCov">          0 :         label[6+j].text = (unichar_t *) _(&quot;TrueType Point _Matching:&quot;);</span>
<span class="lineNum">     441 </span><span class="lineNoCov">          0 :         label[6+j].text_in_resource = true;</span>
<span class="lineNum">     442 </span><span class="lineNoCov">          0 :         label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     443 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     444 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.x = 5; gcd[6+j].gd.pos.y = gcd[6+j-1].gd.pos.y+17;</span>
<span class="lineNum">     445 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = cv-&gt;b.sc-&gt;layers[ly_fore].order2 ? (gg_enabled|gg_visible|gg_utf8_popup) : (gg_visible|gg_utf8_popup);</span>
<span class="lineNum">     446 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.popup_msg = (unichar_t *) _(&quot;Only relevant in a truetype font, this flag indicates that this\nreference should not be translated normally, but rather its position\nshould be determined by moving the reference so that the indicated\npoint in the reference falls on top of the indicated point in the base\ncharacter.&quot;);</span>
<span class="lineNum">     447 </span><span class="lineNoCov">          0 :         varray[l++] = &amp;gcd[6+j];</span>
<span class="lineNum">     448 </span><span class="lineNoCov">          0 :         gcd[6+j++].creator = GLabelCreate;</span>
<span class="lineNum">     449 </span>            : 
<span class="lineNum">     450 </span><span class="lineNoCov">          0 :         label[6+j].text = (unichar_t *) _(&quot;_Base:&quot;);</span>
<span class="lineNum">     451 </span><span class="lineNoCov">          0 :         label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     452 </span><span class="lineNoCov">          0 :         label[6+j].text_in_resource = true;</span>
<span class="lineNum">     453 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     454 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.x = 8; gcd[6+j].gd.pos.y = gcd[6+j-1].gd.pos.y+19;</span>
<span class="lineNum">     455 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = cv-&gt;b.sc-&gt;layers[ly_fore].order2 ? (gg_enabled|gg_visible|gg_utf8_popup) : (gg_visible|gg_utf8_popup);</span>
<span class="lineNum">     456 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.popup_msg = (unichar_t *) _(&quot;Only relevant in a truetype font, this flag indicates that this\nreference should not be translated normally, but rather its position\nshould be determined by moving the reference so that the indicated\npoint in the reference falls on top of the indicated point in the base\ncharacter.&quot;);</span>
<span class="lineNum">     457 </span><span class="lineNoCov">          0 :         harray1[0] = &amp;gcd[6+j];</span>
<span class="lineNum">     458 </span><span class="lineNoCov">          0 :         gcd[6+j++].creator = GLabelCreate;</span>
<span class="lineNum">     459 </span>            : 
<span class="lineNum">     460 </span><span class="lineNoCov">          0 :         if ( ref-&gt;point_match ) {</span>
<span class="lineNum">     461 </span><span class="lineNoCov">          0 :             sprintf(basebuf,&quot;%d&quot;, ref-&gt;match_pt_base);</span>
<span class="lineNum">     462 </span><span class="lineNoCov">          0 :             label[6+j].text = (unichar_t *) basebuf;</span>
<span class="lineNum">     463 </span><span class="lineNoCov">          0 :             label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     464 </span><span class="lineNoCov">          0 :             gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     465 </span>            :         }
<span class="lineNum">     466 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.x = 40; gcd[6+j].gd.pos.width=50;</span>
<span class="lineNum">     467 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.y = gcd[6+j-1].gd.pos.y-4;</span>
<span class="lineNum">     468 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gcd[6+j-1].gd.flags;</span>
<span class="lineNum">     469 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.cid = CID_Match_Pt_Base;</span>
<span class="lineNum">     470 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.handle_controlevent = GI_MatchPtChange;</span>
<span class="lineNum">     471 </span><span class="lineNoCov">          0 :         harray1[1] = &amp;gcd[6+j];</span>
<span class="lineNum">     472 </span><span class="lineNoCov">          0 :         gcd[6+j++].creator = GTextFieldCreate;</span>
<span class="lineNum">     473 </span>            : 
<span class="lineNum">     474 </span><span class="lineNoCov">          0 :         label[6+j].text = (unichar_t *) _(&quot;Ref:&quot;);</span>
<span class="lineNum">     475 </span><span class="lineNoCov">          0 :         label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     476 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     477 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.x = 95; gcd[6+j].gd.pos.y = gcd[6+j-2].gd.pos.y;</span>
<span class="lineNum">     478 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gcd[6+j-1].gd.flags;</span>
<span class="lineNum">     479 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.popup_msg = (unichar_t *) _(&quot;Only relevant in a truetype font, this flag indicates that this\nreference should not be translated normally, but rather its position\nshould be determined by moving the reference so that the indicated\npoint in the reference falls on top of the indicated point in the base\ncharacter.&quot;);</span>
<span class="lineNum">     480 </span><span class="lineNoCov">          0 :         harray1[2] = &amp;gcd[6+j];</span>
<span class="lineNum">     481 </span><span class="lineNoCov">          0 :         gcd[6+j++].creator = GLabelCreate;</span>
<span class="lineNum">     482 </span>            : 
<span class="lineNum">     483 </span><span class="lineNoCov">          0 :         if ( ref-&gt;point_match ) {</span>
<span class="lineNum">     484 </span><span class="lineNoCov">          0 :             sprintf(refbuf,&quot;%d&quot;, ref-&gt;match_pt_ref);</span>
<span class="lineNum">     485 </span><span class="lineNoCov">          0 :             label[6+j].text = (unichar_t *) refbuf;</span>
<span class="lineNum">     486 </span><span class="lineNoCov">          0 :             label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     487 </span><span class="lineNoCov">          0 :             gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     488 </span>            :         }
<span class="lineNum">     489 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.x = 127; gcd[6+j].gd.pos.width=50;</span>
<span class="lineNum">     490 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.y = gcd[6+j-2].gd.pos.y;</span>
<span class="lineNum">     491 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gcd[6+j-1].gd.flags;</span>
<span class="lineNum">     492 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.cid = CID_Match_Pt_Ref;</span>
<span class="lineNum">     493 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.handle_controlevent = GI_MatchPtChange;</span>
<span class="lineNum">     494 </span><span class="lineNoCov">          0 :         harray1[3] = &amp;gcd[6+j];</span>
<span class="lineNum">     495 </span><span class="lineNoCov">          0 :         gcd[6+j++].creator = GTextFieldCreate;</span>
<span class="lineNum">     496 </span><span class="lineNoCov">          0 :         harray1[4] = GCD_Glue; harray1[5] = NULL;</span>
<span class="lineNum">     497 </span>            : 
<span class="lineNum">     498 </span><span class="lineNoCov">          0 :         boxes[3].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     499 </span><span class="lineNoCov">          0 :         boxes[3].gd.u.boxelements = harray1;</span>
<span class="lineNum">     500 </span><span class="lineNoCov">          0 :         boxes[3].creator = GHBoxCreate;</span>
<span class="lineNum">     501 </span><span class="lineNoCov">          0 :         varray[l++] = &amp;boxes[3];</span>
<span class="lineNum">     502 </span>            : 
<span class="lineNum">     503 </span><span class="lineNoCov">          0 :         varray[l++] = GCD_Glue;</span>
<span class="lineNum">     504 </span>            : 
<span class="lineNum">     505 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.x = 5; gcd[6+j].gd.pos.y = RI_Height+(j==10?12:0)-70;</span>
<span class="lineNum">     506 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.width = RI_Width-10;</span>
<span class="lineNum">     507 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gg_visible | gg_enabled;</span>
<span class="lineNum">     508 </span><span class="lineNoCov">          0 :         varray[l++] = &amp;gcd[6+j];</span>
<span class="lineNum">     509 </span><span class="lineNoCov">          0 :         gcd[6+j++].creator = GLineCreate;</span>
<span class="lineNum">     510 </span>            : 
<span class="lineNum">     511 </span><span class="lineNoCov">          0 :         label[6+j].text = (unichar_t *) _(&quot;Bounding Box:&quot;);</span>
<span class="lineNum">     512 </span><span class="lineNoCov">          0 :         label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     513 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     514 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gg_enabled|gg_visible|gg_utf8_popup;</span>
<span class="lineNum">     515 </span><span class="lineNoCov">          0 :         gcd[6+j].creator = GLabelCreate;</span>
<span class="lineNum">     516 </span><span class="lineNoCov">          0 :         varray[l++] = &amp;gcd[6+j];</span>
<span class="lineNum">     517 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">     518 </span>            : 
<span class="lineNum">     519 </span><span class="lineNoCov">          0 :         hvarray2[0][0] = GCD_Glue; hvarray2[0][1] = GCD_Glue;</span>
<span class="lineNum">     520 </span>            : 
<span class="lineNum">     521 </span><span class="lineNoCov">          0 :         label[6+j].text = (unichar_t *) _(&quot;Min&quot;);</span>
<span class="lineNum">     522 </span><span class="lineNoCov">          0 :         label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     523 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     524 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gg_enabled|gg_visible|gg_utf8_popup;</span>
<span class="lineNum">     525 </span><span class="lineNoCov">          0 :         gcd[6+j].creator = GLabelCreate;</span>
<span class="lineNum">     526 </span><span class="lineNoCov">          0 :         hvarray2[0][2] = &amp;gcd[6+j++];</span>
<span class="lineNum">     527 </span>            : 
<span class="lineNum">     528 </span><span class="lineNoCov">          0 :         label[6+j].text = (unichar_t *) _(&quot;Max&quot;);</span>
<span class="lineNum">     529 </span><span class="lineNoCov">          0 :         label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     530 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     531 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gg_enabled|gg_visible|gg_utf8_popup;</span>
<span class="lineNum">     532 </span><span class="lineNoCov">          0 :         gcd[6+j].creator = GLabelCreate;</span>
<span class="lineNum">     533 </span><span class="lineNoCov">          0 :         hvarray2[0][3] = &amp;gcd[6+j++]; hvarray2[0][4] = GCD_Glue; hvarray2[0][5] = NULL;</span>
<span class="lineNum">     534 </span>            : 
<span class="lineNum">     535 </span><span class="lineNoCov">          0 :         hvarray2[1][0] = hvarray2[1][4] = GCD_Glue; hvarray2[1][5] = NULL;</span>
<span class="lineNum">     536 </span><span class="lineNoCov">          0 :         hvarray2[2][0] = hvarray2[2][4] = GCD_Glue; hvarray2[2][5] = NULL;</span>
<span class="lineNum">     537 </span>            : 
<span class="lineNum">     538 </span><span class="lineNoCov">          0 :         label[6+j].text = (unichar_t *) _(&quot;X:&quot;);</span>
<span class="lineNum">     539 </span><span class="lineNoCov">          0 :         label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     540 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     541 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gg_enabled|gg_visible|gg_utf8_popup;</span>
<span class="lineNum">     542 </span><span class="lineNoCov">          0 :         gcd[6+j].creator = GLabelCreate;</span>
<span class="lineNum">     543 </span><span class="lineNoCov">          0 :         hvarray2[1][1] = &amp;gcd[6+j++];</span>
<span class="lineNum">     544 </span>            : 
<span class="lineNum">     545 </span><span class="lineNoCov">          0 :         label[6+j].text = (unichar_t *) _(&quot;Y:&quot;);</span>
<span class="lineNum">     546 </span><span class="lineNoCov">          0 :         label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     547 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     548 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gg_enabled|gg_visible|gg_utf8_popup;</span>
<span class="lineNum">     549 </span><span class="lineNoCov">          0 :         gcd[6+j].creator = GLabelCreate;</span>
<span class="lineNum">     550 </span><span class="lineNoCov">          0 :         hvarray2[2][1] = &amp;gcd[6+j++];</span>
<span class="lineNum">     551 </span>            : 
<span class="lineNum">     552 </span><span class="lineNoCov">          0 :         for ( i=0; i&lt;4; ++i ) {</span>
<span class="lineNum">     553 </span><span class="lineNoCov">          0 :             sprintf(bbbuf[i],&quot;%g&quot;, (double) ((&amp;ref-&gt;bb.minx)[i]));</span>
<span class="lineNum">     554 </span><span class="lineNoCov">          0 :             label[6+j].text = (unichar_t *) bbbuf[i];</span>
<span class="lineNum">     555 </span><span class="lineNoCov">          0 :             label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     556 </span><span class="lineNoCov">          0 :             gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     557 </span><span class="lineNoCov">          0 :             gcd[6+j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     558 </span><span class="lineNoCov">          0 :             gcd[6+j].creator = GLabelCreate;</span>
<span class="lineNum">     559 </span><span class="lineNoCov">          0 :             hvarray2[1+i/2][2+(i&amp;1)] = &amp;gcd[6+j++];</span>
<span class="lineNum">     560 </span>            :         }
<span class="lineNum">     561 </span><span class="lineNoCov">          0 :         hvarray2[3][0] = NULL;</span>
<span class="lineNum">     562 </span>            : 
<span class="lineNum">     563 </span><span class="lineNoCov">          0 :         boxes[4].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     564 </span><span class="lineNoCov">          0 :         boxes[4].gd.u.boxelements = hvarray2[0];</span>
<span class="lineNum">     565 </span><span class="lineNoCov">          0 :         boxes[4].creator = GHVBoxCreate;</span>
<span class="lineNum">     566 </span><span class="lineNoCov">          0 :         varray[l++] = &amp;boxes[4];</span>
<span class="lineNum">     567 </span>            : 
<span class="lineNum">     568 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.x = 5; gcd[6+j].gd.pos.y = RI_Height+(j==10?12:0)-70;</span>
<span class="lineNum">     569 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.width = RI_Width-10;</span>
<span class="lineNum">     570 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gg_visible | gg_enabled;</span>
<span class="lineNum">     571 </span><span class="lineNoCov">          0 :         varray[l++] = &amp;gcd[6+j];</span>
<span class="lineNum">     572 </span><span class="lineNoCov">          0 :         gcd[6+j++].creator = GLineCreate;</span>
<span class="lineNum">     573 </span>            : 
<span class="lineNum">     574 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.x = (RI_Width-GIntGetResource(_NUM_Buttonsize))/2;</span>
<span class="lineNum">     575 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.y = gcd[6+j-1].gd.pos.y+6;</span>
<span class="lineNum">     576 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.width = -1; gcd[6+j].gd.pos.height = 0;</span>
<span class="lineNum">     577 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gg_visible | gg_enabled ;</span>
<span class="lineNum">     578 </span><span class="lineNoCov">          0 :         label[6+j].text = (unichar_t *) _(&quot;_Show&quot;);</span>
<span class="lineNum">     579 </span><span class="lineNoCov">          0 :         label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     580 </span><span class="lineNoCov">          0 :         label[6+j].text_in_resource = true;</span>
<span class="lineNum">     581 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.mnemonic = 'S';</span>
<span class="lineNum">     582 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     583 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.handle_controlevent = GI_Show;</span>
<span class="lineNum">     584 </span><span class="lineNoCov">          0 :         harray2[0] = GCD_Glue; harray2[1] = &amp;gcd[6+j]; harray2[2] = GCD_Glue; harray2[3] = NULL;</span>
<span class="lineNum">     585 </span><span class="lineNoCov">          0 :         gcd[6+j++].creator = GButtonCreate;</span>
<span class="lineNum">     586 </span>            : 
<span class="lineNum">     587 </span><span class="lineNoCov">          0 :         boxes[5].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     588 </span><span class="lineNoCov">          0 :         boxes[5].gd.u.boxelements = harray2;</span>
<span class="lineNum">     589 </span><span class="lineNoCov">          0 :         boxes[5].creator = GHBoxCreate;</span>
<span class="lineNum">     590 </span><span class="lineNoCov">          0 :         varray[l++] = &amp;boxes[5];</span>
<span class="lineNum">     591 </span>            : 
<span class="lineNum">     592 </span><span class="lineNoCov">          0 :         gcd[6+j] = gcd[6+j-2];</span>
<span class="lineNum">     593 </span><span class="lineNoCov">          0 :         varray[l++] = &amp;gcd[6+j++];</span>
<span class="lineNum">     594 </span>            : 
<span class="lineNum">     595 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.x = 30-3; gcd[6+j].gd.pos.y = RI_Height+(j==13?12:0)-30-3;</span>
<span class="lineNum">     596 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.width = -1; gcd[6+j].gd.pos.height = 0;</span>
<span class="lineNum">     597 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gg_visible | gg_enabled | gg_but_default;</span>
<span class="lineNum">     598 </span><span class="lineNoCov">          0 :         label[6+j].text = (unichar_t *) _(&quot;_OK&quot;);</span>
<span class="lineNum">     599 </span><span class="lineNoCov">          0 :         label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     600 </span><span class="lineNoCov">          0 :         label[6+j].text_in_resource = true;</span>
<span class="lineNum">     601 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.mnemonic = 'O';</span>
<span class="lineNum">     602 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     603 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.handle_controlevent = GI_ROK;</span>
<span class="lineNum">     604 </span><span class="lineNoCov">          0 :         gcd[6+j++].creator = GButtonCreate;</span>
<span class="lineNum">     605 </span>            : 
<span class="lineNum">     606 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.x = -30; gcd[6+j].gd.pos.y = gcd[6+j-1].gd.pos.y+3;</span>
<span class="lineNum">     607 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.pos.width = -1; gcd[6+j].gd.pos.height = 0;</span>
<span class="lineNum">     608 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.flags = gg_visible | gg_enabled | gg_but_cancel;</span>
<span class="lineNum">     609 </span><span class="lineNoCov">          0 :         label[6+j].text = (unichar_t *) _(&quot;_Cancel&quot;);</span>
<span class="lineNum">     610 </span><span class="lineNoCov">          0 :         label[6+j].text_is_1byte = true;</span>
<span class="lineNum">     611 </span><span class="lineNoCov">          0 :         label[6+j].text_in_resource = true;</span>
<span class="lineNum">     612 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.mnemonic = 'C';</span>
<span class="lineNum">     613 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.label = &amp;label[6+j];</span>
<span class="lineNum">     614 </span><span class="lineNoCov">          0 :         gcd[6+j].gd.handle_controlevent = GI_Cancel;</span>
<span class="lineNum">     615 </span><span class="lineNoCov">          0 :         gcd[6+j].creator = GButtonCreate;</span>
<span class="lineNum">     616 </span>            : 
<span class="lineNum">     617 </span><span class="lineNoCov">          0 :         harray3[0] = GCD_Glue; harray3[1] = &amp;gcd[6+j-1]; harray3[2] = GCD_Glue;</span>
<span class="lineNum">     618 </span><span class="lineNoCov">          0 :          harray3[3] = GCD_Glue; harray3[4] = &amp;gcd[6+j]; harray3[5] = GCD_Glue;</span>
<span class="lineNum">     619 </span><span class="lineNoCov">          0 :          harray3[6] = NULL;</span>
<span class="lineNum">     620 </span><span class="lineNoCov">          0 :         boxes[6].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     621 </span><span class="lineNoCov">          0 :         boxes[6].gd.u.boxelements = harray3;</span>
<span class="lineNum">     622 </span><span class="lineNoCov">          0 :         boxes[6].creator = GHBoxCreate;</span>
<span class="lineNum">     623 </span><span class="lineNoCov">          0 :         varray[l++] = &amp;boxes[6];</span>
<span class="lineNum">     624 </span><span class="lineNoCov">          0 :         varray[l] = NULL;</span>
<span class="lineNum">     625 </span>            : 
<span class="lineNum">     626 </span><span class="lineNoCov">          0 :         boxes[0].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     627 </span><span class="lineNoCov">          0 :         boxes[0].gd.u.boxelements = varray;</span>
<span class="lineNum">     628 </span><span class="lineNoCov">          0 :         boxes[0].creator = GVBoxCreate;</span>
<span class="lineNum">     629 </span>            : 
<span class="lineNum">     630 </span><span class="lineNoCov">          0 :         GGadgetsCreate(gi.gw,boxes);</span>
<span class="lineNum">     631 </span><span class="lineNoCov">          0 :         GWidgetIndicateFocusGadget(gcd[j].ret);</span>
<span class="lineNum">     632 </span><span class="lineNoCov">          0 :     GHVBoxSetExpandableRow(boxes[0].ret,0);</span>
<span class="lineNum">     633 </span><span class="lineNoCov">          0 :     GHVBoxSetExpandableCol(boxes[2].ret,gb_expandglue);</span>
<span class="lineNum">     634 </span><span class="lineNoCov">          0 :     GHVBoxSetExpandableCol(boxes[3].ret,gb_expandglue);</span>
<span class="lineNum">     635 </span><span class="lineNoCov">          0 :     GHVBoxSetPadding(boxes[3].ret,6,2);</span>
<span class="lineNum">     636 </span><span class="lineNoCov">          0 :     GHVBoxSetExpandableCol(boxes[4].ret,gb_expandglue);</span>
<span class="lineNum">     637 </span><span class="lineNoCov">          0 :     GHVBoxSetExpandableCol(boxes[5].ret,gb_expandglue);</span>
<span class="lineNum">     638 </span><span class="lineNoCov">          0 :     GHVBoxSetExpandableCol(boxes[6].ret,gb_expandgluesame);</span>
<span class="lineNum">     639 </span><span class="lineNoCov">          0 :     GHVBoxFitWindow(boxes[0].ret);</span>
<span class="lineNum">     640 </span>            : 
<span class="lineNum">     641 </span><span class="lineNoCov">          0 :     GWidgetHidePalettes();</span>
<span class="lineNum">     642 </span><span class="lineNoCov">          0 :     GDrawSetVisible(gi.gw,true);</span>
<span class="lineNum">     643 </span><span class="lineNoCov">          0 :     while ( !gi.done )</span>
<span class="lineNum">     644 </span><span class="lineNoCov">          0 :         GDrawProcessOneEvent(NULL);</span>
<span class="lineNum">     645 </span><span class="lineNoCov">          0 :     GDrawDestroyWindow(gi.gw);</span>
<a name="646"><span class="lineNum">     646 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     647 </span>            : 
<span class="lineNum">     648 </span><span class="lineNoCov">          0 : static void ImgGetInfo(CharView *cv, ImageList *img) {</span>
<span class="lineNum">     649 </span>            :     static GIData gi;
<span class="lineNum">     650 </span>            :     GRect pos;
<span class="lineNum">     651 </span>            :     GWindowAttrs wattrs;
<span class="lineNum">     652 </span>            :     GGadgetCreateData gcd[12], boxes[3], *varray[11], *harray[6];
<span class="lineNum">     653 </span>            :     GTextInfo label[12];
<span class="lineNum">     654 </span>            :     char posbuf[100], scalebuf[100], sizebuf[100];
<span class="lineNum">     655 </span><span class="lineNoCov">          0 :     struct _GImage *base = img-&gt;image-&gt;list_len==0?</span>
<span class="lineNum">     656 </span><span class="lineNoCov">          0 :             img-&gt;image-&gt;u.image:img-&gt;image-&gt;u.images[0];</span>
<span class="lineNum">     657 </span>            : 
<span class="lineNum">     658 </span><span class="lineNoCov">          0 :     gi.cv = cv;</span>
<span class="lineNum">     659 </span><span class="lineNoCov">          0 :     gi.sc = cv-&gt;b.sc;</span>
<span class="lineNum">     660 </span><span class="lineNoCov">          0 :     gi.img = img;</span>
<span class="lineNum">     661 </span><span class="lineNoCov">          0 :     gi.done = false;</span>
<span class="lineNum">     662 </span>            : 
<span class="lineNum">     663 </span><span class="lineNoCov">          0 :         memset(&amp;wattrs,0,sizeof(wattrs));</span>
<span class="lineNum">     664 </span><span class="lineNoCov">          0 :         wattrs.mask = wam_events|wam_cursor|wam_utf8_wtitle|wam_undercursor|wam_isdlg|wam_restrict;</span>
<span class="lineNum">     665 </span><span class="lineNoCov">          0 :         wattrs.event_masks = ~(1&lt;&lt;et_charup);</span>
<span class="lineNum">     666 </span><span class="lineNoCov">          0 :         wattrs.restrict_input_to_me = 1;</span>
<span class="lineNum">     667 </span><span class="lineNoCov">          0 :         wattrs.undercursor = 1;</span>
<span class="lineNum">     668 </span><span class="lineNoCov">          0 :         wattrs.cursor = ct_pointer;</span>
<span class="lineNum">     669 </span><span class="lineNoCov">          0 :         wattrs.utf8_window_title = _(&quot;Image Info&quot;);</span>
<span class="lineNum">     670 </span><span class="lineNoCov">          0 :         wattrs.is_dlg = true;</span>
<span class="lineNum">     671 </span><span class="lineNoCov">          0 :         pos.x = pos.y = 0;</span>
<span class="lineNum">     672 </span><span class="lineNoCov">          0 :         pos.width = GGadgetScale(GDrawPointsToPixels(NULL,II_Width));</span>
<span class="lineNum">     673 </span><span class="lineNoCov">          0 :         pos.height = GDrawPointsToPixels(NULL,II_Height);</span>
<span class="lineNum">     674 </span><span class="lineNoCov">          0 :         gi.gw = GDrawCreateTopWindow(NULL,&amp;pos,gi_e_h,&amp;gi,&amp;wattrs);</span>
<span class="lineNum">     675 </span>            : 
<span class="lineNum">     676 </span><span class="lineNoCov">          0 :         memset(&amp;gcd,0,sizeof(gcd));</span>
<span class="lineNum">     677 </span><span class="lineNoCov">          0 :         memset(&amp;label,0,sizeof(label));</span>
<span class="lineNum">     678 </span>            : 
<span class="lineNum">     679 </span><span class="lineNoCov">          0 :         sprintf( posbuf, _(&quot;Image at:      (%.0f,%.0f)&quot;), (double) img-&gt;xoff,</span>
<span class="lineNum">     680 </span><span class="lineNoCov">          0 :                 (double) (img-&gt;yoff-GImageGetHeight(img-&gt;image)*img-&gt;yscale));</span>
<span class="lineNum">     681 </span><span class="lineNoCov">          0 :         label[0].text = (unichar_t *) posbuf;</span>
<span class="lineNum">     682 </span><span class="lineNoCov">          0 :         label[0].text_is_1byte = true;</span>
<span class="lineNum">     683 </span><span class="lineNoCov">          0 :         gcd[0].gd.label = &amp;label[0];</span>
<span class="lineNum">     684 </span><span class="lineNoCov">          0 :         gcd[0].gd.pos.x = 5; gcd[0].gd.pos.y = 5;</span>
<span class="lineNum">     685 </span><span class="lineNoCov">          0 :         gcd[0].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     686 </span><span class="lineNoCov">          0 :         gcd[0].creator = GLabelCreate;</span>
<span class="lineNum">     687 </span><span class="lineNoCov">          0 :         varray[0] = &amp;gcd[0]; varray[1] = NULL;</span>
<span class="lineNum">     688 </span>            : 
<span class="lineNum">     689 </span><span class="lineNoCov">          0 :         sprintf( scalebuf, _(&quot;Scaled by:    (%.2f,%.2f)&quot;), (double) img-&gt;xscale, (double) img-&gt;yscale );</span>
<span class="lineNum">     690 </span><span class="lineNoCov">          0 :         label[1].text = (unichar_t *) scalebuf;</span>
<span class="lineNum">     691 </span><span class="lineNoCov">          0 :         label[1].text_is_1byte = true;</span>
<span class="lineNum">     692 </span><span class="lineNoCov">          0 :         gcd[1].gd.label = &amp;label[1];</span>
<span class="lineNum">     693 </span><span class="lineNoCov">          0 :         gcd[1].gd.pos.x = 5; gcd[1].gd.pos.y = 19;</span>
<span class="lineNum">     694 </span><span class="lineNoCov">          0 :         gcd[1].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     695 </span><span class="lineNoCov">          0 :         gcd[1].creator = GLabelCreate;</span>
<span class="lineNum">     696 </span><span class="lineNoCov">          0 :         varray[2] = &amp;gcd[1]; varray[3] = NULL;</span>
<span class="lineNum">     697 </span>            : 
<span class="lineNum">     698 </span><span class="lineNoCov">          0 :         sprintf( sizebuf, _(&quot;Image Size:  %d x %d  pixels&quot;), (int) base-&gt;width, (int) base-&gt;height );</span>
<span class="lineNum">     699 </span><span class="lineNoCov">          0 :         label[2].text = (unichar_t *) sizebuf;</span>
<span class="lineNum">     700 </span><span class="lineNoCov">          0 :         label[2].text_is_1byte = true;</span>
<span class="lineNum">     701 </span><span class="lineNoCov">          0 :         gcd[2].gd.label = &amp;label[2];</span>
<span class="lineNum">     702 </span><span class="lineNoCov">          0 :         gcd[2].gd.pos.x = 5; gcd[2].gd.pos.y = 19;</span>
<span class="lineNum">     703 </span><span class="lineNoCov">          0 :         gcd[2].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     704 </span><span class="lineNoCov">          0 :         gcd[2].creator = GLabelCreate;</span>
<span class="lineNum">     705 </span><span class="lineNoCov">          0 :         varray[4] = &amp;gcd[2]; varray[5] = NULL;</span>
<span class="lineNum">     706 </span><span class="lineNoCov">          0 :         varray[6] = GCD_Glue; varray[7] = NULL;</span>
<span class="lineNum">     707 </span>            : 
<span class="lineNum">     708 </span><span class="lineNoCov">          0 :         gcd[3].gd.pos.x = (II_Width-GIntGetResource(_NUM_Buttonsize)*100/GIntGetResource(_NUM_ScaleFactor)-6)/2; gcd[3].gd.pos.y = II_Height-32-3;</span>
<span class="lineNum">     709 </span><span class="lineNoCov">          0 :         gcd[3].gd.pos.width = -1; gcd[3].gd.pos.height = 0;</span>
<span class="lineNum">     710 </span><span class="lineNoCov">          0 :         gcd[3].gd.flags = gg_visible | gg_enabled | gg_but_default | gg_but_cancel;</span>
<span class="lineNum">     711 </span><span class="lineNoCov">          0 :         label[3].text = (unichar_t *) _(&quot;_OK&quot;);</span>
<span class="lineNum">     712 </span><span class="lineNoCov">          0 :         label[3].text_is_1byte = true;</span>
<span class="lineNum">     713 </span><span class="lineNoCov">          0 :         label[3].text_in_resource = true;</span>
<span class="lineNum">     714 </span><span class="lineNoCov">          0 :         gcd[3].gd.mnemonic = 'O';</span>
<span class="lineNum">     715 </span><span class="lineNoCov">          0 :         gcd[3].gd.label = &amp;label[3];</span>
<span class="lineNum">     716 </span><span class="lineNoCov">          0 :         gcd[3].gd.handle_controlevent = GI_Cancel;</span>
<span class="lineNum">     717 </span><span class="lineNoCov">          0 :         gcd[3].creator = GButtonCreate;</span>
<span class="lineNum">     718 </span><span class="lineNoCov">          0 :         harray[0] = GCD_Glue; harray[1] = &amp;gcd[3]; harray[2] = GCD_Glue; harray[3] = NULL;</span>
<span class="lineNum">     719 </span><span class="lineNoCov">          0 :         varray[8] = &amp;boxes[2]; varray[9] = NULL;</span>
<span class="lineNum">     720 </span><span class="lineNoCov">          0 :         varray[10] = NULL;</span>
<span class="lineNum">     721 </span>            : 
<span class="lineNum">     722 </span><span class="lineNoCov">          0 :         memset(boxes,0,sizeof(boxes));</span>
<span class="lineNum">     723 </span><span class="lineNoCov">          0 :         boxes[0].gd.pos.x = boxes[0].gd.pos.y = 2;</span>
<span class="lineNum">     724 </span><span class="lineNoCov">          0 :         boxes[0].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     725 </span><span class="lineNoCov">          0 :         boxes[0].gd.u.boxelements = varray;</span>
<span class="lineNum">     726 </span><span class="lineNoCov">          0 :         boxes[0].creator = GHVGroupCreate;</span>
<span class="lineNum">     727 </span>            : 
<span class="lineNum">     728 </span><span class="lineNoCov">          0 :         boxes[2].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">     729 </span><span class="lineNoCov">          0 :         boxes[2].gd.u.boxelements = harray;</span>
<span class="lineNum">     730 </span><span class="lineNoCov">          0 :         boxes[2].creator = GHBoxCreate;</span>
<span class="lineNum">     731 </span>            : 
<span class="lineNum">     732 </span><span class="lineNoCov">          0 :         GGadgetsCreate(gi.gw,boxes);</span>
<span class="lineNum">     733 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableRow(boxes[0].ret,gb_expandglue);</span>
<span class="lineNum">     734 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(boxes[2].ret,gb_expandglue);</span>
<span class="lineNum">     735 </span><span class="lineNoCov">          0 :         GHVBoxFitWindow(boxes[0].ret);</span>
<span class="lineNum">     736 </span>            : 
<span class="lineNum">     737 </span><span class="lineNoCov">          0 :     GWidgetHidePalettes();</span>
<span class="lineNum">     738 </span><span class="lineNoCov">          0 :     GDrawSetVisible(gi.gw,true);</span>
<span class="lineNum">     739 </span><span class="lineNoCov">          0 :     while ( !gi.done )</span>
<span class="lineNum">     740 </span><span class="lineNoCov">          0 :         GDrawProcessOneEvent(NULL);</span>
<span class="lineNum">     741 </span><span class="lineNoCov">          0 :     GDrawDestroyWindow(gi.gw);</span>
<a name="742"><span class="lineNum">     742 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     743 </span>            : 
<span class="lineNum">     744 </span><span class="lineNoCov">          0 : static AnchorClass *_AnchorClassUnused(SplineChar *sc,int *waslig, int classmatch) {</span>
<span class="lineNum">     745 </span>            :     AnchorClass *an, *maybe;
<span class="lineNum">     746 </span>            :     int val, maybelig;
<span class="lineNum">     747 </span>            :     SplineFont *sf;
<span class="lineNum">     748 </span>            :     int ismarkglyph, isligatureglyph;
<span class="lineNum">     749 </span>            :     PST *pst;
<span class="lineNum">     750 </span>            :     /* Are there any anchors with this name? If so can't reuse it */
<span class="lineNum">     751 </span>            :     /*  unless they are ligature anchors */
<span class="lineNum">     752 </span>            :     /*  or 'curs' anchors, which allow exactly two points (entry, exit) */
<span class="lineNum">     753 </span>            :     /*  or 'mkmk' anchors, which allow a mark to be both a base and an attach */
<span class="lineNum">     754 </span>            : 
<span class="lineNum">     755 </span><span class="lineNoCov">          0 :     ismarkglyph = (sc-&gt;width==0) || sc-&gt;glyph_class==(3+1) ||</span>
<span class="lineNum">     756 </span><span class="lineNoCov">          0 :             ( sc-&gt;unicodeenc!=-1 &amp;&amp; sc-&gt;unicodeenc&lt;0x10000 &amp;&amp; iscombining(sc-&gt;unicodeenc)) ||</span>
<span class="lineNum">     757 </span><span class="lineNoCov">          0 :             ( sc-&gt;anchor!=NULL &amp;&amp; (sc-&gt;anchor-&gt;type == at_mark || sc-&gt;anchor-&gt;type == at_basemark));</span>
<span class="lineNum">     758 </span><span class="lineNoCov">          0 :     for ( pst = sc-&gt;possub; pst!=NULL &amp;&amp; pst-&gt;type!=pst_ligature; pst=pst-&gt;next );</span>
<span class="lineNum">     759 </span><span class="lineNoCov">          0 :     isligatureglyph = (pst!=NULL) || sc-&gt;glyph_class==2+1;</span>
<span class="lineNum">     760 </span>            : 
<span class="lineNum">     761 </span><span class="lineNoCov">          0 :     *waslig = false; maybelig = false; maybe = NULL;</span>
<span class="lineNum">     762 </span><span class="lineNoCov">          0 :     sf = sc-&gt;parent;</span>
<span class="lineNum">     763 </span><span class="lineNoCov">          0 :     if ( sf-&gt;cidmaster!=NULL ) sf = sf-&gt;cidmaster;</span>
<span class="lineNum">     764 </span><span class="lineNoCov">          0 :     for ( an=sf-&gt;anchor; an!=NULL; an=an-&gt;next ) {</span>
<span class="lineNum">     765 </span><span class="lineNoCov">          0 :         if ( classmatch ) {</span>
<span class="lineNum">     766 </span><span class="lineNoCov">          0 :             if (( an-&gt;type == act_mklg &amp;&amp; !isligatureglyph &amp;&amp; !ismarkglyph ) ||</span>
<span class="lineNum">     767 </span><span class="lineNoCov">          0 :                     ( an-&gt;type == act_mkmk &amp;&amp; !ismarkglyph ))</span>
<span class="lineNum">     768 </span><span class="lineNoCov">          0 :     continue;</span>
<span class="lineNum">     769 </span>            :         }
<span class="lineNum">     770 </span><span class="lineNoCov">          0 :         val = IsAnchorClassUsed(sc,an);</span>
<span class="lineNum">     771 </span><span class="lineNoCov">          0 :         if ( val&gt;=0 ) {</span>
<span class="lineNum">     772 </span><span class="lineNoCov">          0 :             *waslig = val;</span>
<span class="lineNum">     773 </span><span class="lineNoCov">          0 : return( an );</span>
<span class="lineNum">     774 </span><span class="lineNoCov">          0 :         } else if ( val!=-1 &amp;&amp; maybe==NULL ) {</span>
<span class="lineNum">     775 </span><span class="lineNoCov">          0 :             maybe = an;</span>
<span class="lineNum">     776 </span><span class="lineNoCov">          0 :             maybelig = val;</span>
<span class="lineNum">     777 </span>            :         }
<span class="lineNum">     778 </span>            :     }
<span class="lineNum">     779 </span><span class="lineNoCov">          0 :     *waslig = maybelig;</span>
<span class="lineNum">     780 </span><span class="lineNoCov">          0 : return( maybe );</span>
<a name="781"><span class="lineNum">     781 </span>            : }</a>
<span class="lineNum">     782 </span>            : 
<span class="lineNum">     783 </span><span class="lineNoCov">          0 : AnchorClass *AnchorClassUnused(SplineChar *sc,int *waslig) {</span>
<span class="lineNum">     784 </span><span class="lineNoCov">          0 : return( _AnchorClassUnused(sc,waslig,false));</span>
<a name="785"><span class="lineNum">     785 </span>            : }</a>
<span class="lineNum">     786 </span>            : 
<span class="lineNum">     787 </span><span class="lineNoCov">          0 : static AnchorPoint *AnchorPointNew(CharView *cv) {</span>
<span class="lineNum">     788 </span>            :     AnchorClass *an;
<span class="lineNum">     789 </span>            :     AnchorPoint *ap;
<span class="lineNum">     790 </span>            :     int waslig;
<span class="lineNum">     791 </span><span class="lineNoCov">          0 :     SplineChar *sc = cv-&gt;b.sc;</span>
<span class="lineNum">     792 </span>            :     PST *pst;
<span class="lineNum">     793 </span>            : 
<span class="lineNum">     794 </span><span class="lineNoCov">          0 :     an = _AnchorClassUnused(sc,&amp;waslig,true);</span>
<span class="lineNum">     795 </span><span class="lineNoCov">          0 :     if ( an==NULL )</span>
<span class="lineNum">     796 </span><span class="lineNoCov">          0 :         an = AnchorClassUnused(sc,&amp;waslig);</span>
<span class="lineNum">     797 </span>            : 
<span class="lineNum">     798 </span><span class="lineNoCov">          0 :     if ( an==NULL )</span>
<span class="lineNum">     799 </span><span class="lineNoCov">          0 : return(NULL);</span>
<span class="lineNum">     800 </span><span class="lineNoCov">          0 :     ap = chunkalloc(sizeof(AnchorPoint));</span>
<span class="lineNum">     801 </span><span class="lineNoCov">          0 :     ap-&gt;anchor = an;</span>
<span class="lineNum">     802 </span><span class="lineNoCov">          0 :     ap-&gt;me.x = cv-&gt;p.cx; /* cv-&gt;p.cx = 0; */</span>
<span class="lineNum">     803 </span><span class="lineNoCov">          0 :     ap-&gt;me.y = cv-&gt;p.cy; /* cv-&gt;p.cy = 0; */</span>
<span class="lineNum">     804 </span><span class="lineNoCov">          0 :     ap-&gt;type = an-&gt;type==act_mark ? at_basechar :</span>
<span class="lineNum">     805 </span><span class="lineNoCov">          0 :                 an-&gt;type==act_mkmk ? at_basemark :</span>
<span class="lineNum">     806 </span><span class="lineNoCov">          0 :                 an-&gt;type==act_mklg ? at_baselig :</span>
<span class="lineNum">     807 </span><span class="lineNoCov">          0 :                 an-&gt;type==act_curs ? at_centry :</span>
<span class="lineNum">     808 </span>            :                                      at_basechar;
<span class="lineNum">     809 </span><span class="lineNoCov">          0 :     for ( pst = cv-&gt;b.sc-&gt;possub; pst!=NULL &amp;&amp; pst-&gt;type!=pst_ligature; pst=pst-&gt;next );</span>
<span class="lineNum">     810 </span><span class="lineNoCov">          0 :     if ( waslig&lt;-1 &amp;&amp; an-&gt;type==act_mkmk ) {</span>
<span class="lineNum">     811 </span><span class="lineNoCov">          0 :         ap-&gt;type = waslig==-2 ? at_basemark : at_mark;</span>
<span class="lineNum">     812 </span><span class="lineNoCov">          0 :     } else if ( waslig==-2  &amp;&amp; an-&gt;type==act_curs )</span>
<span class="lineNum">     813 </span><span class="lineNoCov">          0 :         ap-&gt;type = at_cexit;</span>
<span class="lineNum">     814 </span><span class="lineNoCov">          0 :     else if ( waslig==-3 || an-&gt;type==act_curs )</span>
<span class="lineNum">     815 </span><span class="lineNoCov">          0 :         ap-&gt;type = at_centry;</span>
<span class="lineNum">     816 </span><span class="lineNoCov">          0 :     else if (( sc-&gt;unicodeenc!=-1 &amp;&amp; sc-&gt;unicodeenc&lt;0x10000 &amp;&amp;</span>
<span class="lineNum">     817 </span><span class="lineNoCov">          0 :             iscombining(sc-&gt;unicodeenc)) || sc-&gt;width==0 || sc-&gt;glyph_class==(3+1) /* mark class+1 */)</span>
<span class="lineNum">     818 </span><span class="lineNoCov">          0 :         ap-&gt;type = at_mark;</span>
<span class="lineNum">     819 </span><span class="lineNoCov">          0 :     else if ( an-&gt;type==act_mkmk )</span>
<span class="lineNum">     820 </span><span class="lineNoCov">          0 :         ap-&gt;type = at_basemark;</span>
<span class="lineNum">     821 </span><span class="lineNoCov">          0 :     else if (( pst!=NULL || waslig || sc-&gt;glyph_class==2+1) &amp;&amp; an-&gt;type==act_mklg )</span>
<span class="lineNum">     822 </span><span class="lineNoCov">          0 :         ap-&gt;type = at_baselig;</span>
<span class="lineNum">     823 </span><span class="lineNoCov">          0 :     if (( ap-&gt;type==at_basechar || ap-&gt;type==at_baselig ) &amp;&amp; an-&gt;type==act_mkmk )</span>
<span class="lineNum">     824 </span><span class="lineNoCov">          0 :         ap-&gt;type = at_basemark;</span>
<span class="lineNum">     825 </span><span class="lineNoCov">          0 :     ap-&gt;next = sc-&gt;anchor;</span>
<span class="lineNum">     826 </span><span class="lineNoCov">          0 :     if ( waslig&gt;=0 )</span>
<span class="lineNum">     827 </span><span class="lineNoCov">          0 :         ap-&gt;lig_index = waslig;</span>
<span class="lineNum">     828 </span><span class="lineNoCov">          0 :     sc-&gt;anchor = ap;</span>
<span class="lineNum">     829 </span><span class="lineNoCov">          0 : return( ap );</span>
<a name="830"><span class="lineNum">     830 </span>            : }</a>
<span class="lineNum">     831 </span>            : 
<span class="lineNum">     832 </span><span class="lineNoCov">          0 : static void AI_SelectList(GIData *ci,AnchorPoint *ap) {</span>
<span class="lineNum">     833 </span>            :     int i;
<span class="lineNum">     834 </span>            :     AnchorClass *an;
<span class="lineNum">     835 </span><span class="lineNoCov">          0 :     SplineFont *sf = ci-&gt;sc-&gt;parent;</span>
<span class="lineNum">     836 </span>            : 
<span class="lineNum">     837 </span><span class="lineNoCov">          0 :     if ( sf-&gt;cidmaster ) sf = sf-&gt;cidmaster;</span>
<span class="lineNum">     838 </span>            : 
<span class="lineNum">     839 </span><span class="lineNoCov">          0 :     for ( i=0, an=sf-&gt;anchor; an!=ap-&gt;anchor; ++i, an=an-&gt;next );</span>
<span class="lineNum">     840 </span><span class="lineNoCov">          0 :     GGadgetSelectOneListItem(GWidgetGetControl(ci-&gt;gw,CID_NameList),i);</span>
<a name="841"><span class="lineNum">     841 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     842 </span>            : 
<span class="lineNum">     843 </span><span class="lineNoCov">          0 : static void AI_DisplayClass(GIData *ci,AnchorPoint *ap) {</span>
<span class="lineNum">     844 </span><span class="lineNoCov">          0 :     AnchorClass *ac = ap-&gt;anchor;</span>
<span class="lineNum">     845 </span>            :     AnchorPoint *aps;
<span class="lineNum">     846 </span>            :     int saw[at_max];
<span class="lineNum">     847 </span>            : 
<span class="lineNum">     848 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_BaseChar),ac-&gt;type==act_mark || ac-&gt;type==act_unknown);</span>
<span class="lineNum">     849 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_BaseLig),ac-&gt;type==act_mklg);</span>
<span class="lineNum">     850 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_BaseMark),ac-&gt;type==act_mkmk);</span>
<span class="lineNum">     851 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_CursEntry),ac-&gt;type==act_curs);</span>
<span class="lineNum">     852 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_CursExit),ac-&gt;type==act_curs);</span>
<span class="lineNum">     853 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_Mark),ac-&gt;type!=act_curs);</span>
<span class="lineNum">     854 </span>            : 
<span class="lineNum">     855 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_LigIndex),ap-&gt;type==at_baselig);</span>
<span class="lineNum">     856 </span>            : 
<span class="lineNum">     857 </span><span class="lineNoCov">          0 :     if ( ac-&gt;type==act_mkmk &amp;&amp; (ap-&gt;type==at_basechar || ap-&gt;type==at_baselig)) {</span>
<span class="lineNum">     858 </span><span class="lineNoCov">          0 :         GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_BaseMark),true);</span>
<span class="lineNum">     859 </span><span class="lineNoCov">          0 :         ap-&gt;type = at_basemark;</span>
<span class="lineNum">     860 </span><span class="lineNoCov">          0 :     } else if ( ac-&gt;type==act_mark &amp;&amp; ap-&gt;type==at_basemark ) {</span>
<span class="lineNum">     861 </span><span class="lineNoCov">          0 :         GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_BaseChar),true);</span>
<span class="lineNum">     862 </span><span class="lineNoCov">          0 :         ap-&gt;type = at_basechar;</span>
<span class="lineNum">     863 </span><span class="lineNoCov">          0 :     } else if ( ac-&gt;type==act_curs &amp;&amp; ap-&gt;type!=at_centry &amp;&amp; ap-&gt;type!=at_cexit ) {</span>
<span class="lineNum">     864 </span><span class="lineNoCov">          0 :         GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_CursEntry),true);</span>
<span class="lineNum">     865 </span><span class="lineNoCov">          0 :         ap-&gt;type = at_centry;</span>
<span class="lineNum">     866 </span>            :     }
<span class="lineNum">     867 </span>            : 
<span class="lineNum">     868 </span><span class="lineNoCov">          0 :     memset(saw,0,sizeof(saw));</span>
<span class="lineNum">     869 </span><span class="lineNoCov">          0 :     for ( aps=ci-&gt;sc-&gt;anchor; aps!=NULL; aps=aps-&gt;next ) if ( aps!=ap ) {</span>
<span class="lineNum">     870 </span><span class="lineNoCov">          0 :         if ( aps-&gt;anchor==ac ) saw[aps-&gt;type] = true;</span>
<span class="lineNum">     871 </span>            :     }
<span class="lineNum">     872 </span><span class="lineNoCov">          0 :     if ( ac-&gt;type==act_curs ) {</span>
<span class="lineNum">     873 </span><span class="lineNoCov">          0 :         GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_CursEntry),!saw[at_centry]);</span>
<span class="lineNum">     874 </span><span class="lineNoCov">          0 :         GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_CursExit),!saw[at_cexit]);</span>
<span class="lineNum">     875 </span>            :     } else {
<span class="lineNum">     876 </span><span class="lineNoCov">          0 :         GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_Mark),!saw[at_mark]);</span>
<span class="lineNum">     877 </span><span class="lineNoCov">          0 :         if ( saw[at_basechar]) GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_BaseChar),false);</span>
<span class="lineNum">     878 </span><span class="lineNoCov">          0 :         if ( saw[at_basemark]) GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_BaseMark),false);</span>
<span class="lineNum">     879 </span>            :     }
<a name="880"><span class="lineNum">     880 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     881 </span>            : 
<span class="lineNum">     882 </span><span class="lineNoCov">          0 : static void AI_DisplayIndex(GIData *ci,AnchorPoint *ap) {</span>
<span class="lineNum">     883 </span>            :     char buffer[12];
<span class="lineNum">     884 </span>            : 
<span class="lineNum">     885 </span><span class="lineNoCov">          0 :     sprintf(buffer,&quot;%d&quot;, ap-&gt;lig_index );</span>
<span class="lineNum">     886 </span>            : 
<span class="lineNum">     887 </span><span class="lineNoCov">          0 :     GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_LigIndex),buffer);</span>
<a name="888"><span class="lineNum">     888 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     889 </span>            : 
<span class="lineNum">     890 </span><span class="lineNoCov">          0 : static void AI_DisplayRadio(GIData *ci,enum anchor_type type) {</span>
<span class="lineNum">     891 </span><span class="lineNoCov">          0 :     switch ( type ) {</span>
<span class="lineNum">     892 </span>            :       case at_mark:
<span class="lineNum">     893 </span><span class="lineNoCov">          0 :         GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_Mark),true);</span>
<span class="lineNum">     894 </span><span class="lineNoCov">          0 :       break;</span>
<span class="lineNum">     895 </span>            :       case at_basechar:
<span class="lineNum">     896 </span><span class="lineNoCov">          0 :         GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_BaseChar),true);</span>
<span class="lineNum">     897 </span><span class="lineNoCov">          0 :       break;</span>
<span class="lineNum">     898 </span>            :       case at_baselig:
<span class="lineNum">     899 </span><span class="lineNoCov">          0 :         GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_BaseLig),true);</span>
<span class="lineNum">     900 </span><span class="lineNoCov">          0 :       break;</span>
<span class="lineNum">     901 </span>            :       case at_basemark:
<span class="lineNum">     902 </span><span class="lineNoCov">          0 :         GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_BaseMark),true);</span>
<span class="lineNum">     903 </span><span class="lineNoCov">          0 :       break;</span>
<span class="lineNum">     904 </span>            :       case at_centry:
<span class="lineNum">     905 </span><span class="lineNoCov">          0 :         GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_CursEntry),true);</span>
<span class="lineNum">     906 </span><span class="lineNoCov">          0 :       break;</span>
<span class="lineNum">     907 </span>            :       case at_cexit:
<span class="lineNum">     908 </span><span class="lineNoCov">          0 :         GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_CursExit),true);</span>
<span class="lineNum">     909 </span><span class="lineNoCov">          0 :       break;</span>
<span class="lineNum">     910 </span>            :     }
<a name="911"><span class="lineNum">     911 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     912 </span>            : 
<span class="lineNum">     913 </span><span class="lineNoCov">          0 : static void AI_Display(GIData *ci,AnchorPoint *ap) {</span>
<span class="lineNum">     914 </span>            :     char val[40];
<span class="lineNum">     915 </span>            :     unichar_t uval[40];
<span class="lineNum">     916 </span>            :     AnchorPoint *aps;
<span class="lineNum">     917 </span>            : 
<span class="lineNum">     918 </span><span class="lineNoCov">          0 :     if ( ap==NULL) {</span>
<span class="lineNum">     919 </span><span class="lineNoCov">          0 :         SCUpdateAll(ci-&gt;sc);</span>
<span class="lineNum">     920 </span><span class="lineNoCov">          0 : return;</span>
<span class="lineNum">     921 </span>            :     }
<span class="lineNum">     922 </span>            : 
<span class="lineNum">     923 </span><span class="lineNoCov">          0 :     ci-&gt;ap = ap;</span>
<span class="lineNum">     924 </span><span class="lineNoCov">          0 :     for ( aps=ci-&gt;sc-&gt;anchor; aps!=NULL; aps=aps-&gt;next )</span>
<span class="lineNum">     925 </span><span class="lineNoCov">          0 :         aps-&gt;selected = false;</span>
<span class="lineNum">     926 </span><span class="lineNoCov">          0 :     ap-&gt;selected = true;</span>
<span class="lineNum">     927 </span><span class="lineNoCov">          0 :     sprintf(val,&quot;%g&quot;,(double) ap-&gt;me.x);</span>
<span class="lineNum">     928 </span><span class="lineNoCov">          0 :     uc_strcpy(uval,val);</span>
<span class="lineNum">     929 </span><span class="lineNoCov">          0 :     GGadgetSetTitle(GWidgetGetControl(ci-&gt;gw,CID_X),uval);</span>
<span class="lineNum">     930 </span><span class="lineNoCov">          0 :     sprintf(val,&quot;%g&quot;,(double) ap-&gt;me.y);</span>
<span class="lineNum">     931 </span><span class="lineNoCov">          0 :     uc_strcpy(uval,val);</span>
<span class="lineNum">     932 </span><span class="lineNoCov">          0 :     GGadgetSetTitle(GWidgetGetControl(ci-&gt;gw,CID_Y),uval);</span>
<span class="lineNum">     933 </span><span class="lineNoCov">          0 :     sprintf(val,&quot;%d&quot;,ap-&gt;type==at_baselig?ap-&gt;lig_index:0);</span>
<span class="lineNum">     934 </span><span class="lineNoCov">          0 :     uc_strcpy(uval,val);</span>
<span class="lineNum">     935 </span><span class="lineNoCov">          0 :     GGadgetSetTitle(GWidgetGetControl(ci-&gt;gw,CID_LigIndex),uval);</span>
<span class="lineNum">     936 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_LigIndex),ap-&gt;type==at_baselig);</span>
<span class="lineNum">     937 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_Next),ap-&gt;next!=NULL);</span>
<span class="lineNum">     938 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_Prev),ci-&gt;sc-&gt;anchor!=ap);</span>
<span class="lineNum">     939 </span><span class="lineNoCov">          0 :     if ( ap-&gt;has_ttf_pt )</span>
<span class="lineNum">     940 </span><span class="lineNoCov">          0 :         sprintf(val,&quot;%d&quot;,ap-&gt;ttf_pt_index);</span>
<span class="lineNum">     941 </span>            :     else
<span class="lineNum">     942 </span><span class="lineNoCov">          0 :         val[0] = '\0';</span>
<span class="lineNum">     943 </span><span class="lineNoCov">          0 :     GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_MatchPt),val);</span>
<span class="lineNum">     944 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_X),!ap-&gt;has_ttf_pt);</span>
<span class="lineNum">     945 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_Y),!ap-&gt;has_ttf_pt);</span>
<span class="lineNum">     946 </span>            : 
<span class="lineNum">     947 </span><span class="lineNoCov">          0 :     AI_DisplayClass(ci,ap);</span>
<span class="lineNum">     948 </span><span class="lineNoCov">          0 :     AI_DisplayRadio(ci,ap-&gt;type);</span>
<span class="lineNum">     949 </span>            : 
<span class="lineNum">     950 </span><span class="lineNoCov">          0 :     AI_SelectList(ci,ap);</span>
<span class="lineNum">     951 </span><span class="lineNoCov">          0 :     SCUpdateAll(ci-&gt;sc);</span>
<a name="952"><span class="lineNum">     952 </span>            : }</a>
<span class="lineNum">     953 </span>            : 
<span class="lineNum">     954 </span><span class="lineNoCov">          0 : static int AI_Next(GGadget *g, GEvent *e) {</span>
<span class="lineNum">     955 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_buttonactivate ) {</span>
<span class="lineNum">     956 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">     957 </span>            : 
<span class="lineNum">     958 </span><span class="lineNoCov">          0 :         if ( ci-&gt;ap-&gt;next==NULL )</span>
<span class="lineNum">     959 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">     960 </span><span class="lineNoCov">          0 :         AI_Display(ci,ci-&gt;ap-&gt;next);</span>
<span class="lineNum">     961 </span>            :     }
<span class="lineNum">     962 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="963"><span class="lineNum">     963 </span>            : }</a>
<span class="lineNum">     964 </span>            : 
<span class="lineNum">     965 </span><span class="lineNoCov">          0 : static int AI_Prev(GGadget *g, GEvent *e) {</span>
<span class="lineNum">     966 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_buttonactivate ) {</span>
<span class="lineNum">     967 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">     968 </span>            :         AnchorPoint *ap, *prev;
<span class="lineNum">     969 </span>            : 
<span class="lineNum">     970 </span><span class="lineNoCov">          0 :         prev = NULL;</span>
<span class="lineNum">     971 </span><span class="lineNoCov">          0 :         for ( ap=ci-&gt;sc-&gt;anchor; ap!=ci-&gt;ap; ap = ap-&gt;next )</span>
<span class="lineNum">     972 </span><span class="lineNoCov">          0 :             prev = ap;</span>
<span class="lineNum">     973 </span><span class="lineNoCov">          0 :         if ( prev==NULL )</span>
<span class="lineNum">     974 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">     975 </span><span class="lineNoCov">          0 :         AI_Display(ci,prev);</span>
<span class="lineNum">     976 </span>            :     }
<span class="lineNum">     977 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">     978 </span>            : }
<a name="979"><span class="lineNum">     979 </span>            : </a>
<span class="lineNum">     980 </span>            : static int AI_Ok(GGadget *g, GEvent *e);
<span class="lineNum">     981 </span><span class="lineNoCov">          0 : static int AI_Delete(GGadget *g, GEvent *e) {</span>
<span class="lineNum">     982 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_buttonactivate ) {</span>
<span class="lineNum">     983 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">     984 </span>            :         AnchorPoint *ap, *prev, *delete_it;
<span class="lineNum">     985 </span>            : 
<span class="lineNum">     986 </span><span class="lineNoCov">          0 :         prev=NULL;</span>
<span class="lineNum">     987 </span><span class="lineNoCov">          0 :         for ( ap=ci-&gt;sc-&gt;anchor; ap!=ci-&gt;ap; ap=ap-&gt;next )</span>
<span class="lineNum">     988 </span><span class="lineNoCov">          0 :             prev = ap;</span>
<span class="lineNum">     989 </span><span class="lineNoCov">          0 :         if ( prev==NULL &amp;&amp; ci-&gt;ap-&gt;next==NULL ) {</span>
<span class="lineNum">     990 </span>            :             static char *buts[3];
<span class="lineNum">     991 </span><span class="lineNoCov">          0 :             buts[0] = _(&quot;_Yes&quot;); buts[1] = _(&quot;_No&quot;); buts[2] = NULL;</span>
<span class="lineNum">     992 </span><span class="lineNoCov">          0 :             if ( gwwv_ask(_(&quot;Last Anchor Point&quot;),(const char **) buts,0,1, _(&quot;You are deleting the last anchor point in this character.\nDoing so will cause this dialog to close, is that what you want?&quot;))==1 ) {</span>
<span class="lineNum">     993 </span><span class="lineNoCov">          0 :                 AI_Ok(g,e);</span>
<span class="lineNum">     994 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">     995 </span>            :             }
<span class="lineNum">     996 </span>            :         }
<span class="lineNum">     997 </span>            : 
<span class="lineNum">     998 </span><span class="lineNoCov">          0 :         delete_it = ci-&gt;ap;</span>
<span class="lineNum">     999 </span>            : 
<span class="lineNum">    1000 </span><span class="lineNoCov">          0 :         if ((prev == NULL) &amp;&amp; (ci-&gt;ap-&gt;next == NULL)) {</span>
<span class="lineNum">    1001 </span><span class="lineNoCov">          0 :             ci-&gt;sc-&gt;anchor = NULL;</span>
<span class="lineNum">    1002 </span><span class="lineNoCov">          0 :             AnchorPointsFree(delete_it);</span>
<span class="lineNum">    1003 </span><span class="lineNoCov">          0 :             AI_Ok(g,e);</span>
<span class="lineNum">    1004 </span><span class="lineNoCov">          0 :             SCUpdateAll(ci-&gt;sc);</span>
<span class="lineNum">    1005 </span>            :         }
<span class="lineNum">    1006 </span><span class="lineNoCov">          0 :         else if (ci-&gt;ap-&gt;next == NULL) {</span>
<span class="lineNum">    1007 </span><span class="lineNoCov">          0 :             prev-&gt;next = NULL;</span>
<span class="lineNum">    1008 </span><span class="lineNoCov">          0 :             AnchorPointsFree(delete_it);</span>
<span class="lineNum">    1009 </span><span class="lineNoCov">          0 :             AI_Display(ci,prev);</span>
<span class="lineNum">    1010 </span>            :         }
<span class="lineNum">    1011 </span><span class="lineNoCov">          0 :         else if (prev == NULL) {</span>
<span class="lineNum">    1012 </span><span class="lineNoCov">          0 :             ci-&gt;sc-&gt;anchor = delete_it-&gt;next;</span>
<span class="lineNum">    1013 </span><span class="lineNoCov">          0 :             delete_it-&gt;next = NULL;</span>
<span class="lineNum">    1014 </span><span class="lineNoCov">          0 :             AnchorPointsFree(delete_it);</span>
<span class="lineNum">    1015 </span><span class="lineNoCov">          0 :             AI_Display(ci,ci-&gt;sc-&gt;anchor);</span>
<span class="lineNum">    1016 </span>            :         }
<span class="lineNum">    1017 </span>            :         else {
<span class="lineNum">    1018 </span><span class="lineNoCov">          0 :             prev-&gt;next = delete_it-&gt;next;</span>
<span class="lineNum">    1019 </span><span class="lineNoCov">          0 :             delete_it-&gt;next = NULL;</span>
<span class="lineNum">    1020 </span><span class="lineNoCov">          0 :             AnchorPointsFree(delete_it);</span>
<span class="lineNum">    1021 </span><span class="lineNoCov">          0 :             AI_Display(ci,prev-&gt;next);</span>
<span class="lineNum">    1022 </span>            :         }
<span class="lineNum">    1023 </span>            : 
<span class="lineNum">    1024 </span><span class="lineNoCov">          0 :         _CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b,2);</span>
<span class="lineNum">    1025 </span>            :     }
<span class="lineNum">    1026 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="1027"><span class="lineNum">    1027 </span>            : }</a>
<span class="lineNum">    1028 </span>            : 
<span class="lineNum">    1029 </span><span class="lineNoCov">          0 : static GTextInfo **AnchorClassesLList(SplineFont *sf) {</span>
<span class="lineNum">    1030 </span>            :     AnchorClass *an;
<span class="lineNum">    1031 </span>            :     int cnt;
<span class="lineNum">    1032 </span>            :     GTextInfo **ti;
<span class="lineNum">    1033 </span>            : 
<span class="lineNum">    1034 </span><span class="lineNoCov">          0 :     if ( sf-&gt;cidmaster ) sf=sf-&gt;cidmaster;</span>
<span class="lineNum">    1035 </span>            : 
<span class="lineNum">    1036 </span><span class="lineNoCov">          0 :     for ( cnt=0, an=sf-&gt;anchor; an!=NULL; ++cnt, an=an-&gt;next );</span>
<span class="lineNum">    1037 </span><span class="lineNoCov">          0 :     ti = calloc(cnt+1,sizeof(GTextInfo*));</span>
<span class="lineNum">    1038 </span><span class="lineNoCov">          0 :     for ( cnt=0, an=sf-&gt;anchor; an!=NULL; ++cnt, an=an-&gt;next ) {</span>
<span class="lineNum">    1039 </span><span class="lineNoCov">          0 :         ti[cnt] = calloc(1,sizeof(GTextInfo));</span>
<span class="lineNum">    1040 </span><span class="lineNoCov">          0 :         ti[cnt]-&gt;text = utf82u_copy(an-&gt;name);</span>
<span class="lineNum">    1041 </span><span class="lineNoCov">          0 :         ti[cnt]-&gt;fg = ti[cnt]-&gt;bg = COLOR_DEFAULT;</span>
<span class="lineNum">    1042 </span><span class="lineNoCov">          0 :         ti[cnt]-&gt;userdata = an;</span>
<span class="lineNum">    1043 </span>            :     }
<span class="lineNum">    1044 </span><span class="lineNoCov">          0 :     ti[cnt] = calloc(1,sizeof(GTextInfo));</span>
<span class="lineNum">    1045 </span><span class="lineNoCov">          0 : return( ti );</span>
<a name="1046"><span class="lineNum">    1046 </span>            : }</a>
<span class="lineNum">    1047 </span>            : 
<span class="lineNum">    1048 </span><span class="lineNoCov">          0 : static int AI_NewClass(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    1049 </span><span class="lineNoCov">          0 :     GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    1050 </span><span class="lineNoCov">          0 :     SplineFont *sf = ci-&gt;sc-&gt;parent;</span>
<span class="lineNum">    1051 </span>            :     AnchorClass *ac;
<span class="lineNum">    1052 </span>            :     GTextInfo **ti;
<span class="lineNum">    1053 </span>            :     int j;
<span class="lineNum">    1054 </span><span class="lineNoCov">          0 :     char *name = gwwv_ask_string(_(&quot;Anchor Class Name&quot;),&quot;&quot;,_(&quot;Please enter the name of a Anchor point class to create&quot;));</span>
<span class="lineNum">    1055 </span><span class="lineNoCov">          0 :     if ( name==NULL )</span>
<span class="lineNum">    1056 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    1057 </span><span class="lineNoCov">          0 :     ac = SFFindOrAddAnchorClass(sf,name,NULL);</span>
<span class="lineNum">    1058 </span><span class="lineNoCov">          0 :     GGadgetSetList(GWidgetGetControl(ci-&gt;gw,CID_NameList),</span>
<span class="lineNum">    1059 </span>            :     ti = AnchorClassesLList(sf),false);
<span class="lineNum">    1060 </span><span class="lineNoCov">          0 :     for ( j=0; ti[j]-&gt;text!=NULL &amp;&amp; ti[j]-&gt;userdata!=ac; ++j )</span>
<span class="lineNum">    1061 </span><span class="lineNoCov">          0 :         GGadgetSelectOneListItem(GWidgetGetControl(ci-&gt;gw,CID_NameList),j);</span>
<span class="lineNum">    1062 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="1063"><span class="lineNum">    1063 </span>            : }</a>
<span class="lineNum">    1064 </span>            : 
<span class="lineNum">    1065 </span><span class="lineNoCov">          0 : static int AI_New(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    1066 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_buttonactivate ) {</span>
<span class="lineNum">    1067 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    1068 </span>            :         int waslig;
<span class="lineNum">    1069 </span>            :         AnchorPoint *ap;
<span class="lineNum">    1070 </span><span class="lineNoCov">          0 :         SplineFont *sf = ci-&gt;sc-&gt;parent;</span>
<span class="lineNum">    1071 </span>            : 
<span class="lineNum">    1072 </span><span class="lineNoCov">          0 :         if ( sf-&gt;cidmaster ) sf = sf-&gt;cidmaster;</span>
<span class="lineNum">    1073 </span>            : 
<span class="lineNum">    1074 </span><span class="lineNoCov">          0 :         if ( AnchorClassUnused(ci-&gt;sc,&amp;waslig)==NULL ) {</span>
<span class="lineNum">    1075 </span><span class="lineNoCov">          0 :             if ( !AI_NewClass(g, e) )</span>
<span class="lineNum">    1076 </span><span class="lineNoCov">          0 : return( false );</span>
<span class="lineNum">    1077 </span>            :         }
<span class="lineNum">    1078 </span><span class="lineNoCov">          0 :         ap = AnchorPointNew(ci-&gt;cv);</span>
<span class="lineNum">    1079 </span><span class="lineNoCov">          0 :         if ( ap==NULL )</span>
<span class="lineNum">    1080 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    1081 </span><span class="lineNoCov">          0 :         AI_Display(ci,ap);</span>
<span class="lineNum">    1082 </span>            :     }
<span class="lineNum">    1083 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="1084"><span class="lineNum">    1084 </span>            : }</a>
<span class="lineNum">    1085 </span>            : 
<span class="lineNum">    1086 </span><span class="lineNoCov">          0 : static int AI_TypeChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    1087 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_radiochanged ) {</span>
<span class="lineNum">    1088 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    1089 </span><span class="lineNoCov">          0 :         AnchorPoint *ap = ci-&gt;ap;</span>
<span class="lineNum">    1090 </span>            : 
<span class="lineNum">    1091 </span><span class="lineNoCov">          0 :         if ( GGadgetIsChecked(GWidgetGetControl(ci-&gt;gw,CID_Mark)) )</span>
<span class="lineNum">    1092 </span><span class="lineNoCov">          0 :             ap-&gt;type = at_mark;</span>
<span class="lineNum">    1093 </span><span class="lineNoCov">          0 :         else if ( GGadgetIsChecked(GWidgetGetControl(ci-&gt;gw,CID_BaseChar)) )</span>
<span class="lineNum">    1094 </span><span class="lineNoCov">          0 :             ap-&gt;type = at_basechar;</span>
<span class="lineNum">    1095 </span><span class="lineNoCov">          0 :         else if ( GGadgetIsChecked(GWidgetGetControl(ci-&gt;gw,CID_BaseLig)) )</span>
<span class="lineNum">    1096 </span><span class="lineNoCov">          0 :             ap-&gt;type = at_baselig;</span>
<span class="lineNum">    1097 </span><span class="lineNoCov">          0 :         else if ( GGadgetIsChecked(GWidgetGetControl(ci-&gt;gw,CID_BaseMark)) )</span>
<span class="lineNum">    1098 </span><span class="lineNoCov">          0 :             ap-&gt;type = at_basemark;</span>
<span class="lineNum">    1099 </span><span class="lineNoCov">          0 :         else if ( GGadgetIsChecked(GWidgetGetControl(ci-&gt;gw,CID_CursEntry)) )</span>
<span class="lineNum">    1100 </span><span class="lineNoCov">          0 :             ap-&gt;type = at_centry;</span>
<span class="lineNum">    1101 </span><span class="lineNoCov">          0 :         else if ( GGadgetIsChecked(GWidgetGetControl(ci-&gt;gw,CID_CursExit)) )</span>
<span class="lineNum">    1102 </span><span class="lineNoCov">          0 :             ap-&gt;type = at_cexit;</span>
<span class="lineNum">    1103 </span><span class="lineNoCov">          0 :         GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_LigIndex),ap-&gt;type==at_baselig);</span>
<span class="lineNum">    1104 </span><span class="lineNoCov">          0 :         _CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b,2);</span>
<span class="lineNum">    1105 </span>            :     }
<span class="lineNum">    1106 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="1107"><span class="lineNum">    1107 </span>            : }</a>
<span class="lineNum">    1108 </span>            : 
<span class="lineNum">    1109 </span><span class="lineNoCov">          0 : static void AI_TestOrdering(GIData *ci,real x) {</span>
<span class="lineNum">    1110 </span><span class="lineNoCov">          0 :     AnchorPoint *aps, *ap=ci-&gt;ap;</span>
<span class="lineNum">    1111 </span><span class="lineNoCov">          0 :     AnchorClass *ac = ap-&gt;anchor;</span>
<span class="lineNum">    1112 </span>            :     int isr2l;
<span class="lineNum">    1113 </span>            : 
<span class="lineNum">    1114 </span><span class="lineNoCov">          0 :     isr2l = SCRightToLeft(ci-&gt;sc);</span>
<span class="lineNum">    1115 </span><span class="lineNoCov">          0 :     for ( aps=ci-&gt;sc-&gt;anchor; aps!=NULL; aps=aps-&gt;next ) {</span>
<span class="lineNum">    1116 </span><span class="lineNoCov">          0 :         if ( aps-&gt;anchor==ac &amp;&amp; aps!=ci-&gt;ap ) {</span>
<span class="lineNum">    1117 </span><span class="lineNoCov">          0 :             if (( aps-&gt;lig_index&lt;ap-&gt;lig_index &amp;&amp;</span>
<span class="lineNum">    1118 </span><span class="lineNoCov">          0 :                     ((!isr2l &amp;&amp; aps-&gt;me.x&gt;x) ||</span>
<span class="lineNum">    1119 </span><span class="lineNoCov">          0 :                      ( isr2l &amp;&amp; aps-&gt;me.x&lt;x))) ||</span>
<span class="lineNum">    1120 </span><span class="lineNoCov">          0 :                 ( aps-&gt;lig_index&gt;ap-&gt;lig_index &amp;&amp;</span>
<span class="lineNum">    1121 </span><span class="lineNoCov">          0 :                     (( isr2l &amp;&amp; aps-&gt;me.x&gt;x) ||</span>
<span class="lineNum">    1122 </span><span class="lineNoCov">          0 :                      (!isr2l &amp;&amp; aps-&gt;me.x&lt;x))) ) {</span>
<span class="lineNum">    1123 </span><span class="lineNoCov">          0 :                 ff_post_error(_(&quot;Out Of Order&quot;),_(&quot;Marks within a ligature should be ordered with the direction of writing.\nThis one and %d are out of order.&quot;),aps-&gt;lig_index);</span>
<span class="lineNum">    1124 </span><span class="lineNoCov">          0 : return;</span>
<span class="lineNum">    1125 </span>            :             }
<span class="lineNum">    1126 </span>            :         }
<span class="lineNum">    1127 </span>            :     }
<span class="lineNum">    1128 </span><span class="lineNoCov">          0 : return;</span>
<a name="1129"><span class="lineNum">    1129 </span>            : }</a>
<span class="lineNum">    1130 </span>            : 
<span class="lineNum">    1131 </span><span class="lineNoCov">          0 : static int AI_LigIndexChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    1132 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_textchanged ) {</span>
<span class="lineNum">    1133 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    1134 </span>            :         int index, max;
<span class="lineNum">    1135 </span><span class="lineNoCov">          0 :         int err=false;</span>
<span class="lineNum">    1136 </span><span class="lineNoCov">          0 :         AnchorPoint *ap = ci-&gt;ap, *aps;</span>
<span class="lineNum">    1137 </span>            : 
<span class="lineNum">    1138 </span><span class="lineNoCov">          0 :         index = GetCalmReal8(ci-&gt;gw,CID_LigIndex,_(&quot;Lig Index:&quot;),&amp;err);</span>
<span class="lineNum">    1139 </span><span class="lineNoCov">          0 :         if ( index&lt;0 || err )</span>
<span class="lineNum">    1140 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    1141 </span><span class="lineNoCov">          0 :         if ( *_GGadgetGetTitle(g)=='\0' )</span>
<span class="lineNum">    1142 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    1143 </span><span class="lineNoCov">          0 :         max = 0;</span>
<span class="lineNum">    1144 </span><span class="lineNoCov">          0 :         AI_TestOrdering(ci,ap-&gt;me.x);</span>
<span class="lineNum">    1145 </span><span class="lineNoCov">          0 :         for ( aps=ci-&gt;sc-&gt;anchor; aps!=NULL; aps=aps-&gt;next ) {</span>
<span class="lineNum">    1146 </span><span class="lineNoCov">          0 :             if ( aps-&gt;anchor==ap-&gt;anchor &amp;&amp; aps!=ap ) {</span>
<span class="lineNum">    1147 </span><span class="lineNoCov">          0 :                 if ( aps-&gt;lig_index==index ) {</span>
<span class="lineNum">    1148 </span><span class="lineNoCov">          0 :                     ff_post_error(_(&quot;Index in use&quot;),_(&quot;This ligature index is already in use&quot;));</span>
<span class="lineNum">    1149 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    1150 </span><span class="lineNoCov">          0 :                 } else if ( aps-&gt;lig_index&gt;max )</span>
<span class="lineNum">    1151 </span><span class="lineNoCov">          0 :                     max = aps-&gt;lig_index;</span>
<span class="lineNum">    1152 </span>            :             }
<span class="lineNum">    1153 </span>            :         }
<span class="lineNum">    1154 </span><span class="lineNoCov">          0 :         if ( index&gt;max+10 ) {</span>
<span class="lineNum">    1155 </span>            :             char buf[20];
<span class="lineNum">    1156 </span><span class="lineNoCov">          0 :             ff_post_error(_(&quot;Too Big&quot;),_(&quot;This index is much larger than the closest neighbor&quot;));</span>
<span class="lineNum">    1157 </span><span class="lineNoCov">          0 :             sprintf(buf,&quot;%d&quot;, max+1);</span>
<span class="lineNum">    1158 </span><span class="lineNoCov">          0 :             GGadgetSetTitle8(g,buf);</span>
<span class="lineNum">    1159 </span><span class="lineNoCov">          0 :             index = max+1;</span>
<span class="lineNum">    1160 </span>            :         }
<span class="lineNum">    1161 </span><span class="lineNoCov">          0 :         ap-&gt;lig_index = index;</span>
<span class="lineNum">    1162 </span><span class="lineNoCov">          0 :         _CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b,2);</span>
<span class="lineNum">    1163 </span>            :     }
<span class="lineNum">    1164 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="1165"><span class="lineNum">    1165 </span>            : }</a>
<span class="lineNum">    1166 </span>            : 
<span class="lineNum">    1167 </span><span class="lineNoCov">          0 : static int AI_ANameChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    1168 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_listselected ) {</span>
<span class="lineNum">    1169 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    1170 </span>            :         AnchorPoint *ap;
<span class="lineNum">    1171 </span><span class="lineNoCov">          0 :         GTextInfo *ti = GGadgetGetListItemSelected(g);</span>
<span class="lineNum">    1172 </span><span class="lineNoCov">          0 :         AnchorClass *an = ti-&gt;userdata;</span>
<span class="lineNum">    1173 </span><span class="lineNoCov">          0 :         int change=0, max=0;</span>
<span class="lineNum">    1174 </span>            :         int ntype;
<span class="lineNum">    1175 </span>            :         int sawentry, sawexit;
<span class="lineNum">    1176 </span>            : 
<span class="lineNum">    1177 </span><span class="lineNoCov">          0 :         if ( an==ci-&gt;ap-&gt;anchor )</span>
<span class="lineNum">    1178 </span><span class="lineNoCov">          0 : return( true );                 /* No op */</span>
<span class="lineNum">    1179 </span>            : 
<span class="lineNum">    1180 </span><span class="lineNoCov">          0 :         ntype = ci-&gt;ap-&gt;type;</span>
<span class="lineNum">    1181 </span><span class="lineNoCov">          0 :         if ( an-&gt;type==act_curs ) {</span>
<span class="lineNum">    1182 </span><span class="lineNoCov">          0 :             if ( ntype!=at_centry &amp;&amp; ntype!=at_cexit )</span>
<span class="lineNum">    1183 </span><span class="lineNoCov">          0 :                 ntype = at_centry;</span>
<span class="lineNum">    1184 </span><span class="lineNoCov">          0 :         } else if ( an-&gt;type==act_mkmk ) {</span>
<span class="lineNum">    1185 </span><span class="lineNoCov">          0 :             if ( ntype!=at_basemark &amp;&amp; ntype!=at_mark )</span>
<span class="lineNum">    1186 </span><span class="lineNoCov">          0 :                 ntype = at_basemark;</span>
<span class="lineNum">    1187 </span><span class="lineNoCov">          0 :         } else if ( ntype==at_centry || ntype==at_cexit || ntype==at_basemark ||</span>
<span class="lineNum">    1188 </span><span class="lineNoCov">          0 :                 ntype==at_baselig || ntype == at_basechar ) {</span>
<span class="lineNum">    1189 </span>            :             PST *pst;
<span class="lineNum">    1190 </span><span class="lineNoCov">          0 :             for ( pst = ci-&gt;sc-&gt;possub; pst!=NULL &amp;&amp; pst-&gt;type!=pst_ligature; pst=pst-&gt;next );</span>
<span class="lineNum">    1191 </span><span class="lineNoCov">          0 :             if (ci-&gt;sc-&gt;glyph_class==3+1 ||</span>
<span class="lineNum">    1192 </span><span class="lineNoCov">          0 :                     (ci-&gt;sc-&gt;unicodeenc!=-1 &amp;&amp; ci-&gt;sc-&gt;unicodeenc&lt;0x10000 &amp;&amp;</span>
<span class="lineNum">    1193 </span><span class="lineNoCov">          0 :                     iscombining(ci-&gt;sc-&gt;unicodeenc)))</span>
<span class="lineNum">    1194 </span><span class="lineNoCov">          0 :                 ntype = at_mark;</span>
<span class="lineNum">    1195 </span><span class="lineNoCov">          0 :             else if (( pst!=NULL || ci-&gt;sc-&gt;glyph_class==2+1 ) &amp;&amp; an-&gt;type==act_mklg )</span>
<span class="lineNum">    1196 </span><span class="lineNoCov">          0 :                 ntype = at_baselig;</span>
<span class="lineNum">    1197 </span>            :             else
<span class="lineNum">    1198 </span><span class="lineNoCov">          0 :                 ntype = at_basechar;</span>
<span class="lineNum">    1199 </span>            :         }
<span class="lineNum">    1200 </span>            : 
<span class="lineNum">    1201 </span><span class="lineNoCov">          0 :         sawentry = sawexit = false;</span>
<span class="lineNum">    1202 </span><span class="lineNoCov">          0 :         for ( ap=ci-&gt;sc-&gt;anchor; ap!=NULL; ap = ap-&gt;next ) {</span>
<span class="lineNum">    1203 </span><span class="lineNoCov">          0 :             if ( ap!=ci-&gt;ap &amp;&amp; ap-&gt;anchor==an ) {</span>
<span class="lineNum">    1204 </span><span class="lineNoCov">          0 :                 if ( an-&gt;type==act_curs ) {</span>
<span class="lineNum">    1205 </span><span class="lineNoCov">          0 :                     if ( ap-&gt;type == at_centry ) sawentry = true;</span>
<span class="lineNum">    1206 </span><span class="lineNoCov">          0 :                     else if ( ap-&gt;type== at_cexit ) sawexit = true;</span>
<span class="lineNum">    1207 </span><span class="lineNoCov">          0 :                 } else if ( an-&gt;type==act_mkmk ) {</span>
<span class="lineNum">    1208 </span><span class="lineNoCov">          0 :                     if ( ap-&gt;type == at_mark ) sawentry = true;</span>
<span class="lineNum">    1209 </span><span class="lineNoCov">          0 :                     else if ( ap-&gt;type== at_basemark ) sawexit = true;</span>
<span class="lineNum">    1210 </span>            :                 } else {
<span class="lineNum">    1211 </span><span class="lineNoCov">          0 :                     if ( ap-&gt;type!=at_baselig )</span>
<span class="lineNum">    1212 </span><span class="lineNoCov">          0 :         break;</span>
<span class="lineNum">    1213 </span><span class="lineNoCov">          0 :                     if ( ap-&gt;lig_index==ci-&gt;ap-&gt;lig_index )</span>
<span class="lineNum">    1214 </span><span class="lineNoCov">          0 :                         change = true;</span>
<span class="lineNum">    1215 </span><span class="lineNoCov">          0 :                     else if ( ap-&gt;lig_index&gt;max )</span>
<span class="lineNum">    1216 </span><span class="lineNoCov">          0 :                         max = ap-&gt;lig_index;</span>
<span class="lineNum">    1217 </span>            :                 }
<span class="lineNum">    1218 </span><span class="lineNoCov">          0 :             } else if ( ap!=ci-&gt;ap &amp;&amp; ap-&gt;anchor-&gt;subtable==an-&gt;subtable &amp;&amp;</span>
<span class="lineNum">    1219 </span><span class="lineNoCov">          0 :                     ap-&gt;type==at_mark )</span>
<span class="lineNum">    1220 </span><span class="lineNoCov">          0 :         break;</span>
<span class="lineNum">    1221 </span>            :         }
<span class="lineNum">    1222 </span><span class="lineNoCov">          0 :         if ( ap!=NULL || (sawentry &amp;&amp; sawexit)) {</span>
<span class="lineNum">    1223 </span><span class="lineNoCov">          0 :             AI_SelectList(ci,ci-&gt;ap);</span>
<span class="lineNum">    1224 </span><span class="lineNoCov">          0 :             ff_post_error(_(&quot;Class already used&quot;),_(&quot;This anchor class already is associated with a point in this character&quot;));</span>
<span class="lineNum">    1225 </span>            :         } else {
<span class="lineNum">    1226 </span><span class="lineNoCov">          0 :             ci-&gt;ap-&gt;anchor = an;</span>
<span class="lineNum">    1227 </span><span class="lineNoCov">          0 :             if ( an-&gt;type==act_curs ) {</span>
<span class="lineNum">    1228 </span><span class="lineNoCov">          0 :                 if ( sawentry ) ntype = at_cexit;</span>
<span class="lineNum">    1229 </span><span class="lineNoCov">          0 :                 else if ( sawexit ) ntype = at_centry;</span>
<span class="lineNum">    1230 </span><span class="lineNoCov">          0 :             } else if ( an-&gt;type==act_mkmk ) {</span>
<span class="lineNum">    1231 </span><span class="lineNoCov">          0 :                 if ( sawentry ) ntype = at_basemark;</span>
<span class="lineNum">    1232 </span><span class="lineNoCov">          0 :                 else if ( sawexit ) ntype = at_mark;</span>
<span class="lineNum">    1233 </span>            :             }
<span class="lineNum">    1234 </span><span class="lineNoCov">          0 :             if ( ci-&gt;ap-&gt;type!=ntype ) {</span>
<span class="lineNum">    1235 </span><span class="lineNoCov">          0 :                 ci-&gt;ap-&gt;type = ntype;</span>
<span class="lineNum">    1236 </span><span class="lineNoCov">          0 :                 AI_DisplayRadio(ci,ntype);</span>
<span class="lineNum">    1237 </span>            :             }
<span class="lineNum">    1238 </span><span class="lineNoCov">          0 :             if ( ci-&gt;ap-&gt;type!=at_baselig )</span>
<span class="lineNum">    1239 </span><span class="lineNoCov">          0 :                 ci-&gt;ap-&gt;lig_index = 0;</span>
<span class="lineNum">    1240 </span><span class="lineNoCov">          0 :             else if ( change ) {</span>
<span class="lineNum">    1241 </span><span class="lineNoCov">          0 :                 ci-&gt;ap-&gt;lig_index = max+1;</span>
<span class="lineNum">    1242 </span><span class="lineNoCov">          0 :                 AI_DisplayIndex(ci,ci-&gt;ap);</span>
<span class="lineNum">    1243 </span>            :             }
<span class="lineNum">    1244 </span><span class="lineNoCov">          0 :             AI_DisplayClass(ci,ci-&gt;ap);</span>
<span class="lineNum">    1245 </span><span class="lineNoCov">          0 :             AI_TestOrdering(ci,ci-&gt;ap-&gt;me.x);</span>
<span class="lineNum">    1246 </span>            :         }
<span class="lineNum">    1247 </span><span class="lineNoCov">          0 :         _CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b,2);</span>
<span class="lineNum">    1248 </span>            :     }
<span class="lineNum">    1249 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="1250"><span class="lineNum">    1250 </span>            : }</a>
<span class="lineNum">    1251 </span>            : 
<span class="lineNum">    1252 </span><span class="lineNoCov">          0 : static int AI_PosChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    1253 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_textchanged ) {</span>
<span class="lineNum">    1254 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    1255 </span><span class="lineNoCov">          0 :         real dx=0, dy=0;</span>
<span class="lineNum">    1256 </span><span class="lineNoCov">          0 :         int err=false;</span>
<span class="lineNum">    1257 </span><span class="lineNoCov">          0 :         AnchorPoint *ap = ci-&gt;ap;</span>
<span class="lineNum">    1258 </span>            : 
<span class="lineNum">    1259 </span><span class="lineNoCov">          0 :         if ( GGadgetGetCid(g)==CID_X ) {</span>
<span class="lineNum">    1260 </span><span class="lineNoCov">          0 :             dx = GetCalmReal8(ci-&gt;gw,CID_X,_(&quot;_X&quot;),&amp;err)-ap-&gt;me.x;</span>
<span class="lineNum">    1261 </span><span class="lineNoCov">          0 :             AI_TestOrdering(ci,ap-&gt;me.x+dx);</span>
<span class="lineNum">    1262 </span>            :         } else
<span class="lineNum">    1263 </span><span class="lineNoCov">          0 :             dy = GetCalmReal8(ci-&gt;gw,CID_Y,_(&quot;_Y&quot;),&amp;err)-ap-&gt;me.y;</span>
<span class="lineNum">    1264 </span><span class="lineNoCov">          0 :         if ( (dx==0 &amp;&amp; dy==0) || err )</span>
<span class="lineNum">    1265 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    1266 </span><span class="lineNoCov">          0 :         ap-&gt;me.x += dx;</span>
<span class="lineNum">    1267 </span><span class="lineNoCov">          0 :         ap-&gt;me.y += dy;</span>
<span class="lineNum">    1268 </span><span class="lineNoCov">          0 :         _CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b,2);</span>
<span class="lineNum">    1269 </span>            :     }
<span class="lineNum">    1270 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="1271"><span class="lineNum">    1271 </span>            : }</a>
<span class="lineNum">    1272 </span>            : 
<span class="lineNum">    1273 </span><span class="lineNoCov">          0 : static int AI_MatchChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    1274 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_textchanged ) {</span>
<span class="lineNum">    1275 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    1276 </span><span class="lineNoCov">          0 :         const unichar_t *t1 = _GGadgetGetTitle(GWidgetGetControl(ci-&gt;gw,CID_MatchPt));</span>
<span class="lineNum">    1277 </span>            :         unichar_t *end;
<span class="lineNum">    1278 </span><span class="lineNoCov">          0 :         AnchorPoint *ap = ci-&gt;ap;</span>
<span class="lineNum">    1279 </span>            : 
<span class="lineNum">    1280 </span><span class="lineNoCov">          0 :         while ( *t1==' ' ) ++t1;</span>
<span class="lineNum">    1281 </span><span class="lineNoCov">          0 :         GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_X),*t1=='\0');</span>
<span class="lineNum">    1282 </span><span class="lineNoCov">          0 :         GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_Y),*t1=='\0');</span>
<span class="lineNum">    1283 </span><span class="lineNoCov">          0 :         if ( isdigit(*t1)) {</span>
<span class="lineNum">    1284 </span>            :             BasePoint here;
<span class="lineNum">    1285 </span>            :             int pt;
<span class="lineNum">    1286 </span><span class="lineNoCov">          0 :             pt = u_strtol(t1,&amp;end,10);</span>
<span class="lineNum">    1287 </span><span class="lineNoCov">          0 :             if ( *end=='\0' &amp;&amp; ttfFindPointInSC(ci-&gt;cv-&gt;b.sc,CVLayer((CharViewBase *) ci-&gt;cv),pt,&amp;here,NULL)==-1 ) {</span>
<span class="lineNum">    1288 </span>            :                 char buffer[40];
<span class="lineNum">    1289 </span><span class="lineNoCov">          0 :                 sprintf(buffer,&quot;%g&quot;,(double) here.x);</span>
<span class="lineNum">    1290 </span><span class="lineNoCov">          0 :                 GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_X),buffer);</span>
<span class="lineNum">    1291 </span><span class="lineNoCov">          0 :                 sprintf(buffer,&quot;%g&quot;,(double) here.y);</span>
<span class="lineNum">    1292 </span><span class="lineNoCov">          0 :                 GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_Y),buffer);</span>
<span class="lineNum">    1293 </span><span class="lineNoCov">          0 :                 ap-&gt;me = here;</span>
<span class="lineNum">    1294 </span><span class="lineNoCov">          0 :                 ap-&gt;has_ttf_pt = true;</span>
<span class="lineNum">    1295 </span><span class="lineNoCov">          0 :                 ap-&gt;ttf_pt_index = pt;</span>
<span class="lineNum">    1296 </span><span class="lineNoCov">          0 :                 _CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b,2);</span>
<span class="lineNum">    1297 </span>            :             }
<span class="lineNum">    1298 </span>            :         } else
<span class="lineNum">    1299 </span><span class="lineNoCov">          0 :             ap-&gt;has_ttf_pt = false;</span>
<span class="lineNum">    1300 </span>            :     }
<span class="lineNum">    1301 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="1302"><span class="lineNum">    1302 </span>            : }</a>
<span class="lineNum">    1303 </span>            : 
<span class="lineNum">    1304 </span><span class="lineNoCov">          0 : static void AI_DoCancel(GIData *ci) {</span>
<span class="lineNum">    1305 </span><span class="lineNoCov">          0 :     CharView *cv = ci-&gt;cv;</span>
<span class="lineNum">    1306 </span><span class="lineNoCov">          0 :     ci-&gt;done = true;</span>
<span class="lineNum">    1307 </span><span class="lineNoCov">          0 :     AnchorPointsFree(cv-&gt;b.sc-&gt;anchor);</span>
<span class="lineNum">    1308 </span><span class="lineNoCov">          0 :     cv-&gt;b.sc-&gt;anchor = ci-&gt;oldaps;</span>
<span class="lineNum">    1309 </span><span class="lineNoCov">          0 :     ci-&gt;oldaps = NULL;</span>
<span class="lineNum">    1310 </span><span class="lineNoCov">          0 :     CVRemoveTopUndo(&amp;cv-&gt;b);</span>
<span class="lineNum">    1311 </span><span class="lineNoCov">          0 :     SCUpdateAll(cv-&gt;b.sc);</span>
<a name="1312"><span class="lineNum">    1312 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1313 </span>            : 
<span class="lineNum">    1314 </span><span class="lineNoCov">          0 : static int ai_e_h(GWindow gw, GEvent *event) {</span>
<span class="lineNum">    1315 </span><span class="lineNoCov">          0 :     if ( event-&gt;type==et_close ) {</span>
<span class="lineNum">    1316 </span><span class="lineNoCov">          0 :         AI_DoCancel( GDrawGetUserData(gw));</span>
<span class="lineNum">    1317 </span><span class="lineNoCov">          0 :     } else if ( event-&gt;type==et_char ) {</span>
<span class="lineNum">    1318 </span><span class="lineNoCov">          0 :         if ( event-&gt;u.chr.keysym == GK_F1 || event-&gt;u.chr.keysym == GK_Help ) {</span>
<span class="lineNum">    1319 </span><span class="lineNoCov">          0 :             help(&quot;getinfo.html&quot;);</span>
<span class="lineNum">    1320 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    1321 </span>            :         }
<span class="lineNum">    1322 </span><span class="lineNoCov">          0 : return( false );</span>
<span class="lineNum">    1323 </span><span class="lineNoCov">          0 :     } else if ( event-&gt;type == et_map ) {</span>
<span class="lineNum">    1324 </span>            :         /* Above palettes */
<span class="lineNum">    1325 </span><span class="lineNoCov">          0 :         GDrawRaise(gw);</span>
<span class="lineNum">    1326 </span>            :     }
<span class="lineNum">    1327 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="1328"><span class="lineNum">    1328 </span>            : }</a>
<span class="lineNum">    1329 </span>            : 
<span class="lineNum">    1330 </span><span class="lineNoCov">          0 : static int AI_Cancel(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    1331 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_buttonactivate ) {</span>
<span class="lineNum">    1332 </span><span class="lineNoCov">          0 :         AI_DoCancel( GDrawGetUserData(GGadgetGetWindow(g)));</span>
<span class="lineNum">    1333 </span>            :     }
<span class="lineNum">    1334 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="1335"><span class="lineNum">    1335 </span>            : }</a>
<span class="lineNum">    1336 </span>            : 
<span class="lineNum">    1337 </span><span class="lineNoCov">          0 : static int AI_Ok(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    1338 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_buttonactivate ) {</span>
<span class="lineNum">    1339 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    1340 </span><span class="lineNoCov">          0 :         ci-&gt;done = true;</span>
<span class="lineNum">    1341 </span>            :         /* All the work has been done as we've gone along */
<span class="lineNum">    1342 </span>            :         /* Well, we should reorder the list... */
<span class="lineNum">    1343 </span><span class="lineNoCov">          0 :         SCOrderAP(ci-&gt;cv-&gt;b.sc);</span>
<span class="lineNum">    1344 </span>            :     }
<span class="lineNum">    1345 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="1346"><span class="lineNum">    1346 </span>            : }</a>
<span class="lineNum">    1347 </span>            : 
<span class="lineNum">    1348 </span><span class="lineNoCov">          0 : void ApGetInfo(CharView *cv, AnchorPoint *ap) {</span>
<span class="lineNum">    1349 </span>            :     static GIData gi;
<span class="lineNum">    1350 </span>            :     GRect pos;
<span class="lineNum">    1351 </span>            :     GWindowAttrs wattrs;
<span class="lineNum">    1352 </span>            :     GGadgetCreateData gcd[25], boxes[10], *varray[21], *harray1[5], *harray2[3],
<span class="lineNum">    1353 </span>            :         *hvarray[13], *harray3[4], *harray4[6], *harray5[6], *harray6[7];
<span class="lineNum">    1354 </span>            :     GTextInfo label[25];
<span class="lineNum">    1355 </span>            :     int j;
<span class="lineNum">    1356 </span>            :     SplineFont *sf;
<span class="lineNum">    1357 </span>            :     GTextInfo **ti;
<span class="lineNum">    1358 </span>            : 
<span class="lineNum">    1359 </span><span class="lineNoCov">          0 :     memset(&amp;gi,0,sizeof(gi));</span>
<span class="lineNum">    1360 </span><span class="lineNoCov">          0 :     gi.cv = cv;</span>
<span class="lineNum">    1361 </span><span class="lineNoCov">          0 :     gi.sc = cv-&gt;b.sc;</span>
<span class="lineNum">    1362 </span><span class="lineNoCov">          0 :     gi.oldaps = AnchorPointsCopy(cv-&gt;b.sc-&gt;anchor);</span>
<span class="lineNum">    1363 </span><span class="lineNoCov">          0 :     CVPreserveState(&amp;cv-&gt;b);</span>
<span class="lineNum">    1364 </span><span class="lineNoCov">          0 :     if ( ap==NULL ) {</span>
<span class="lineNum">    1365 </span><span class="lineNoCov">          0 :         ap = AnchorPointNew(cv);</span>
<span class="lineNum">    1366 </span><span class="lineNoCov">          0 :         if ( ap==NULL )</span>
<span class="lineNum">    1367 </span><span class="lineNoCov">          0 : return;</span>
<span class="lineNum">    1368 </span>            :     }
<span class="lineNum">    1369 </span>            : 
<span class="lineNum">    1370 </span><span class="lineNoCov">          0 :     gi.ap = ap;</span>
<span class="lineNum">    1371 </span><span class="lineNoCov">          0 :     gi.changed = false;</span>
<span class="lineNum">    1372 </span><span class="lineNoCov">          0 :     gi.done = false;</span>
<span class="lineNum">    1373 </span>            : 
<span class="lineNum">    1374 </span><span class="lineNoCov">          0 :         memset(&amp;wattrs,0,sizeof(wattrs));</span>
<span class="lineNum">    1375 </span><span class="lineNoCov">          0 :         wattrs.mask = wam_events|wam_cursor|wam_utf8_wtitle|wam_undercursor|wam_isdlg|wam_restrict;</span>
<span class="lineNum">    1376 </span><span class="lineNoCov">          0 :         wattrs.event_masks = ~(1&lt;&lt;et_charup);</span>
<span class="lineNum">    1377 </span><span class="lineNoCov">          0 :         wattrs.restrict_input_to_me = 1;</span>
<span class="lineNum">    1378 </span><span class="lineNoCov">          0 :         wattrs.undercursor = 1;</span>
<span class="lineNum">    1379 </span><span class="lineNoCov">          0 :         wattrs.cursor = ct_pointer;</span>
<span class="lineNum">    1380 </span><span class="lineNoCov">          0 :         wattrs.utf8_window_title = _(&quot;Anchor Point Info&quot;);</span>
<span class="lineNum">    1381 </span><span class="lineNoCov">          0 :         wattrs.is_dlg = true;</span>
<span class="lineNum">    1382 </span><span class="lineNoCov">          0 :         pos.x = pos.y = 0;</span>
<span class="lineNum">    1383 </span><span class="lineNoCov">          0 :         pos.width = GGadgetScale(GDrawPointsToPixels(NULL,AI_Width));</span>
<span class="lineNum">    1384 </span><span class="lineNoCov">          0 :         pos.height = GDrawPointsToPixels(NULL,AI_Height);</span>
<span class="lineNum">    1385 </span><span class="lineNoCov">          0 :         gi.gw = GDrawCreateTopWindow(NULL,&amp;pos,ai_e_h,&amp;gi,&amp;wattrs);</span>
<span class="lineNum">    1386 </span>            : 
<span class="lineNum">    1387 </span><span class="lineNoCov">          0 :         memset(&amp;gcd,0,sizeof(gcd));</span>
<span class="lineNum">    1388 </span><span class="lineNoCov">          0 :         memset(&amp;label,0,sizeof(label));</span>
<span class="lineNum">    1389 </span><span class="lineNoCov">          0 :         memset(&amp;boxes,0,sizeof(boxes));</span>
<span class="lineNum">    1390 </span>            : 
<span class="lineNum">    1391 </span><span class="lineNoCov">          0 :         j=0;</span>
<span class="lineNum">    1392 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) ap-&gt;anchor-&gt;name;</span>
<span class="lineNum">    1393 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1394 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1395 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 5; gcd[j].gd.pos.y = 5;</span>
<span class="lineNum">    1396 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.width = AI_Width-10;</span>
<span class="lineNum">    1397 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1398 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_NameList;</span>
<span class="lineNum">    1399 </span><span class="lineNoCov">          0 :         sf = cv-&gt;b.sc-&gt;parent;</span>
<span class="lineNum">    1400 </span><span class="lineNoCov">          0 :         if ( sf-&gt;cidmaster ) sf = sf-&gt;cidmaster;</span>
<span class="lineNum">    1401 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_ANameChanged;</span>
<span class="lineNum">    1402 </span><span class="lineNoCov">          0 :         gcd[j].creator = GListButtonCreate;</span>
<span class="lineNum">    1403 </span><span class="lineNoCov">          0 :         varray[0] = &amp;gcd[j]; varray[1] = NULL;</span>
<span class="lineNum">    1404 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1405 </span>            : 
<span class="lineNum">    1406 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_X:&quot;);</span>
<span class="lineNum">    1407 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1408 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    1409 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1410 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 5; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+34;</span>
<span class="lineNum">    1411 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1412 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    1413 </span><span class="lineNoCov">          0 :         harray1[0] = &amp;gcd[j];</span>
<span class="lineNum">    1414 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1415 </span>            : 
<span class="lineNum">    1416 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 23; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-4;</span>
<span class="lineNum">    1417 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.width = 50;</span>
<span class="lineNum">    1418 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1419 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_X;</span>
<span class="lineNum">    1420 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_PosChanged;</span>
<span class="lineNum">    1421 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    1422 </span><span class="lineNoCov">          0 :         harray1[1] = &amp;gcd[j];</span>
<span class="lineNum">    1423 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1424 </span>            : 
<span class="lineNum">    1425 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_Y:&quot;);</span>
<span class="lineNum">    1426 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1427 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    1428 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1429 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 85; gcd[j].gd.pos.y = gcd[j-2].gd.pos.y;</span>
<span class="lineNum">    1430 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1431 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    1432 </span><span class="lineNoCov">          0 :         harray1[2] = &amp;gcd[j];</span>
<span class="lineNum">    1433 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1434 </span>            : 
<span class="lineNum">    1435 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 103; gcd[j].gd.pos.y = gcd[j-2].gd.pos.y;</span>
<span class="lineNum">    1436 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.width = 50;</span>
<span class="lineNum">    1437 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1438 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Y;</span>
<span class="lineNum">    1439 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_PosChanged;</span>
<span class="lineNum">    1440 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    1441 </span><span class="lineNoCov">          0 :         harray1[3] = &amp;gcd[j]; harray1[4] = NULL;</span>
<span class="lineNum">    1442 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1443 </span>            : 
<span class="lineNum">    1444 </span><span class="lineNoCov">          0 :         boxes[2].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1445 </span><span class="lineNoCov">          0 :         boxes[2].gd.u.boxelements = harray1;</span>
<span class="lineNum">    1446 </span><span class="lineNoCov">          0 :         boxes[2].creator = GHBoxCreate;</span>
<span class="lineNum">    1447 </span><span class="lineNoCov">          0 :         varray[2] = &amp;boxes[2]; varray[3] = NULL;</span>
<span class="lineNum">    1448 </span>            : 
<span class="lineNum">    1449 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Matching TTF Point:&quot;);</span>
<span class="lineNum">    1450 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1451 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1452 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 5; gcd[j].gd.pos.y = gcd[j-2].gd.pos.y+24;</span>
<span class="lineNum">    1453 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = cv-&gt;b.sc-&gt;layers[ly_fore].order2 ? (gg_enabled|gg_visible) : gg_visible;</span>
<span class="lineNum">    1454 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    1455 </span><span class="lineNoCov">          0 :         harray2[0] = &amp;gcd[j];</span>
<span class="lineNum">    1456 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1457 </span>            : 
<span class="lineNum">    1458 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 103; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-2;</span>
<span class="lineNum">    1459 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.width = 50;</span>
<span class="lineNum">    1460 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gcd[j-1].gd.flags;</span>
<span class="lineNum">    1461 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_MatchPt;</span>
<span class="lineNum">    1462 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_MatchChanged;</span>
<span class="lineNum">    1463 </span><span class="lineNoCov">          0 :         gcd[j].creator = GTextFieldCreate;</span>
<span class="lineNum">    1464 </span><span class="lineNoCov">          0 :         harray2[1] = &amp;gcd[j]; harray2[2] = NULL;</span>
<span class="lineNum">    1465 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1466 </span>            : 
<span class="lineNum">    1467 </span><span class="lineNoCov">          0 :         boxes[3].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1468 </span><span class="lineNoCov">          0 :         boxes[3].gd.u.boxelements = harray2;</span>
<span class="lineNum">    1469 </span><span class="lineNoCov">          0 :         boxes[3].creator = GHBoxCreate;</span>
<span class="lineNum">    1470 </span><span class="lineNoCov">          0 :         varray[4] = &amp;boxes[3]; varray[5] = NULL;</span>
<span class="lineNum">    1471 </span>            : 
<span class="lineNum">    1472 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Mark&quot;);</span>
<span class="lineNum">    1473 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1474 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1475 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 5; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+28;</span>
<span class="lineNum">    1476 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1477 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Mark;</span>
<span class="lineNum">    1478 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_TypeChanged;</span>
<span class="lineNum">    1479 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    1480 </span><span class="lineNoCov">          0 :         hvarray[0] = &amp;gcd[j];</span>
<span class="lineNum">    1481 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1482 </span>            : 
<span class="lineNum">    1483 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Base Glyph&quot;);</span>
<span class="lineNum">    1484 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1485 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1486 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 70; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y;</span>
<span class="lineNum">    1487 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1488 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_BaseChar;</span>
<span class="lineNum">    1489 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_TypeChanged;</span>
<span class="lineNum">    1490 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    1491 </span><span class="lineNoCov">          0 :         hvarray[1] = &amp;gcd[j]; hvarray[2] = NULL;</span>
<span class="lineNum">    1492 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1493 </span>            : 
<span class="lineNum">    1494 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Base Lig&quot;);</span>
<span class="lineNum">    1495 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1496 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1497 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = gcd[j-2].gd.pos.x; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+14;</span>
<span class="lineNum">    1498 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1499 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_BaseLig;</span>
<span class="lineNum">    1500 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_TypeChanged;</span>
<span class="lineNum">    1501 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    1502 </span><span class="lineNoCov">          0 :         hvarray[3] = &amp;gcd[j];</span>
<span class="lineNum">    1503 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1504 </span>            : 
<span class="lineNum">    1505 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Base Mark&quot;);</span>
<span class="lineNum">    1506 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1507 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1508 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = gcd[j-2].gd.pos.x; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y;</span>
<span class="lineNum">    1509 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1510 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_BaseMark;</span>
<span class="lineNum">    1511 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_TypeChanged;</span>
<span class="lineNum">    1512 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    1513 </span><span class="lineNoCov">          0 :         hvarray[4] = &amp;gcd[j]; hvarray[5] = NULL;</span>
<span class="lineNum">    1514 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1515 </span>            : 
<span class="lineNum">    1516 </span>            : /* GT: Cursive Entry. This defines a point on the glyph that should be matched */
<span class="lineNum">    1517 </span>            : /* GT: with the &quot;Cursive Exit&quot; point of the preceding glyph.  */
<span class="lineNum">    1518 </span>            : /* GT: This is a special way of joining letters which was developed for Urdu */
<span class="lineNum">    1519 </span>            : /* GT: fonts. Essentially every glyph has an entry point and an exit point. */
<span class="lineNum">    1520 </span>            : /* GT: When written the glyphs in sequence are aligned so that the exit point */
<span class="lineNum">    1521 </span>            : /* GT: of each glyph matches the entry point of the following. It means you */
<span class="lineNum">    1522 </span>            : /* GT: get a join such as might be expected for script. Urdu is odd because */
<span class="lineNum">    1523 </span>            : /* GT: letters within a word crawl diagonally up the page, but with each word */
<span class="lineNum">    1524 </span>            : /* GT: the writing point starts at the baseline. */
<span class="lineNum">    1525 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;CursEntry&quot;);</span>
<span class="lineNum">    1526 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1527 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1528 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = gcd[j-2].gd.pos.x; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+14;</span>
<span class="lineNum">    1529 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1530 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_CursEntry;</span>
<span class="lineNum">    1531 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_TypeChanged;</span>
<span class="lineNum">    1532 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    1533 </span><span class="lineNoCov">          0 :         hvarray[6] = &amp;gcd[j];</span>
<span class="lineNum">    1534 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1535 </span>            : 
<span class="lineNum">    1536 </span>            : /* GT: Cursive Exit. This defines a point on the glyph that should be matched */
<span class="lineNum">    1537 </span>            : /* GT: with the &quot;Cursive Entry&quot; point of the following glyph. This allows */
<span class="lineNum">    1538 </span>            : /* GT: scripts such as Urdu to work */
<span class="lineNum">    1539 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;CursExit&quot;);</span>
<span class="lineNum">    1540 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1541 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1542 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = gcd[j-2].gd.pos.x; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y;</span>
<span class="lineNum">    1543 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1544 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_CursExit;</span>
<span class="lineNum">    1545 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_TypeChanged;</span>
<span class="lineNum">    1546 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    1547 </span><span class="lineNoCov">          0 :         hvarray[7] = &amp;gcd[j]; hvarray[8] = NULL; hvarray[9] = NULL;</span>
<span class="lineNum">    1548 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1549 </span>            : 
<span class="lineNum">    1550 </span><span class="lineNoCov">          0 :         boxes[4].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1551 </span><span class="lineNoCov">          0 :         boxes[4].gd.u.boxelements = hvarray;</span>
<span class="lineNum">    1552 </span><span class="lineNoCov">          0 :         boxes[4].creator = GHVBoxCreate;</span>
<span class="lineNum">    1553 </span><span class="lineNoCov">          0 :         varray[6] = &amp;boxes[4]; varray[7] = NULL;</span>
<span class="lineNum">    1554 </span>            : 
<span class="lineNum">    1555 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Lig Index:&quot;);</span>
<span class="lineNum">    1556 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1557 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1558 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 5; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+26;</span>
<span class="lineNum">    1559 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1560 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    1561 </span><span class="lineNoCov">          0 :         harray3[0] = &amp;gcd[j];</span>
<span class="lineNum">    1562 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1563 </span>            : 
<span class="lineNum">    1564 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 65; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-4;</span>
<span class="lineNum">    1565 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.width = 50;</span>
<span class="lineNum">    1566 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1567 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_LigIndex;</span>
<span class="lineNum">    1568 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_LigIndexChanged;</span>
<span class="lineNum">    1569 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    1570 </span><span class="lineNoCov">          0 :         harray3[1] = &amp;gcd[j]; harray3[2] = NULL;</span>
<span class="lineNum">    1571 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1572 </span>            : 
<span class="lineNum">    1573 </span><span class="lineNoCov">          0 :         boxes[5].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1574 </span><span class="lineNoCov">          0 :         boxes[5].gd.u.boxelements = harray3;</span>
<span class="lineNum">    1575 </span><span class="lineNoCov">          0 :         boxes[5].creator = GHBoxCreate;</span>
<span class="lineNum">    1576 </span><span class="lineNoCov">          0 :         varray[8] = &amp;boxes[5]; varray[9] = NULL;</span>
<span class="lineNum">    1577 </span>            : 
<span class="lineNum">    1578 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) S_(&quot;AnchorPoint|_New&quot;);</span>
<span class="lineNum">    1579 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1580 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    1581 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1582 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 5; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+30;</span>
<span class="lineNum">    1583 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.width = -1;</span>
<span class="lineNum">    1584 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1585 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_New;</span>
<span class="lineNum">    1586 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_New;</span>
<span class="lineNum">    1587 </span><span class="lineNoCov">          0 :         gcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    1588 </span><span class="lineNoCov">          0 :         harray4[0] = &amp;gcd[j]; harray4[1] = GCD_Glue;</span>
<span class="lineNum">    1589 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1590 </span>            : 
<span class="lineNum">    1591 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) S_(&quot;AnchorClass|New _Class&quot;);</span>
<span class="lineNum">    1592 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1593 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    1594 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1595 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 30; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y;</span>
<span class="lineNum">    1596 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.width = -1;</span>
<span class="lineNum">    1597 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1598 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_New;</span>
<span class="lineNum">    1599 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_NewClass;</span>
<span class="lineNum">    1600 </span><span class="lineNoCov">          0 :         gcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    1601 </span><span class="lineNoCov">          0 :         harray4[2] = &amp;gcd[j]; harray4[3] = GCD_Glue;</span>
<span class="lineNum">    1602 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1603 </span>            : 
<span class="lineNum">    1604 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_Delete&quot;);</span>
<span class="lineNum">    1605 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1606 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    1607 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1608 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = -5; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y;</span>
<span class="lineNum">    1609 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.width = -1;</span>
<span class="lineNum">    1610 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1611 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Delete;</span>
<span class="lineNum">    1612 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_Delete;</span>
<span class="lineNum">    1613 </span><span class="lineNoCov">          0 :         gcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    1614 </span><span class="lineNoCov">          0 :         harray4[4] = &amp;gcd[j]; harray4[5] = NULL;</span>
<span class="lineNum">    1615 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1616 </span>            : 
<span class="lineNum">    1617 </span><span class="lineNoCov">          0 :         boxes[6].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1618 </span><span class="lineNoCov">          0 :         boxes[6].gd.u.boxelements = harray4;</span>
<span class="lineNum">    1619 </span><span class="lineNoCov">          0 :         boxes[6].creator = GHBoxCreate;</span>
<span class="lineNum">    1620 </span><span class="lineNoCov">          0 :         varray[10] = &amp;boxes[6]; varray[11] = NULL;</span>
<span class="lineNum">    1621 </span>            : 
<span class="lineNum">    1622 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;&lt; _Prev&quot;);</span>
<span class="lineNum">    1623 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1624 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    1625 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1626 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 15; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+28;</span>
<span class="lineNum">    1627 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.width = -1;</span>
<span class="lineNum">    1628 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1629 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Prev;</span>
<span class="lineNum">    1630 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_Prev;</span>
<span class="lineNum">    1631 </span><span class="lineNoCov">          0 :         gcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    1632 </span><span class="lineNoCov">          0 :         harray5[0] = GCD_Glue; harray5[1] = &amp;gcd[j]; harray5[2] = GCD_Glue;</span>
<span class="lineNum">    1633 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1634 </span>            : 
<span class="lineNum">    1635 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_Next &gt;&quot;);</span>
<span class="lineNum">    1636 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1637 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    1638 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1639 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = -15; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y;</span>
<span class="lineNum">    1640 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.width = -1;</span>
<span class="lineNum">    1641 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1642 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Next;</span>
<span class="lineNum">    1643 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_Next;</span>
<span class="lineNum">    1644 </span><span class="lineNoCov">          0 :         gcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    1645 </span><span class="lineNoCov">          0 :         harray5[3] = &amp;gcd[j]; harray5[4] = GCD_Glue; harray5[5] = NULL;</span>
<span class="lineNum">    1646 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1647 </span>            : 
<span class="lineNum">    1648 </span><span class="lineNoCov">          0 :         boxes[7].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1649 </span><span class="lineNoCov">          0 :         boxes[7].gd.u.boxelements = harray5;</span>
<span class="lineNum">    1650 </span><span class="lineNoCov">          0 :         boxes[7].creator = GHBoxCreate;</span>
<span class="lineNum">    1651 </span><span class="lineNoCov">          0 :         varray[12] = &amp;boxes[7]; varray[13] = NULL;</span>
<span class="lineNum">    1652 </span>            : 
<span class="lineNum">    1653 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 5; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+26;</span>
<span class="lineNum">    1654 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.width = AI_Width-10;</span>
<span class="lineNum">    1655 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1656 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLineCreate;</span>
<span class="lineNum">    1657 </span><span class="lineNoCov">          0 :         varray[14] = GCD_Glue; varray[15] = NULL;</span>
<span class="lineNum">    1658 </span><span class="lineNoCov">          0 :         varray[16] = &amp;gcd[j]; varray[17] = NULL;</span>
<span class="lineNum">    1659 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1660 </span>            : 
<span class="lineNum">    1661 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_OK&quot;);</span>
<span class="lineNum">    1662 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1663 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    1664 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1665 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 5; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+4;</span>
<span class="lineNum">    1666 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.width = -1;</span>
<span class="lineNum">    1667 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible|gg_but_default;</span>
<span class="lineNum">    1668 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_Ok;</span>
<span class="lineNum">    1669 </span><span class="lineNoCov">          0 :         gcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    1670 </span><span class="lineNoCov">          0 :         harray6[0] = &amp;gcd[j]; harray6[1] = GCD_Glue;</span>
<span class="lineNum">    1671 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1672 </span>            : 
<span class="lineNum">    1673 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_Cancel&quot;);</span>
<span class="lineNum">    1674 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    1675 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    1676 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    1677 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = -5; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+3;</span>
<span class="lineNum">    1678 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.width = -1;</span>
<span class="lineNum">    1679 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible|gg_but_cancel;</span>
<span class="lineNum">    1680 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = AI_Cancel;</span>
<span class="lineNum">    1681 </span><span class="lineNoCov">          0 :         gcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    1682 </span><span class="lineNoCov">          0 :         harray6[2] = &amp;gcd[j]; harray6[3] = NULL;</span>
<span class="lineNum">    1683 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    1684 </span>            : 
<span class="lineNum">    1685 </span><span class="lineNoCov">          0 :         boxes[8].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1686 </span><span class="lineNoCov">          0 :         boxes[8].gd.u.boxelements = harray6;</span>
<span class="lineNum">    1687 </span><span class="lineNoCov">          0 :         boxes[8].creator = GHBoxCreate;</span>
<span class="lineNum">    1688 </span><span class="lineNoCov">          0 :         varray[18] = &amp;boxes[8]; varray[19] = NULL;</span>
<span class="lineNum">    1689 </span><span class="lineNoCov">          0 :         varray[20] = NULL;</span>
<span class="lineNum">    1690 </span>            : 
<span class="lineNum">    1691 </span><span class="lineNoCov">          0 :         boxes[0].gd.pos.x = boxes[0].gd.pos.y = 2;</span>
<span class="lineNum">    1692 </span><span class="lineNoCov">          0 :         boxes[0].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    1693 </span><span class="lineNoCov">          0 :         boxes[0].gd.u.boxelements = varray;</span>
<span class="lineNum">    1694 </span><span class="lineNoCov">          0 :         boxes[0].creator = GHVGroupCreate;</span>
<span class="lineNum">    1695 </span>            : 
<span class="lineNum">    1696 </span><span class="lineNoCov">          0 :         GGadgetsCreate(gi.gw,boxes);</span>
<span class="lineNum">    1697 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableRow(boxes[0].ret,gb_expandglue);</span>
<span class="lineNum">    1698 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(boxes[8].ret,gb_expandgluesame);</span>
<span class="lineNum">    1699 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(boxes[7].ret,gb_expandgluesame);</span>
<span class="lineNum">    1700 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(boxes[6].ret,gb_expandgluesame);</span>
<span class="lineNum">    1701 </span><span class="lineNoCov">          0 :         GHVBoxFitWindow(boxes[0].ret);</span>
<span class="lineNum">    1702 </span>            : 
<span class="lineNum">    1703 </span><span class="lineNoCov">          0 :         GGadgetSetList(GWidgetGetControl(gi.gw,CID_NameList),</span>
<span class="lineNum">    1704 </span><span class="lineNoCov">          0 :                     ti = AnchorClassesLList(gi.sc-&gt;parent),false);</span>
<span class="lineNum">    1705 </span><span class="lineNoCov">          0 :         for ( j=0; ti[j]-&gt;text!=NULL &amp;&amp; ti[j]-&gt;userdata!=ap-&gt;anchor; ++j )</span>
<span class="lineNum">    1706 </span><span class="lineNoCov">          0 :         GGadgetSelectOneListItem(GWidgetGetControl(gi.gw,CID_NameList),j);</span>
<span class="lineNum">    1707 </span>            : 
<span class="lineNum">    1708 </span><span class="lineNoCov">          0 :         AI_Display(&amp;gi,ap);</span>
<span class="lineNum">    1709 </span><span class="lineNoCov">          0 :         GWidgetIndicateFocusGadget(GWidgetGetControl(gi.gw,CID_X));</span>
<span class="lineNum">    1710 </span>            : 
<span class="lineNum">    1711 </span><span class="lineNoCov">          0 :     GWidgetHidePalettes();</span>
<span class="lineNum">    1712 </span><span class="lineNoCov">          0 :     GDrawSetVisible(gi.gw,true);</span>
<span class="lineNum">    1713 </span><span class="lineNoCov">          0 :     while ( !gi.done )</span>
<span class="lineNum">    1714 </span><span class="lineNoCov">          0 :         GDrawProcessOneEvent(NULL);</span>
<span class="lineNum">    1715 </span><span class="lineNoCov">          0 :     GDrawDestroyWindow(gi.gw);</span>
<span class="lineNum">    1716 </span><span class="lineNoCov">          0 :     AnchorPointsFree(gi.oldaps);</span>
<a name="1717"><span class="lineNum">    1717 </span>            : }</a>
<span class="lineNum">    1718 </span>            : 
<span class="lineNum">    1719 </span><span class="lineNoCov">          0 : void PI_ShowHints(SplineChar *sc, GGadget *list, int set) {</span>
<span class="lineNum">    1720 </span>            :     StemInfo *h;
<span class="lineNum">    1721 </span>            :     int32 i, len;
<span class="lineNum">    1722 </span>            : 
<span class="lineNum">    1723 </span><span class="lineNoCov">          0 :     if ( !set ) {</span>
<span class="lineNum">    1724 </span><span class="lineNoCov">          0 :         for ( h = sc-&gt;hstem; h!=NULL; h=h-&gt;next )</span>
<span class="lineNum">    1725 </span><span class="lineNoCov">          0 :             h-&gt;active = false;</span>
<span class="lineNum">    1726 </span><span class="lineNoCov">          0 :         for ( h = sc-&gt;vstem; h!=NULL; h=h-&gt;next )</span>
<span class="lineNum">    1727 </span><span class="lineNoCov">          0 :             h-&gt;active = false;</span>
<span class="lineNum">    1728 </span>            :     } else {
<span class="lineNum">    1729 </span><span class="lineNoCov">          0 :         GTextInfo **ti = GGadgetGetList(list,&amp;len);</span>
<span class="lineNum">    1730 </span><span class="lineNoCov">          0 :         for ( h = sc-&gt;hstem, i=0; h!=NULL &amp;&amp; i&lt;len; h=h-&gt;next, ++i )</span>
<span class="lineNum">    1731 </span><span class="lineNoCov">          0 :             h-&gt;active = ti[i]-&gt;selected;</span>
<span class="lineNum">    1732 </span><span class="lineNoCov">          0 :         for ( h = sc-&gt;vstem; h!=NULL &amp;&amp; i&lt;len; h=h-&gt;next, ++i )</span>
<span class="lineNum">    1733 </span><span class="lineNoCov">          0 :             h-&gt;active = ti[i]-&gt;selected;</span>
<span class="lineNum">    1734 </span>            :     }
<span class="lineNum">    1735 </span><span class="lineNoCov">          0 :     SCOutOfDateBackground(sc);</span>
<span class="lineNum">    1736 </span><span class="lineNoCov">          0 :     SCUpdateAll(sc);</span>
<a name="1737"><span class="lineNum">    1737 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1738 </span>            : 
<span class="lineNum">    1739 </span><span class="lineNoCov">          0 : static void _PI_ShowHints(GIData *ci,int set) {</span>
<span class="lineNum">    1740 </span><span class="lineNoCov">          0 :     PI_ShowHints(ci-&gt;cv-&gt;b.sc,GWidgetGetControl(ci-&gt;gw,CID_HintMask),set);</span>
<a name="1741"><span class="lineNum">    1741 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1742 </span>            : 
<span class="lineNum">    1743 </span><span class="lineNoCov">          0 : static void PI_DoCancel(GIData *ci) {</span>
<span class="lineNum">    1744 </span><span class="lineNoCov">          0 :     CharView *cv = ci-&gt;cv;</span>
<span class="lineNum">    1745 </span><span class="lineNoCov">          0 :     ci-&gt;done = true;</span>
<span class="lineNum">    1746 </span><span class="lineNoCov">          0 :     if ( cv-&gt;b.drawmode==dm_fore )</span>
<span class="lineNum">    1747 </span><span class="lineNoCov">          0 :         MDReplace(cv-&gt;b.sc-&gt;md,cv-&gt;b.sc-&gt;layers[ly_fore].splines,ci-&gt;oldstate);</span>
<span class="lineNum">    1748 </span><span class="lineNoCov">          0 :     SplinePointListsFree(cv-&gt;b.layerheads[cv-&gt;b.drawmode]-&gt;splines);</span>
<span class="lineNum">    1749 </span><span class="lineNoCov">          0 :     cv-&gt;b.layerheads[cv-&gt;b.drawmode]-&gt;splines = ci-&gt;oldstate;</span>
<span class="lineNum">    1750 </span><span class="lineNoCov">          0 :     CVRemoveTopUndo(&amp;cv-&gt;b);</span>
<span class="lineNum">    1751 </span><span class="lineNoCov">          0 :     SCClearSelPt(cv-&gt;b.sc);</span>
<span class="lineNum">    1752 </span><span class="lineNoCov">          0 :     _PI_ShowHints(ci,false);</span>
<span class="lineNum">    1753 </span><span class="lineNoCov">          0 :     SCUpdateAll(cv-&gt;b.sc);</span>
<a name="1754"><span class="lineNum">    1754 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1755 </span>            : 
<span class="lineNum">    1756 </span><span class="lineNoCov">          0 : static int pi_e_h(GWindow gw, GEvent *event) {</span>
<span class="lineNum">    1757 </span><span class="lineNoCov">          0 :     if ( event-&gt;type==et_close ) {</span>
<span class="lineNum">    1758 </span><span class="lineNoCov">          0 :         GIData  *d = GDrawGetUserData(gw);</span>
<span class="lineNum">    1759 </span><span class="lineNoCov">          0 :         if( d-&gt;nonmodal ) {</span>
<span class="lineNum">    1760 </span><span class="lineNoCov">          0 :             PI_Destroy((struct dlistnode *)d);</span>
<span class="lineNum">    1761 </span>            :         } else {
<span class="lineNum">    1762 </span><span class="lineNoCov">          0 :             PI_DoCancel( GDrawGetUserData(gw));</span>
<span class="lineNum">    1763 </span>            :         }
<span class="lineNum">    1764 </span><span class="lineNoCov">          0 :     } else if ( event-&gt;type==et_char ) {</span>
<span class="lineNum">    1765 </span><span class="lineNoCov">          0 :         if ( event-&gt;u.chr.keysym == GK_F1 || event-&gt;u.chr.keysym == GK_Help ) {</span>
<span class="lineNum">    1766 </span><span class="lineNoCov">          0 :             help(&quot;getinfo.html&quot;);</span>
<span class="lineNum">    1767 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    1768 </span>            :         }
<span class="lineNum">    1769 </span><span class="lineNoCov">          0 : return( false );</span>
<span class="lineNum">    1770 </span><span class="lineNoCov">          0 :     } else if ( event-&gt;type == et_map ) {</span>
<span class="lineNum">    1771 </span>            :         /* Above palettes */
<span class="lineNum">    1772 </span><span class="lineNoCov">          0 :         GDrawRaise(gw);</span>
<span class="lineNum">    1773 </span>            :     }
<span class="lineNum">    1774 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    1775 </span>            : }
<span class="lineNum">    1776 </span>            : 
<a name="1777"><span class="lineNum">    1777 </span>            : static void PIFillup(GIData *ci, int except_cid);</a>
<span class="lineNum">    1778 </span>            : 
<span class="lineNum">    1779 </span><span class="lineNoCov">          0 : static void PI_FigureNext(GIData *ci) {</span>
<span class="lineNum">    1780 </span><span class="lineNoCov">          0 :     if ( ci-&gt;prevchanged ) {</span>
<span class="lineNum">    1781 </span><span class="lineNoCov">          0 :         SplinePoint *cursp = ci-&gt;cursp;</span>
<span class="lineNum">    1782 </span><span class="lineNoCov">          0 :         if ( !ci-&gt;cv-&gt;b.layerheads[ci-&gt;cv-&gt;b.drawmode]-&gt;order2 &amp;&amp; (cursp-&gt;pointtype==pt_curve || cursp-&gt;pointtype==pt_hvcurve)) {</span>
<span class="lineNum">    1783 </span>            :             double dx, dy, len, len2;
<span class="lineNum">    1784 </span><span class="lineNoCov">          0 :             dx = cursp-&gt;prevcp.x - cursp-&gt;me.x;</span>
<span class="lineNum">    1785 </span><span class="lineNoCov">          0 :             dy = cursp-&gt;prevcp.y - cursp-&gt;me.y;</span>
<span class="lineNum">    1786 </span><span class="lineNoCov">          0 :             len = sqrt(dx*dx+dy*dy);</span>
<span class="lineNum">    1787 </span><span class="lineNoCov">          0 :             if ( len!=0 ) {</span>
<span class="lineNum">    1788 </span><span class="lineNoCov">          0 :                 len2 = sqrt((cursp-&gt;nextcp.x-cursp-&gt;me.x)*(cursp-&gt;nextcp.x-cursp-&gt;me.x)+</span>
<span class="lineNum">    1789 </span><span class="lineNoCov">          0 :                         (cursp-&gt;nextcp.y-cursp-&gt;me.y)*(cursp-&gt;nextcp.y-cursp-&gt;me.y));</span>
<span class="lineNum">    1790 </span><span class="lineNoCov">          0 :                 cursp-&gt;nextcp.x=cursp-&gt;me.x-dx*len2/len;</span>
<span class="lineNum">    1791 </span><span class="lineNoCov">          0 :                 cursp-&gt;nextcp.y=cursp-&gt;me.y-dy*len2/len;</span>
<span class="lineNum">    1792 </span><span class="lineNoCov">          0 :                 if ( cursp-&gt;next!=NULL )</span>
<span class="lineNum">    1793 </span><span class="lineNoCov">          0 :                     SplineRefigure(cursp-&gt;next);</span>
<span class="lineNum">    1794 </span><span class="lineNoCov">          0 :                 CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b);</span>
<span class="lineNum">    1795 </span><span class="lineNoCov">          0 :                 PIFillup(ci,-1);</span>
<span class="lineNum">    1796 </span>            :             }
<span class="lineNum">    1797 </span>            :         }
<span class="lineNum">    1798 </span>            :     }
<span class="lineNum">    1799 </span><span class="lineNoCov">          0 :     ci-&gt;prevchanged = false;</span>
<a name="1800"><span class="lineNum">    1800 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1801 </span>            : 
<span class="lineNum">    1802 </span><span class="lineNoCov">          0 : static void PI_FigurePrev(GIData *ci) {</span>
<span class="lineNum">    1803 </span><span class="lineNoCov">          0 :     if ( ci-&gt;nextchanged ) {</span>
<span class="lineNum">    1804 </span><span class="lineNoCov">          0 :         SplinePoint *cursp = ci-&gt;cursp;</span>
<span class="lineNum">    1805 </span><span class="lineNoCov">          0 :         if ( !ci-&gt;cv-&gt;b.layerheads[ci-&gt;cv-&gt;b.drawmode]-&gt;order2 &amp;&amp; (cursp-&gt;pointtype==pt_curve || cursp-&gt;pointtype==pt_hvcurve)) {</span>
<span class="lineNum">    1806 </span>            :             double dx, dy, len, len2;
<span class="lineNum">    1807 </span><span class="lineNoCov">          0 :             dx = cursp-&gt;nextcp.x - cursp-&gt;me.x;</span>
<span class="lineNum">    1808 </span><span class="lineNoCov">          0 :             dy = cursp-&gt;nextcp.y - cursp-&gt;me.y;</span>
<span class="lineNum">    1809 </span><span class="lineNoCov">          0 :             len = sqrt(dx*dx+dy*dy);</span>
<span class="lineNum">    1810 </span><span class="lineNoCov">          0 :             if ( len!=0 ) {</span>
<span class="lineNum">    1811 </span><span class="lineNoCov">          0 :                 len2 = sqrt((cursp-&gt;prevcp.x-cursp-&gt;me.x)*(cursp-&gt;prevcp.x-cursp-&gt;me.x)+</span>
<span class="lineNum">    1812 </span><span class="lineNoCov">          0 :                         (cursp-&gt;prevcp.y-cursp-&gt;me.y)*(cursp-&gt;prevcp.y-cursp-&gt;me.y));</span>
<span class="lineNum">    1813 </span><span class="lineNoCov">          0 :                 cursp-&gt;prevcp.x=cursp-&gt;me.x-dx*len2/len;</span>
<span class="lineNum">    1814 </span><span class="lineNoCov">          0 :                 cursp-&gt;prevcp.y=cursp-&gt;me.y-dy*len2/len;</span>
<span class="lineNum">    1815 </span><span class="lineNoCov">          0 :                 if ( cursp-&gt;prev!=NULL )</span>
<span class="lineNum">    1816 </span><span class="lineNoCov">          0 :                     SplineRefigure(cursp-&gt;prev);</span>
<span class="lineNum">    1817 </span><span class="lineNoCov">          0 :                 CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b);</span>
<span class="lineNum">    1818 </span><span class="lineNoCov">          0 :                 PIFillup(ci,-1);</span>
<span class="lineNum">    1819 </span>            :             }
<span class="lineNum">    1820 </span>            :         }
<span class="lineNum">    1821 </span>            :     }
<span class="lineNum">    1822 </span><span class="lineNoCov">          0 :     ci-&gt;nextchanged = false;</span>
<a name="1823"><span class="lineNum">    1823 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1824 </span>            : 
<span class="lineNum">    1825 </span><span class="lineNoCov">          0 : static void PI_FigureHintMask(GIData *ci) {</span>
<span class="lineNum">    1826 </span>            :     int32 i, len;
<span class="lineNum">    1827 </span><span class="lineNoCov">          0 :     GTextInfo **ti = GGadgetGetList(GWidgetGetControl(ci-&gt;gw,CID_HintMask),&amp;len);</span>
<span class="lineNum">    1828 </span>            : 
<span class="lineNum">    1829 </span><span class="lineNoCov">          0 :     for ( i=0; i&lt;len; ++i )</span>
<span class="lineNum">    1830 </span><span class="lineNoCov">          0 :         if ( ti[i]-&gt;selected )</span>
<span class="lineNum">    1831 </span><span class="lineNoCov">          0 :     break;</span>
<span class="lineNum">    1832 </span>            : 
<span class="lineNum">    1833 </span><span class="lineNoCov">          0 :     if ( i==len ) {</span>
<span class="lineNum">    1834 </span><span class="lineNoCov">          0 :         chunkfree(ci-&gt;cursp-&gt;hintmask,sizeof(HintMask));</span>
<span class="lineNum">    1835 </span><span class="lineNoCov">          0 :         ci-&gt;cursp-&gt;hintmask = NULL;</span>
<span class="lineNum">    1836 </span>            :     } else {
<span class="lineNum">    1837 </span><span class="lineNoCov">          0 :         if ( ci-&gt;cursp-&gt;hintmask==NULL )</span>
<span class="lineNum">    1838 </span><span class="lineNoCov">          0 :             ci-&gt;cursp-&gt;hintmask = chunkalloc(sizeof(HintMask));</span>
<span class="lineNum">    1839 </span>            :         else
<span class="lineNum">    1840 </span><span class="lineNoCov">          0 :             memset(ci-&gt;cursp-&gt;hintmask,0,sizeof(HintMask));</span>
<span class="lineNum">    1841 </span><span class="lineNoCov">          0 :         for ( i=0; i&lt;len; ++i )</span>
<span class="lineNum">    1842 </span><span class="lineNoCov">          0 :             if ( ti[i]-&gt;selected )</span>
<span class="lineNum">    1843 </span><span class="lineNoCov">          0 :                 (*ci-&gt;cursp-&gt;hintmask)[i&gt;&gt;3] |= (0x80&gt;&gt;(i&amp;7));</span>
<span class="lineNum">    1844 </span>            :     }
<a name="1845"><span class="lineNum">    1845 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1846 </span>            : 
<span class="lineNum">    1847 </span><span class="lineNoCov">          0 : static void PI_FixStuff(GIData *ci) {</span>
<span class="lineNum">    1848 </span><span class="lineNoCov">          0 :     SplinePoint *sp = ci-&gt;cursp;</span>
<span class="lineNum">    1849 </span>            : 
<span class="lineNum">    1850 </span><span class="lineNoCov">          0 :     PI_FigureHintMask(ci);</span>
<span class="lineNum">    1851 </span><span class="lineNoCov">          0 :     PI_FigureNext(ci);</span>
<span class="lineNum">    1852 </span><span class="lineNoCov">          0 :     PI_FigurePrev(ci);</span>
<span class="lineNum">    1853 </span>            : 
<span class="lineNum">    1854 </span><span class="lineNoCov">          0 :     if ( sp-&gt;pointtype == pt_hvcurve ) {</span>
<span class="lineNum">    1855 </span><span class="lineNoCov">          0 :         if (</span>
<span class="lineNum">    1856 </span><span class="lineNoCov">          0 :                 ((sp-&gt;nextcp.x==sp-&gt;me.x &amp;&amp; sp-&gt;prevcp.x==sp-&gt;me.x &amp;&amp; sp-&gt;nextcp.y!=sp-&gt;me.y) ||</span>
<span class="lineNum">    1857 </span><span class="lineNoCov">          0 :                  (sp-&gt;nextcp.y==sp-&gt;me.y &amp;&amp; sp-&gt;prevcp.y==sp-&gt;me.y &amp;&amp; sp-&gt;nextcp.x!=sp-&gt;me.x)))</span>
<span class="lineNum">    1858 </span>            :             /* Do Nothing */;
<span class="lineNum">    1859 </span>            :         else
<span class="lineNum">    1860 </span><span class="lineNoCov">          0 :             sp-&gt;pointtype = pt_curve;</span>
<span class="lineNum">    1861 </span><span class="lineNoCov">          0 :     } else if ( sp-&gt;pointtype == pt_tangent )</span>
<span class="lineNum">    1862 </span><span class="lineNoCov">          0 :         SplinePointCategorize(sp);      /* Users can change cps so it isn't a tangent, so check */</span>
<a name="1863"><span class="lineNum">    1863 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1864 </span>            : 
<span class="lineNum">    1865 </span><span class="lineNoCov">          0 : void PI_Destroy(struct dlistnode *node) {</span>
<span class="lineNum">    1866 </span><span class="lineNoCov">          0 :     GIData *d = (GIData *)node;</span>
<span class="lineNum">    1867 </span><span class="lineNoCov">          0 :     GDrawDestroyWindow(d-&gt;gw);</span>
<span class="lineNum">    1868 </span><span class="lineNoCov">          0 :     dlist_erase(&amp;d-&gt;cv-&gt;pointInfoDialogs,(struct dlistnode *)d);</span>
<span class="lineNum">    1869 </span><span class="lineNoCov">          0 :     free(d);</span>
<a name="1870"><span class="lineNum">    1870 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1871 </span>            : 
<span class="lineNum">    1872 </span><span class="lineNoCov">          0 : static void PI_Close(GGadget *g) {</span>
<span class="lineNum">    1873 </span><span class="lineNoCov">          0 :     GWindow gw = GGadgetGetWindow(g);</span>
<span class="lineNum">    1874 </span><span class="lineNoCov">          0 :     GIData  *d = GDrawGetUserData(gw);</span>
<span class="lineNum">    1875 </span><span class="lineNoCov">          0 :     PI_Destroy((struct dlistnode *)d);</span>
<a name="1876"><span class="lineNum">    1876 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1877 </span>            : 
<span class="lineNum">    1878 </span><span class="lineNoCov">          0 : static int PI_Cancel(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    1879 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_buttonactivate ) {</span>
<span class="lineNum">    1880 </span><span class="lineNoCov">          0 :         PI_DoCancel( GDrawGetUserData(GGadgetGetWindow(g)));</span>
<span class="lineNum">    1881 </span><span class="lineNoCov">          0 :         PI_Close(g);</span>
<span class="lineNum">    1882 </span>            :     }
<span class="lineNum">    1883 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="1884"><span class="lineNum">    1884 </span>            : }</a>
<span class="lineNum">    1885 </span>            : 
<span class="lineNum">    1886 </span><span class="lineNoCov">          0 : static int PI_Ok(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    1887 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_buttonactivate ) {</span>
<span class="lineNum">    1888 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    1889 </span>            : 
<span class="lineNum">    1890 </span><span class="lineNoCov">          0 :         PI_FixStuff(ci);</span>
<span class="lineNum">    1891 </span><span class="lineNoCov">          0 :         _PI_ShowHints(ci,false);</span>
<span class="lineNum">    1892 </span>            : 
<span class="lineNum">    1893 </span><span class="lineNoCov">          0 :         ci-&gt;done = true;</span>
<span class="lineNum">    1894 </span>            :         /* All the work has been done as we've gone along */
<span class="lineNum">    1895 </span><span class="lineNoCov">          0 :         PI_Close(g);</span>
<span class="lineNum">    1896 </span>            :     }
<span class="lineNum">    1897 </span>            : 
<span class="lineNum">    1898 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="1899"><span class="lineNum">    1899 </span>            : }</a>
<span class="lineNum">    1900 </span>            : 
<span class="lineNum">    1901 </span><span class="lineNoCov">          0 : static void mysprintf( char *buffer, char *format, real v) {</span>
<span class="lineNum">    1902 </span>            :     char *pt;
<span class="lineNum">    1903 </span>            : 
<span class="lineNum">    1904 </span><span class="lineNoCov">          0 :     if ( v&lt;.0001 &amp;&amp; v&gt;-.0001 &amp;&amp; v!=0 )</span>
<span class="lineNum">    1905 </span><span class="lineNoCov">          0 :         sprintf( buffer, &quot;%e&quot;, (double) v );</span>
<span class="lineNum">    1906 </span><span class="lineNoCov">          0 :     else if ( v&lt;1 &amp;&amp; v&gt;0 )</span>
<span class="lineNum">    1907 </span><span class="lineNoCov">          0 :         sprintf( buffer, &quot;%f&quot;, (double) v );</span>
<span class="lineNum">    1908 </span><span class="lineNoCov">          0 :     else if ( v&lt;0 &amp;&amp; v&gt;-1 )</span>
<span class="lineNum">    1909 </span><span class="lineNoCov">          0 :         sprintf( buffer, &quot;%.5f&quot;, (double) v );</span>
<span class="lineNum">    1910 </span>            :     else
<span class="lineNum">    1911 </span><span class="lineNoCov">          0 :         sprintf( buffer, format, (double) v );</span>
<span class="lineNum">    1912 </span><span class="lineNoCov">          0 :     pt = buffer + strlen(buffer);</span>
<span class="lineNum">    1913 </span><span class="lineNoCov">          0 :     while ( pt&gt;buffer &amp;&amp; pt[-1]=='0' )</span>
<span class="lineNum">    1914 </span><span class="lineNoCov">          0 :         *--pt = '\0';</span>
<span class="lineNum">    1915 </span><span class="lineNoCov">          0 :     if ( pt&gt;buffer &amp;&amp; pt[-1]=='.' )</span>
<span class="lineNum">    1916 </span><span class="lineNoCov">          0 :         pt[-1] = '\0';</span>
<a name="1917"><span class="lineNum">    1917 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1918 </span>            : 
<span class="lineNum">    1919 </span><span class="lineNoCov">          0 : static void mysprintf2( char *buffer, real v1, real v2) {</span>
<span class="lineNum">    1920 </span>            :     char *pt;
<span class="lineNum">    1921 </span>            : 
<span class="lineNum">    1922 </span><span class="lineNoCov">          0 :     mysprintf(buffer,&quot;%.2f&quot;, v1);</span>
<span class="lineNum">    1923 </span><span class="lineNoCov">          0 :     pt = buffer+strlen(buffer);</span>
<span class="lineNum">    1924 </span><span class="lineNoCov">          0 :     *pt++ = ',';</span>
<span class="lineNum">    1925 </span><span class="lineNoCov">          0 :     mysprintf(pt,&quot;%.2f&quot;, v2);</span>
<a name="1926"><span class="lineNum">    1926 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1927 </span>            : 
<span class="lineNum">    1928 </span><span class="lineNoCov">          0 : static void PIFillup(GIData *ci, int except_cid) {</span>
<span class="lineNum">    1929 </span>            :     char buffer[51];
<span class="lineNum">    1930 </span>            :     double dx, dy;
<span class="lineNum">    1931 </span>            :     double kappa, kappa2;
<span class="lineNum">    1932 </span>            :     int emsize;
<span class="lineNum">    1933 </span>            : 
<span class="lineNum">    1934 </span><span class="lineNoCov">          0 :     mysprintf(buffer, &quot;%.2f&quot;, ci-&gt;cursp-&gt;me.x );</span>
<span class="lineNum">    1935 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_BaseX )</span>
<span class="lineNum">    1936 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_BaseX),buffer);</span>
<span class="lineNum">    1937 </span>            : 
<span class="lineNum">    1938 </span><span class="lineNoCov">          0 :     mysprintf(buffer, &quot;%.2f&quot;, ci-&gt;cursp-&gt;me.y );</span>
<span class="lineNum">    1939 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_BaseY )</span>
<span class="lineNum">    1940 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_BaseY),buffer);</span>
<span class="lineNum">    1941 </span>            : 
<span class="lineNum">    1942 </span><span class="lineNoCov">          0 :     dx = ci-&gt;cursp-&gt;nextcp.x-ci-&gt;cursp-&gt;me.x;</span>
<span class="lineNum">    1943 </span><span class="lineNoCov">          0 :     dy = ci-&gt;cursp-&gt;nextcp.y-ci-&gt;cursp-&gt;me.y;</span>
<span class="lineNum">    1944 </span><span class="lineNoCov">          0 :     mysprintf(buffer, &quot;%.2f&quot;, dx );</span>
<span class="lineNum">    1945 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_NextXOff )</span>
<span class="lineNum">    1946 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_NextXOff),buffer);</span>
<span class="lineNum">    1947 </span>            : 
<span class="lineNum">    1948 </span><span class="lineNoCov">          0 :     mysprintf(buffer, &quot;%.2f&quot;, dy );</span>
<span class="lineNum">    1949 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_NextYOff )</span>
<span class="lineNum">    1950 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_NextYOff),buffer);</span>
<span class="lineNum">    1951 </span>            : 
<span class="lineNum">    1952 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_NextR ) {</span>
<span class="lineNum">    1953 </span><span class="lineNoCov">          0 :         mysprintf(buffer, &quot;%.2f&quot;, sqrt( dx*dx+dy*dy ));</span>
<span class="lineNum">    1954 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_NextR),buffer);</span>
<span class="lineNum">    1955 </span>            :     }
<span class="lineNum">    1956 </span>            : 
<span class="lineNum">    1957 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_NextTheta ) {</span>
<span class="lineNum">    1958 </span><span class="lineNoCov">          0 :         if ( ci-&gt;cursp-&gt;pointtype==pt_tangent &amp;&amp; ci-&gt;cursp-&gt;prev!=NULL ) {</span>
<span class="lineNum">    1959 </span><span class="lineNoCov">          0 :             dx = ci-&gt;cursp-&gt;me.x-ci-&gt;cursp-&gt;prev-&gt;from-&gt;me.x;</span>
<span class="lineNum">    1960 </span><span class="lineNoCov">          0 :             dy = ci-&gt;cursp-&gt;me.y-ci-&gt;cursp-&gt;prev-&gt;from-&gt;me.y;</span>
<span class="lineNum">    1961 </span>            :         }
<span class="lineNum">    1962 </span><span class="lineNoCov">          0 :         mysprintf(buffer, &quot;%.1f&quot;, atan2(dy,dx)*RAD2DEG);</span>
<span class="lineNum">    1963 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_NextTheta),buffer);</span>
<span class="lineNum">    1964 </span>            :     }
<span class="lineNum">    1965 </span>            : 
<span class="lineNum">    1966 </span><span class="lineNoCov">          0 :     mysprintf2(buffer, ci-&gt;cursp-&gt;nextcp.x,ci-&gt;cursp-&gt;nextcp.y );</span>
<span class="lineNum">    1967 </span><span class="lineNoCov">          0 :     GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_NextPos),buffer);</span>
<span class="lineNum">    1968 </span>            : 
<span class="lineNum">    1969 </span><span class="lineNoCov">          0 :     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_NextDef), ci-&gt;cursp-&gt;nextcpdef );</span>
<span class="lineNum">    1970 </span>            : 
<span class="lineNum">    1971 </span><span class="lineNoCov">          0 :     dx = ci-&gt;cursp-&gt;prevcp.x-ci-&gt;cursp-&gt;me.x;</span>
<span class="lineNum">    1972 </span><span class="lineNoCov">          0 :     dy = ci-&gt;cursp-&gt;prevcp.y-ci-&gt;cursp-&gt;me.y;</span>
<span class="lineNum">    1973 </span><span class="lineNoCov">          0 :     mysprintf(buffer, &quot;%.2f&quot;, dx );</span>
<span class="lineNum">    1974 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_PrevXOff )</span>
<span class="lineNum">    1975 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_PrevXOff),buffer);</span>
<span class="lineNum">    1976 </span>            : 
<span class="lineNum">    1977 </span><span class="lineNoCov">          0 :     mysprintf(buffer, &quot;%.2f&quot;, dy );</span>
<span class="lineNum">    1978 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_PrevYOff )</span>
<span class="lineNum">    1979 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_PrevYOff),buffer);</span>
<span class="lineNum">    1980 </span>            : 
<span class="lineNum">    1981 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_PrevR ) {</span>
<span class="lineNum">    1982 </span><span class="lineNoCov">          0 :         mysprintf(buffer, &quot;%.2f&quot;, sqrt( dx*dx+dy*dy ));</span>
<span class="lineNum">    1983 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_PrevR),buffer);</span>
<span class="lineNum">    1984 </span>            :     }
<span class="lineNum">    1985 </span>            : 
<span class="lineNum">    1986 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_PrevTheta ) {</span>
<span class="lineNum">    1987 </span><span class="lineNoCov">          0 :         if ( ci-&gt;cursp-&gt;pointtype==pt_tangent &amp;&amp; ci-&gt;cursp-&gt;next!=NULL ) {</span>
<span class="lineNum">    1988 </span><span class="lineNoCov">          0 :             dx = ci-&gt;cursp-&gt;me.x-ci-&gt;cursp-&gt;next-&gt;to-&gt;me.x;</span>
<span class="lineNum">    1989 </span><span class="lineNoCov">          0 :             dy = ci-&gt;cursp-&gt;me.y-ci-&gt;cursp-&gt;next-&gt;to-&gt;me.y;</span>
<span class="lineNum">    1990 </span>            :         }
<span class="lineNum">    1991 </span><span class="lineNoCov">          0 :         mysprintf(buffer, &quot;%.1f&quot;, atan2(dy,dx)*RAD2DEG);</span>
<span class="lineNum">    1992 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_PrevTheta),buffer);</span>
<span class="lineNum">    1993 </span>            :     }
<span class="lineNum">    1994 </span>            : 
<span class="lineNum">    1995 </span><span class="lineNoCov">          0 :     mysprintf2(buffer, ci-&gt;cursp-&gt;prevcp.x,ci-&gt;cursp-&gt;prevcp.y );</span>
<span class="lineNum">    1996 </span><span class="lineNoCov">          0 :     GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_PrevPos),buffer);</span>
<span class="lineNum">    1997 </span>            : 
<span class="lineNum">    1998 </span>            : 
<span class="lineNum">    1999 </span><span class="lineNoCov">          0 :     mysprintf2(buffer, ci-&gt;cursp-&gt;me.x,ci-&gt;cursp-&gt;me.y );</span>
<span class="lineNum">    2000 </span><span class="lineNoCov">          0 :     GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_BasePos),buffer);</span>
<span class="lineNum">    2001 </span>            : 
<span class="lineNum">    2002 </span><span class="lineNoCov">          0 :     mysprintf(buffer, &quot;%.2f&quot;, ci-&gt;cursp-&gt;nextcp.x );</span>
<span class="lineNum">    2003 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_NextX )</span>
<span class="lineNum">    2004 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_NextX),buffer);</span>
<span class="lineNum">    2005 </span>            : 
<span class="lineNum">    2006 </span><span class="lineNoCov">          0 :     mysprintf(buffer, &quot;%.2f&quot;, ci-&gt;cursp-&gt;nextcp.y );</span>
<span class="lineNum">    2007 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_NextY )</span>
<span class="lineNum">    2008 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_NextY),buffer);</span>
<span class="lineNum">    2009 </span>            : 
<span class="lineNum">    2010 </span><span class="lineNoCov">          0 :     mysprintf(buffer, &quot;%.2f&quot;, ci-&gt;cursp-&gt;prevcp.x );</span>
<span class="lineNum">    2011 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_PrevX )</span>
<span class="lineNum">    2012 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_PrevX),buffer);</span>
<span class="lineNum">    2013 </span>            : 
<span class="lineNum">    2014 </span><span class="lineNoCov">          0 :     mysprintf(buffer, &quot;%.2f&quot;, ci-&gt;cursp-&gt;prevcp.y );</span>
<span class="lineNum">    2015 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_PrevY )</span>
<span class="lineNum">    2016 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_PrevY),buffer);</span>
<span class="lineNum">    2017 </span>            : 
<span class="lineNum">    2018 </span>            : 
<span class="lineNum">    2019 </span><span class="lineNoCov">          0 :     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_PrevDef), ci-&gt;cursp-&gt;prevcpdef );</span>
<span class="lineNum">    2020 </span>            : 
<span class="lineNum">    2021 </span><span class="lineNoCov">          0 :     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_Curve), ci-&gt;cursp-&gt;pointtype==pt_curve );</span>
<span class="lineNum">    2022 </span><span class="lineNoCov">          0 :     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_HVCurve), ci-&gt;cursp-&gt;pointtype==pt_hvcurve );</span>
<span class="lineNum">    2023 </span><span class="lineNoCov">          0 :     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_Corner), ci-&gt;cursp-&gt;pointtype==pt_corner );</span>
<span class="lineNum">    2024 </span><span class="lineNoCov">          0 :     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_Tangent), ci-&gt;cursp-&gt;pointtype==pt_tangent );</span>
<span class="lineNum">    2025 </span>            : 
<span class="lineNum">    2026 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_PrevTheta), ci-&gt;cursp-&gt;pointtype!=pt_tangent );</span>
<span class="lineNum">    2027 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_NextTheta), ci-&gt;cursp-&gt;pointtype!=pt_tangent );</span>
<span class="lineNum">    2028 </span>            : 
<span class="lineNum">    2029 </span><span class="lineNoCov">          0 :     kappa = SplineCurvature(ci-&gt;cursp-&gt;next,0);</span>
<span class="lineNum">    2030 </span><span class="lineNoCov">          0 :     kappa2 = SplineCurvature(ci-&gt;cursp-&gt;prev,1);</span>
<span class="lineNum">    2031 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_PrevCurvature), kappa2!=CURVATURE_ERROR );</span>
<span class="lineNum">    2032 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_NextCurvature), kappa!=CURVATURE_ERROR );</span>
<span class="lineNum">    2033 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_DeltaCurvature),</span>
<span class="lineNum">    2034 </span>            :             kappa!=CURVATURE_ERROR &amp;&amp; kappa2!=CURVATURE_ERROR );
<span class="lineNum">    2035 </span><span class="lineNoCov">          0 :     emsize = ci-&gt;cv-&gt;b.sc-&gt;parent-&gt;ascent + ci-&gt;cv-&gt;b.sc-&gt;parent-&gt;descent;</span>
<span class="lineNum">    2036 </span>            :     /* If we normalize by the em-size, the curvature is often more */
<span class="lineNum">    2037 </span>            :     /*  readable */
<span class="lineNum">    2038 </span><span class="lineNoCov">          0 :     if ( kappa!=CURVATURE_ERROR )</span>
<span class="lineNum">    2039 </span><span class="lineNoCov">          0 :         sprintf( buffer, _(&quot;Curvature: %g&quot;), kappa*emsize );</span>
<span class="lineNum">    2040 </span>            :     else
<span class="lineNum">    2041 </span><span class="lineNoCov">          0 :         strcpy( buffer, _(&quot;Curvature: ?&quot;));</span>
<span class="lineNum">    2042 </span><span class="lineNoCov">          0 :     GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_NextCurvature),buffer);</span>
<span class="lineNum">    2043 </span><span class="lineNoCov">          0 :     if ( kappa2!=CURVATURE_ERROR )</span>
<span class="lineNum">    2044 </span><span class="lineNoCov">          0 :         sprintf( buffer, _(&quot;Curvature: %g&quot;), kappa2*emsize );</span>
<span class="lineNum">    2045 </span>            :     else
<span class="lineNum">    2046 </span><span class="lineNoCov">          0 :         strncpy( buffer, _(&quot;Curvature: ?&quot;),sizeof(buffer)-1 );</span>
<span class="lineNum">    2047 </span><span class="lineNoCov">          0 :     GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_PrevCurvature),buffer);</span>
<span class="lineNum">    2048 </span><span class="lineNoCov">          0 :     if ( kappa!=CURVATURE_ERROR &amp;&amp; kappa2!=CURVATURE_ERROR )</span>
<span class="lineNum">    2049 </span><span class="lineNoCov">          0 :         sprintf( buffer, &quot;: %g&quot;, (kappa-kappa2)*emsize );</span>
<span class="lineNum">    2050 </span>            :     else
<span class="lineNum">    2051 </span><span class="lineNoCov">          0 :         strcpy( buffer, &quot;: ?&quot;);</span>
<span class="lineNum">    2052 </span><span class="lineNoCov">          0 :     GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_DeltaCurvature),buffer);</span>
<a name="2053"><span class="lineNum">    2053 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    2054 </span>            : 
<span class="lineNum">    2055 </span><span class="lineNoCov">          0 : static void PIShowHide(GIData *ci) {</span>
<span class="lineNum">    2056 </span><span class="lineNoCov">          0 :     int normal = GGadgetIsChecked(GWidgetGetControl(ci-&gt;gw,CID_Normal));</span>
<span class="lineNum">    2057 </span>            :     int i;
<span class="lineNum">    2058 </span>            : 
<span class="lineNum">    2059 </span><span class="lineNoCov">          0 :     for ( i=ci-&gt;normal_start; i&lt;ci-&gt;normal_end; ++i )</span>
<span class="lineNum">    2060 </span><span class="lineNoCov">          0 :         if ( ci-&gt;gcd[i].ret!=NULL )</span>
<span class="lineNum">    2061 </span><span class="lineNoCov">          0 :             GGadgetSetVisible(ci-&gt;gcd[i].ret,normal);</span>
<span class="lineNum">    2062 </span><span class="lineNoCov">          0 :     GGadgetSetVisible(ci-&gt;group1ret,normal);</span>
<span class="lineNum">    2063 </span><span class="lineNoCov">          0 :     GGadgetSetVisible(ci-&gt;group2ret,normal);</span>
<span class="lineNum">    2064 </span><span class="lineNoCov">          0 :     for ( i=ci-&gt;interp_start; i&lt;ci-&gt;interp_end; ++i )</span>
<span class="lineNum">    2065 </span><span class="lineNoCov">          0 :         if ( ci-&gt;gcd[i].ret!=NULL )</span>
<span class="lineNum">    2066 </span><span class="lineNoCov">          0 :             GGadgetSetVisible(ci-&gt;gcd[i].ret,!normal);</span>
<span class="lineNum">    2067 </span><span class="lineNoCov">          0 :     GWidgetFlowGadgets(GGadgetGetWindow(GWidgetGetControl(ci-&gt;gw,CID_Normal)));</span>
<a name="2068"><span class="lineNum">    2068 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    2069 </span>            : 
<span class="lineNum">    2070 </span><span class="lineNoCov">          0 : void PIChangePoint(GIData *ci) {</span>
<span class="lineNum">    2071 </span><span class="lineNoCov">          0 :     int aspect = GTabSetGetSel(GWidgetGetControl(ci-&gt;gw,CID_TabSet));</span>
<span class="lineNum">    2072 </span><span class="lineNoCov">          0 :     GGadget *list = GWidgetGetControl(ci-&gt;gw,CID_HintMask);</span>
<span class="lineNum">    2073 </span>            :     int32 i, len;
<span class="lineNum">    2074 </span>            :     HintMask *hm;
<span class="lineNum">    2075 </span>            :     SplinePoint *sp;
<span class="lineNum">    2076 </span>            :     SplineSet *spl;
<span class="lineNum">    2077 </span>            :     int interpolate;
<span class="lineNum">    2078 </span>            : 
<span class="lineNum">    2079 </span><span class="lineNoCov">          0 :     GGadgetGetList(list,&amp;len);</span>
<span class="lineNum">    2080 </span>            : 
<span class="lineNum">    2081 </span><span class="lineNoCov">          0 :     PIFillup(ci,0);</span>
<span class="lineNum">    2082 </span>            : 
<span class="lineNum">    2083 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_Interpolated),</span>
<span class="lineNum">    2084 </span><span class="lineNoCov">          0 :             !ci-&gt;cursp-&gt;dontinterpolate &amp;&amp; !(ci-&gt;cursp-&gt;nonextcp &amp;&amp; ci-&gt;cursp-&gt;noprevcp) );</span>
<span class="lineNum">    2085 </span><span class="lineNoCov">          0 :     interpolate = SPInterpolate(ci-&gt;cursp) &amp;&amp; ci-&gt;cv-&gt;b.layerheads[ci-&gt;cv-&gt;b.drawmode]-&gt;order2;</span>
<span class="lineNum">    2086 </span><span class="lineNoCov">          0 :     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_Normal), !interpolate );</span>
<span class="lineNum">    2087 </span><span class="lineNoCov">          0 :     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_Interpolated), interpolate );</span>
<span class="lineNum">    2088 </span><span class="lineNoCov">          0 :     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_NeverInterpolate), ci-&gt;cursp-&gt;dontinterpolate );</span>
<span class="lineNum">    2089 </span><span class="lineNoCov">          0 :     PIShowHide(ci);</span>
<span class="lineNum">    2090 </span>            : 
<span class="lineNum">    2091 </span><span class="lineNoCov">          0 :     if ( ci-&gt;cursp-&gt;hintmask==NULL ) {</span>
<span class="lineNum">    2092 </span><span class="lineNoCov">          0 :         for ( i=0; i&lt;len; ++i )</span>
<span class="lineNum">    2093 </span><span class="lineNoCov">          0 :             GGadgetSelectListItem(list,i,false);</span>
<span class="lineNum">    2094 </span>            :     } else {
<span class="lineNum">    2095 </span><span class="lineNoCov">          0 :         for ( i=0; i&lt;len &amp;&amp; i&lt;HntMax; ++i )</span>
<span class="lineNum">    2096 </span><span class="lineNoCov">          0 :             GGadgetSelectListItem(list,i, (*ci-&gt;cursp-&gt;hintmask)[i&gt;&gt;3]&amp;(0x80&gt;&gt;(i&amp;7))?true:false );</span>
<span class="lineNum">    2097 </span>            :     }
<span class="lineNum">    2098 </span><span class="lineNoCov">          0 :     _PI_ShowHints(ci,aspect==1);</span>
<span class="lineNum">    2099 </span>            : 
<span class="lineNum">    2100 </span><span class="lineNoCov">          0 :     list = GWidgetGetControl(ci-&gt;gw,CID_ActiveHints);</span>
<span class="lineNum">    2101 </span><span class="lineNoCov">          0 :     hm = NULL;</span>
<span class="lineNum">    2102 </span>            :     /* Figure out what hintmask is active at the current point */
<span class="lineNum">    2103 </span>            :     /* Note: we must walk each ss backwards because we reverse the splineset */
<span class="lineNum">    2104 </span>            :     /*  when we output postscript */
<span class="lineNum">    2105 </span><span class="lineNoCov">          0 :     for ( spl = ci-&gt;sc-&gt;layers[ly_fore].splines; spl!=NULL; spl=spl-&gt;next ) {</span>
<span class="lineNum">    2106 </span><span class="lineNoCov">          0 :         for ( sp=spl-&gt;first; ; ) {</span>
<span class="lineNum">    2107 </span><span class="lineNoCov">          0 :             if ( sp-&gt;hintmask )</span>
<span class="lineNum">    2108 </span><span class="lineNoCov">          0 :                 hm = sp-&gt;hintmask;</span>
<span class="lineNum">    2109 </span><span class="lineNoCov">          0 :             if ( sp==ci-&gt;cursp )</span>
<span class="lineNum">    2110 </span><span class="lineNoCov">          0 :         break;</span>
<span class="lineNum">    2111 </span><span class="lineNoCov">          0 :             if ( sp-&gt;prev==NULL )</span>
<span class="lineNum">    2112 </span><span class="lineNoCov">          0 :         break;</span>
<span class="lineNum">    2113 </span><span class="lineNoCov">          0 :             sp = sp-&gt;prev-&gt;from;</span>
<span class="lineNum">    2114 </span><span class="lineNoCov">          0 :             if ( sp==spl-&gt;first )</span>
<span class="lineNum">    2115 </span><span class="lineNoCov">          0 :         break;</span>
<span class="lineNum">    2116 </span><span class="lineNoCov">          0 :         }</span>
<span class="lineNum">    2117 </span><span class="lineNoCov">          0 :         if ( sp==ci-&gt;cursp )</span>
<span class="lineNum">    2118 </span><span class="lineNoCov">          0 :     break;</span>
<span class="lineNum">    2119 </span>            :     }
<span class="lineNum">    2120 </span><span class="lineNoCov">          0 :     if ( hm==NULL ) {</span>
<span class="lineNum">    2121 </span><span class="lineNoCov">          0 :         for ( i=0; i&lt;len; ++i )</span>
<span class="lineNum">    2122 </span><span class="lineNoCov">          0 :             GGadgetSelectListItem(list,i,false);</span>
<span class="lineNum">    2123 </span>            :     } else {
<span class="lineNum">    2124 </span><span class="lineNoCov">          0 :         for ( i=0; i&lt;len &amp;&amp; i&lt;HntMax; ++i )</span>
<span class="lineNum">    2125 </span><span class="lineNoCov">          0 :             GGadgetSelectListItem(list,i, (*hm)[i&gt;&gt;3]&amp;(0x80&gt;&gt;(i&amp;7))?true:false );</span>
<span class="lineNum">    2126 </span>            :     }
<span class="lineNum">    2127 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_NextDef),ci-&gt;cursp-&gt;next!=NULL);</span>
<span class="lineNum">    2128 </span><span class="lineNoCov">          0 :     GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_PrevDef),ci-&gt;cursp-&gt;prev!=NULL);</span>
<a name="2129"><span class="lineNum">    2129 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    2130 </span>            : 
<span class="lineNum">    2131 </span><span class="lineNoCov">          0 : static int PI_NextPrev(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    2132 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_buttonactivate ) {</span>
<span class="lineNum">    2133 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2134 </span><span class="lineNoCov">          0 :         CharView *cv = ci-&gt;cv;</span>
<span class="lineNum">    2135 </span><span class="lineNoCov">          0 :         int cid = GGadgetGetCid(g);</span>
<span class="lineNum">    2136 </span>            :         SplinePointList *spl;
<span class="lineNum">    2137 </span>            : 
<span class="lineNum">    2138 </span><span class="lineNoCov">          0 :         PI_FixStuff(ci);</span>
<span class="lineNum">    2139 </span>            : 
<span class="lineNum">    2140 </span><span class="lineNoCov">          0 :         ci-&gt;cursp-&gt;selected = false;</span>
<span class="lineNum">    2141 </span><span class="lineNoCov">          0 :         if ( cid == CID_Next ) {</span>
<span class="lineNum">    2142 </span><span class="lineNoCov">          0 :             if ( ci-&gt;cursp-&gt;next!=NULL &amp;&amp; ci-&gt;cursp-&gt;next-&gt;to!=ci-&gt;curspl-&gt;first )</span>
<span class="lineNum">    2143 </span><span class="lineNoCov">          0 :                 ci-&gt;cursp = ci-&gt;cursp-&gt;next-&gt;to;</span>
<span class="lineNum">    2144 </span>            :             else {
<span class="lineNum">    2145 </span><span class="lineNoCov">          0 :                 if ( ci-&gt;curspl-&gt;next == NULL ) {</span>
<span class="lineNum">    2146 </span><span class="lineNoCov">          0 :                     ci-&gt;curspl = cv-&gt;b.layerheads[cv-&gt;b.drawmode]-&gt;splines;</span>
<span class="lineNum">    2147 </span><span class="lineNoCov">          0 :                     GDrawBeep(NULL);</span>
<span class="lineNum">    2148 </span>            :                 } else
<span class="lineNum">    2149 </span><span class="lineNoCov">          0 :                     ci-&gt;curspl = ci-&gt;curspl-&gt;next;</span>
<span class="lineNum">    2150 </span><span class="lineNoCov">          0 :                 ci-&gt;cursp = ci-&gt;curspl-&gt;first;</span>
<span class="lineNum">    2151 </span>            :             }
<span class="lineNum">    2152 </span><span class="lineNoCov">          0 :         } else if ( cid == CID_Prev ) {</span>
<span class="lineNum">    2153 </span><span class="lineNoCov">          0 :             if ( ci-&gt;cursp!=ci-&gt;curspl-&gt;first ) {</span>
<span class="lineNum">    2154 </span><span class="lineNoCov">          0 :                 ci-&gt;cursp = ci-&gt;cursp-&gt;prev-&gt;from;</span>
<span class="lineNum">    2155 </span>            :             } else {
<span class="lineNum">    2156 </span><span class="lineNoCov">          0 :                 if ( ci-&gt;curspl==cv-&gt;b.layerheads[cv-&gt;b.drawmode]-&gt;splines ) {</span>
<span class="lineNum">    2157 </span><span class="lineNoCov">          0 :                     for ( spl = cv-&gt;b.layerheads[cv-&gt;b.drawmode]-&gt;splines; spl-&gt;next!=NULL; spl=spl-&gt;next );</span>
<span class="lineNum">    2158 </span><span class="lineNoCov">          0 :                     GDrawBeep(NULL);</span>
<span class="lineNum">    2159 </span>            :                 } else {
<span class="lineNum">    2160 </span><span class="lineNoCov">          0 :                     for ( spl = cv-&gt;b.layerheads[cv-&gt;b.drawmode]-&gt;splines; spl-&gt;next!=ci-&gt;curspl; spl=spl-&gt;next );</span>
<span class="lineNum">    2161 </span>            :                 }
<span class="lineNum">    2162 </span><span class="lineNoCov">          0 :                 ci-&gt;curspl = spl;</span>
<span class="lineNum">    2163 </span><span class="lineNoCov">          0 :                 ci-&gt;cursp = spl-&gt;last;</span>
<span class="lineNum">    2164 </span><span class="lineNoCov">          0 :                 if ( spl-&gt;last==spl-&gt;first &amp;&amp; spl-&gt;last-&gt;prev!=NULL )</span>
<span class="lineNum">    2165 </span><span class="lineNoCov">          0 :                     ci-&gt;cursp = ci-&gt;cursp-&gt;prev-&gt;from;</span>
<span class="lineNum">    2166 </span>            :             }
<span class="lineNum">    2167 </span><span class="lineNoCov">          0 :         } else if ( cid==CID_NextC ) {</span>
<span class="lineNum">    2168 </span><span class="lineNoCov">          0 :             if ( ci-&gt;cursp-&gt;next!=NULL )</span>
<span class="lineNum">    2169 </span><span class="lineNoCov">          0 :                 ci-&gt;cursp = ci-&gt;cursp-&gt;next-&gt;to;</span>
<span class="lineNum">    2170 </span>            :             else {
<span class="lineNum">    2171 </span><span class="lineNoCov">          0 :                 ci-&gt;cursp = ci-&gt;curspl-&gt;first;</span>
<span class="lineNum">    2172 </span><span class="lineNoCov">          0 :                 GDrawBeep(NULL);</span>
<span class="lineNum">    2173 </span>            :             }
<span class="lineNum">    2174 </span>            :         } else /* CID_PrevC */ {
<span class="lineNum">    2175 </span><span class="lineNoCov">          0 :             if ( ci-&gt;cursp-&gt;prev!=NULL )</span>
<span class="lineNum">    2176 </span><span class="lineNoCov">          0 :                 ci-&gt;cursp = ci-&gt;cursp-&gt;prev-&gt;from;</span>
<span class="lineNum">    2177 </span>            :             else {
<span class="lineNum">    2178 </span><span class="lineNoCov">          0 :                 ci-&gt;cursp = ci-&gt;curspl-&gt;last;</span>
<span class="lineNum">    2179 </span><span class="lineNoCov">          0 :                 GDrawBeep(NULL);</span>
<span class="lineNum">    2180 </span>            :             }
<span class="lineNum">    2181 </span>            :         }
<span class="lineNum">    2182 </span><span class="lineNoCov">          0 :         ci-&gt;cursp-&gt;selected = true;</span>
<span class="lineNum">    2183 </span><span class="lineNoCov">          0 :         PIChangePoint(ci);</span>
<span class="lineNum">    2184 </span><span class="lineNoCov">          0 :         CVShowPoint(cv,&amp;ci-&gt;cursp-&gt;me);</span>
<span class="lineNum">    2185 </span><span class="lineNoCov">          0 :         SCUpdateAll(cv-&gt;b.sc);</span>
<span class="lineNum">    2186 </span>            :     }
<span class="lineNum">    2187 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="2188"><span class="lineNum">    2188 </span>            : }</a>
<span class="lineNum">    2189 </span>            : 
<span class="lineNum">    2190 </span><span class="lineNoCov">          0 : static int PI_InterpChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    2191 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_radiochanged ) {</span>
<span class="lineNum">    2192 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2193 </span><span class="lineNoCov">          0 :         SplinePoint *cursp = ci-&gt;cursp;</span>
<span class="lineNum">    2194 </span>            : 
<span class="lineNum">    2195 </span><span class="lineNoCov">          0 :         if ( GGadgetGetCid(g)==CID_Interpolated ) {</span>
<span class="lineNum">    2196 </span><span class="lineNoCov">          0 :             if ( cursp-&gt;nonextcp &amp;&amp; cursp-&gt;noprevcp )</span>
<span class="lineNum">    2197 </span>            :                 /* Do Nothing */;
<span class="lineNum">    2198 </span>            :             else {
<span class="lineNum">    2199 </span><span class="lineNoCov">          0 :                 if ( cursp-&gt;nonextcp &amp;&amp; cursp-&gt;next ) {</span>
<span class="lineNum">    2200 </span><span class="lineNoCov">          0 :                     SplinePoint *n = cursp-&gt;next-&gt;to;</span>
<span class="lineNum">    2201 </span><span class="lineNoCov">          0 :                     cursp-&gt;nextcp.x = rint((n-&gt;me.x+cursp-&gt;me.x)/2);</span>
<span class="lineNum">    2202 </span><span class="lineNoCov">          0 :                     cursp-&gt;nextcp.y = rint((n-&gt;me.y+cursp-&gt;me.y)/2);</span>
<span class="lineNum">    2203 </span><span class="lineNoCov">          0 :                     n-&gt;prevcp = cursp-&gt;nextcp;</span>
<span class="lineNum">    2204 </span><span class="lineNoCov">          0 :                     cursp-&gt;nonextcp = n-&gt;noprevcp = false;</span>
<span class="lineNum">    2205 </span>            :                 }
<span class="lineNum">    2206 </span><span class="lineNoCov">          0 :                 if ( cursp-&gt;noprevcp &amp;&amp; cursp-&gt;prev ) {</span>
<span class="lineNum">    2207 </span><span class="lineNoCov">          0 :                     SplinePoint *p = cursp-&gt;prev-&gt;from;</span>
<span class="lineNum">    2208 </span><span class="lineNoCov">          0 :                     cursp-&gt;prevcp.x = rint((p-&gt;me.x+cursp-&gt;me.x)/2);</span>
<span class="lineNum">    2209 </span><span class="lineNoCov">          0 :                     cursp-&gt;prevcp.y = rint((p-&gt;me.y+cursp-&gt;me.y)/2);</span>
<span class="lineNum">    2210 </span><span class="lineNoCov">          0 :                     p-&gt;nextcp = cursp-&gt;prevcp;</span>
<span class="lineNum">    2211 </span><span class="lineNoCov">          0 :                     cursp-&gt;noprevcp = p-&gt;nonextcp = false;</span>
<span class="lineNum">    2212 </span>            :                 }
<span class="lineNum">    2213 </span><span class="lineNoCov">          0 :                 cursp-&gt;me.x = (cursp-&gt;nextcp.x + cursp-&gt;prevcp.x)/2;</span>
<span class="lineNum">    2214 </span><span class="lineNoCov">          0 :                 cursp-&gt;me.y = (cursp-&gt;nextcp.y + cursp-&gt;prevcp.y)/2;</span>
<span class="lineNum">    2215 </span><span class="lineNoCov">          0 :                 if ( cursp-&gt;pointtype==pt_tangent ) {</span>
<span class="lineNum">    2216 </span><span class="lineNoCov">          0 :                     cursp-&gt;pointtype = pt_curve;</span>
<span class="lineNum">    2217 </span><span class="lineNoCov">          0 :                     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_Curve),true);</span>
<span class="lineNum">    2218 </span>            :                 }
<span class="lineNum">    2219 </span><span class="lineNoCov">          0 :                 if ( cursp-&gt;next!=NULL )</span>
<span class="lineNum">    2220 </span><span class="lineNoCov">          0 :                     SplineRefigure(cursp-&gt;next);</span>
<span class="lineNum">    2221 </span><span class="lineNoCov">          0 :                 if ( cursp-&gt;prev!=NULL )</span>
<span class="lineNum">    2222 </span><span class="lineNoCov">          0 :                     SplineRefigure(cursp-&gt;prev);</span>
<span class="lineNum">    2223 </span><span class="lineNoCov">          0 :                 SplineSetSpirosClear(ci-&gt;curspl);</span>
<span class="lineNum">    2224 </span><span class="lineNoCov">          0 :                 CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b);</span>
<span class="lineNum">    2225 </span>            :             }
<span class="lineNum">    2226 </span><span class="lineNoCov">          0 :             PIFillup(ci,0);</span>
<span class="lineNum">    2227 </span>            :         }
<span class="lineNum">    2228 </span><span class="lineNoCov">          0 :         PIShowHide(ci);</span>
<span class="lineNum">    2229 </span>            :     }
<span class="lineNum">    2230 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="2231"><span class="lineNum">    2231 </span>            : }</a>
<span class="lineNum">    2232 </span>            : 
<span class="lineNum">    2233 </span><span class="lineNoCov">          0 : static int PI_NeverInterpChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    2234 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_radiochanged ) {</span>
<span class="lineNum">    2235 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2236 </span><span class="lineNoCov">          0 :         int never = GGadgetIsChecked(g);</span>
<span class="lineNum">    2237 </span>            : 
<span class="lineNum">    2238 </span><span class="lineNoCov">          0 :         GGadgetSetEnabled(GWidgetGetControl(ci-&gt;gw,CID_Interpolated),!never);</span>
<span class="lineNum">    2239 </span>            : 
<span class="lineNum">    2240 </span><span class="lineNoCov">          0 :         if ( never )</span>
<span class="lineNum">    2241 </span><span class="lineNoCov">          0 :             GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_Normal),true);</span>
<span class="lineNum">    2242 </span><span class="lineNoCov">          0 :         ci-&gt;cursp-&gt;dontinterpolate = never;</span>
<span class="lineNum">    2243 </span><span class="lineNoCov">          0 :         PIShowHide(ci);</span>
<span class="lineNum">    2244 </span>            :     }
<span class="lineNum">    2245 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="2246"><span class="lineNum">    2246 </span>            : }</a>
<span class="lineNum">    2247 </span>            : 
<span class="lineNum">    2248 </span><span class="lineNoCov">          0 : static int PI_BaseChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    2249 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_textchanged ) {</span>
<span class="lineNum">    2250 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2251 </span><span class="lineNoCov">          0 :         real dx=0, dy=0;</span>
<span class="lineNum">    2252 </span><span class="lineNoCov">          0 :         int err=false;</span>
<span class="lineNum">    2253 </span><span class="lineNoCov">          0 :         SplinePoint *cursp = ci-&gt;cursp;</span>
<span class="lineNum">    2254 </span>            : 
<span class="lineNum">    2255 </span><span class="lineNoCov">          0 :         if ( GGadgetGetCid(g)==CID_BaseX )</span>
<span class="lineNum">    2256 </span><span class="lineNoCov">          0 :             dx = GetCalmReal8(ci-&gt;gw,CID_BaseX,_(&quot;Base X&quot;),&amp;err)-cursp-&gt;me.x;</span>
<span class="lineNum">    2257 </span>            :         else
<span class="lineNum">    2258 </span><span class="lineNoCov">          0 :             dy = GetCalmReal8(ci-&gt;gw,CID_BaseY,_(&quot;Base Y&quot;),&amp;err)-cursp-&gt;me.y;</span>
<span class="lineNum">    2259 </span><span class="lineNoCov">          0 :         if ( (dx==0 &amp;&amp; dy==0) || err )</span>
<span class="lineNum">    2260 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    2261 </span><span class="lineNoCov">          0 :         cursp-&gt;me.x += dx;</span>
<span class="lineNum">    2262 </span><span class="lineNoCov">          0 :         cursp-&gt;nextcp.x += dx;</span>
<span class="lineNum">    2263 </span><span class="lineNoCov">          0 :         cursp-&gt;prevcp.x += dx;</span>
<span class="lineNum">    2264 </span><span class="lineNoCov">          0 :         cursp-&gt;me.y += dy;</span>
<span class="lineNum">    2265 </span><span class="lineNoCov">          0 :         cursp-&gt;nextcp.y += dy;</span>
<span class="lineNum">    2266 </span><span class="lineNoCov">          0 :         cursp-&gt;prevcp.y += dy;</span>
<span class="lineNum">    2267 </span><span class="lineNoCov">          0 :         if ( ci-&gt;cv-&gt;b.layerheads[ci-&gt;cv-&gt;b.drawmode]-&gt;order2 ) {</span>
<span class="lineNum">    2268 </span><span class="lineNoCov">          0 :             SplinePointNextCPChanged2(cursp);</span>
<span class="lineNum">    2269 </span><span class="lineNoCov">          0 :             SplinePointPrevCPChanged2(cursp);</span>
<span class="lineNum">    2270 </span>            :         }
<span class="lineNum">    2271 </span><span class="lineNoCov">          0 :         if ( cursp-&gt;next!=NULL )</span>
<span class="lineNum">    2272 </span><span class="lineNoCov">          0 :             SplineRefigure(cursp-&gt;next);</span>
<span class="lineNum">    2273 </span><span class="lineNoCov">          0 :         if ( cursp-&gt;prev!=NULL )</span>
<span class="lineNum">    2274 </span><span class="lineNoCov">          0 :             SplineRefigure(cursp-&gt;prev);</span>
<span class="lineNum">    2275 </span><span class="lineNoCov">          0 :         SplineSetSpirosClear(ci-&gt;curspl);</span>
<span class="lineNum">    2276 </span><span class="lineNoCov">          0 :         CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b);</span>
<span class="lineNum">    2277 </span><span class="lineNoCov">          0 :         PIFillup(ci,GGadgetGetCid(g));</span>
<span class="lineNum">    2278 </span><span class="lineNoCov">          0 :     } else if ( e-&gt;type==et_controlevent &amp;&amp;</span>
<span class="lineNum">    2279 </span><span class="lineNoCov">          0 :             e-&gt;u.control.subtype == et_textfocuschanged &amp;&amp;</span>
<span class="lineNum">    2280 </span><span class="lineNoCov">          0 :             e-&gt;u.control.u.tf_focus.gained_focus ) {</span>
<span class="lineNum">    2281 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2282 </span><span class="lineNoCov">          0 :         PI_FigureNext(ci);</span>
<span class="lineNum">    2283 </span><span class="lineNoCov">          0 :         PI_FigurePrev(ci);</span>
<span class="lineNum">    2284 </span>            :     }
<span class="lineNum">    2285 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="2286"><span class="lineNum">    2286 </span>            : }</a>
<span class="lineNum">    2287 </span>            : 
<span class="lineNum">    2288 </span><span class="lineNoCov">          0 : static int PI_NextChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    2289 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_textchanged ) {</span>
<span class="lineNum">    2290 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2291 </span><span class="lineNoCov">          0 :         real dx=0, dy=0;</span>
<span class="lineNum">    2292 </span><span class="lineNoCov">          0 :         int err=false;</span>
<span class="lineNum">    2293 </span><span class="lineNoCov">          0 :         SplinePoint *cursp = ci-&gt;cursp;</span>
<span class="lineNum">    2294 </span>            : 
<span class="lineNum">    2295 </span><span class="lineNoCov">          0 :         if ( GGadgetGetCid(g)==CID_NextXOff ) {</span>
<span class="lineNum">    2296 </span><span class="lineNoCov">          0 :             dx = GetCalmReal8(ci-&gt;gw,CID_NextXOff,_(&quot;Next CP X&quot;),&amp;err)-(cursp-&gt;nextcp.x-cursp-&gt;me.x);</span>
<span class="lineNum">    2297 </span><span class="lineNoCov">          0 :             if ( cursp-&gt;pointtype==pt_tangent &amp;&amp; cursp-&gt;prev!=NULL ) {</span>
<span class="lineNum">    2298 </span><span class="lineNoCov">          0 :                 if ( cursp-&gt;prev-&gt;from-&gt;me.x==cursp-&gt;me.x ) {</span>
<span class="lineNum">    2299 </span><span class="lineNoCov">          0 :                     dy = dx; dx = 0;    /* They should be constrained not to change in the x direction */</span>
<span class="lineNum">    2300 </span>            :                 } else
<span class="lineNum">    2301 </span><span class="lineNoCov">          0 :                     dy = dx*(cursp-&gt;prev-&gt;from-&gt;me.y-cursp-&gt;me.y)/(cursp-&gt;prev-&gt;from-&gt;me.x-cursp-&gt;me.x);</span>
<span class="lineNum">    2302 </span>            :             }
<span class="lineNum">    2303 </span><span class="lineNoCov">          0 :         } else if ( GGadgetGetCid(g)==CID_NextYOff ) {</span>
<span class="lineNum">    2304 </span><span class="lineNoCov">          0 :             dy = GetCalmReal8(ci-&gt;gw,CID_NextYOff,_(&quot;Next CP Y&quot;),&amp;err)-(cursp-&gt;nextcp.y-cursp-&gt;me.y);</span>
<span class="lineNum">    2305 </span><span class="lineNoCov">          0 :             if ( cursp-&gt;pointtype==pt_tangent &amp;&amp; cursp-&gt;prev!=NULL ) {</span>
<span class="lineNum">    2306 </span><span class="lineNoCov">          0 :                 if ( cursp-&gt;prev-&gt;from-&gt;me.y==cursp-&gt;me.y ) {</span>
<span class="lineNum">    2307 </span><span class="lineNoCov">          0 :                     dx = dy; dy = 0;    /* They should be constrained not to change in the y direction */</span>
<span class="lineNum">    2308 </span>            :                 } else
<span class="lineNum">    2309 </span><span class="lineNoCov">          0 :                     dx = dy*(cursp-&gt;prev-&gt;from-&gt;me.x-cursp-&gt;me.x)/(cursp-&gt;prev-&gt;from-&gt;me.y-cursp-&gt;me.y);</span>
<span class="lineNum">    2310 </span>            :             }
<span class="lineNum">    2311 </span>            :         } else {
<span class="lineNum">    2312 </span>            :             double len, theta;
<span class="lineNum">    2313 </span><span class="lineNoCov">          0 :             len = GetCalmReal8(ci-&gt;gw,CID_NextR,_(&quot;Next CP Dist&quot;),&amp;err);</span>
<span class="lineNum">    2314 </span><span class="lineNoCov">          0 :             theta = GetCalmReal8(ci-&gt;gw,CID_NextTheta,_(&quot;Next CP Angle&quot;),&amp;err)/RAD2DEG;</span>
<span class="lineNum">    2315 </span><span class="lineNoCov">          0 :             dx = len*cos(theta) - (cursp-&gt;nextcp.x-cursp-&gt;me.x);</span>
<span class="lineNum">    2316 </span><span class="lineNoCov">          0 :             dy = len*sin(theta) - (cursp-&gt;nextcp.y-cursp-&gt;me.y);</span>
<span class="lineNum">    2317 </span>            :         }
<span class="lineNum">    2318 </span><span class="lineNoCov">          0 :         if ( (dx==0 &amp;&amp; dy==0) || err )</span>
<span class="lineNum">    2319 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    2320 </span><span class="lineNoCov">          0 :         if ( cursp-&gt;pointtype==pt_hvcurve ) {</span>
<span class="lineNum">    2321 </span>            :             BasePoint diff;
<span class="lineNum">    2322 </span><span class="lineNoCov">          0 :             diff.x = cursp-&gt;nextcp.x+dx - cursp-&gt;me.x;</span>
<span class="lineNum">    2323 </span><span class="lineNoCov">          0 :             diff.y = cursp-&gt;nextcp.y+dy - cursp-&gt;me.y;</span>
<span class="lineNum">    2324 </span><span class="lineNoCov">          0 :             BP_HVForce(&amp;diff);</span>
<span class="lineNum">    2325 </span><span class="lineNoCov">          0 :             dx = diff.x + (cursp-&gt;me.x - cursp-&gt;nextcp.x);</span>
<span class="lineNum">    2326 </span><span class="lineNoCov">          0 :             dy = diff.y + (cursp-&gt;me.y - cursp-&gt;nextcp.y);</span>
<span class="lineNum">    2327 </span>            :         }
<span class="lineNum">    2328 </span><span class="lineNoCov">          0 :         cursp-&gt;nextcp.x += dx;</span>
<span class="lineNum">    2329 </span><span class="lineNoCov">          0 :         cursp-&gt;nextcp.y += dy;</span>
<span class="lineNum">    2330 </span><span class="lineNoCov">          0 :         cursp-&gt;nonextcp = false;</span>
<span class="lineNum">    2331 </span><span class="lineNoCov">          0 :         SplineSetSpirosClear(ci-&gt;curspl);</span>
<span class="lineNum">    2332 </span><span class="lineNoCov">          0 :         ci-&gt;nextchanged = true;</span>
<span class="lineNum">    2333 </span><span class="lineNoCov">          0 :         if (( dx&gt;.1 || dx&lt;-.1 || dy&gt;.1 || dy&lt;-.1 ) &amp;&amp; cursp-&gt;nextcpdef ) {</span>
<span class="lineNum">    2334 </span><span class="lineNoCov">          0 :             cursp-&gt;nextcpdef = false;</span>
<span class="lineNum">    2335 </span><span class="lineNoCov">          0 :             GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_NextDef), false );</span>
<span class="lineNum">    2336 </span>            :         }
<span class="lineNum">    2337 </span><span class="lineNoCov">          0 :         if (( cursp-&gt;pointtype==pt_curve || cursp-&gt;pointtype==pt_hvcurve) &amp;&amp; cursp-&gt;prev!=NULL ) {</span>
<span class="lineNum">    2338 </span>            :             double plen, ntheta;
<span class="lineNum">    2339 </span>            :             double ndx, ndy;
<span class="lineNum">    2340 </span><span class="lineNoCov">          0 :             ndx = ci-&gt;cursp-&gt;nextcp.x-ci-&gt;cursp-&gt;me.x;</span>
<span class="lineNum">    2341 </span><span class="lineNoCov">          0 :             ndy = ci-&gt;cursp-&gt;nextcp.y-ci-&gt;cursp-&gt;me.y;</span>
<span class="lineNum">    2342 </span><span class="lineNoCov">          0 :             ntheta = atan2(ndy,ndx);</span>
<span class="lineNum">    2343 </span><span class="lineNoCov">          0 :             plen = GetCalmReal8(ci-&gt;gw,CID_PrevR,_(&quot;Prev CP Dist&quot;),&amp;err);</span>
<span class="lineNum">    2344 </span><span class="lineNoCov">          0 :             ci-&gt;cursp-&gt;prevcp.x = ci-&gt;cursp-&gt;me.x - plen*cos(ntheta);</span>
<span class="lineNum">    2345 </span><span class="lineNoCov">          0 :             ci-&gt;cursp-&gt;prevcp.y = ci-&gt;cursp-&gt;me.y - plen*sin(ntheta);</span>
<span class="lineNum">    2346 </span><span class="lineNoCov">          0 :             if ( ci-&gt;cv-&gt;b.layerheads[ci-&gt;cv-&gt;b.drawmode]-&gt;order2 )</span>
<span class="lineNum">    2347 </span><span class="lineNoCov">          0 :                 SplinePointPrevCPChanged2(cursp);</span>
<span class="lineNum">    2348 </span><span class="lineNoCov">          0 :             SplineRefigure(cursp-&gt;prev);</span>
<span class="lineNum">    2349 </span>            :         }
<span class="lineNum">    2350 </span><span class="lineNoCov">          0 :         if ( ci-&gt;cv-&gt;b.layerheads[ci-&gt;cv-&gt;b.drawmode]-&gt;order2 )</span>
<span class="lineNum">    2351 </span><span class="lineNoCov">          0 :             SplinePointNextCPChanged2(cursp);</span>
<span class="lineNum">    2352 </span><span class="lineNoCov">          0 :         if ( cursp-&gt;next!=NULL )</span>
<span class="lineNum">    2353 </span><span class="lineNoCov">          0 :             SplineRefigure(cursp-&gt;next);</span>
<span class="lineNum">    2354 </span><span class="lineNoCov">          0 :         CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b);</span>
<span class="lineNum">    2355 </span><span class="lineNoCov">          0 :         PIFillup(ci,GGadgetGetCid(g));</span>
<span class="lineNum">    2356 </span><span class="lineNoCov">          0 :     } else if ( e-&gt;type==et_controlevent &amp;&amp;</span>
<span class="lineNum">    2357 </span><span class="lineNoCov">          0 :             e-&gt;u.control.subtype == et_textfocuschanged &amp;&amp;</span>
<span class="lineNum">    2358 </span><span class="lineNoCov">          0 :             e-&gt;u.control.u.tf_focus.gained_focus ) {</span>
<span class="lineNum">    2359 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2360 </span><span class="lineNoCov">          0 :         PI_FigureNext(ci);</span>
<span class="lineNum">    2361 </span>            :     }
<span class="lineNum">    2362 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="2363"><span class="lineNum">    2363 </span>            : }</a>
<span class="lineNum">    2364 </span>            : 
<span class="lineNum">    2365 </span><span class="lineNoCov">          0 : static int PI_PrevChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    2366 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_textchanged ) {</span>
<span class="lineNum">    2367 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2368 </span><span class="lineNoCov">          0 :         real dx=0, dy=0;</span>
<span class="lineNum">    2369 </span><span class="lineNoCov">          0 :         int err=false;</span>
<span class="lineNum">    2370 </span><span class="lineNoCov">          0 :         SplinePoint *cursp = ci-&gt;cursp;</span>
<span class="lineNum">    2371 </span>            : 
<span class="lineNum">    2372 </span><span class="lineNoCov">          0 :         if ( GGadgetGetCid(g)==CID_PrevXOff ) {</span>
<span class="lineNum">    2373 </span><span class="lineNoCov">          0 :             dx = GetCalmReal8(ci-&gt;gw,CID_PrevXOff,_(&quot;Prev CP X&quot;),&amp;err)-(cursp-&gt;prevcp.x-cursp-&gt;me.x);</span>
<span class="lineNum">    2374 </span><span class="lineNoCov">          0 :             if ( cursp-&gt;pointtype==pt_tangent &amp;&amp; cursp-&gt;next!=NULL ) {</span>
<span class="lineNum">    2375 </span><span class="lineNoCov">          0 :                 if ( cursp-&gt;next-&gt;to-&gt;me.x==cursp-&gt;me.x ) {</span>
<span class="lineNum">    2376 </span><span class="lineNoCov">          0 :                     dy = dx; dx = 0;    /* They should be constrained not to change in the x direction */</span>
<span class="lineNum">    2377 </span>            :                 } else
<span class="lineNum">    2378 </span><span class="lineNoCov">          0 :                     dy = dx*(cursp-&gt;next-&gt;to-&gt;me.y-cursp-&gt;me.y)/(cursp-&gt;next-&gt;to-&gt;me.x-cursp-&gt;me.x);</span>
<span class="lineNum">    2379 </span>            :             }
<span class="lineNum">    2380 </span><span class="lineNoCov">          0 :         } else if ( GGadgetGetCid(g)==CID_PrevYOff ) {</span>
<span class="lineNum">    2381 </span><span class="lineNoCov">          0 :             dy = GetCalmReal8(ci-&gt;gw,CID_PrevYOff,_(&quot;Prev CP Y&quot;),&amp;err)-(cursp-&gt;prevcp.y-cursp-&gt;me.y);</span>
<span class="lineNum">    2382 </span><span class="lineNoCov">          0 :             if ( cursp-&gt;pointtype==pt_tangent &amp;&amp; cursp-&gt;next!=NULL ) {</span>
<span class="lineNum">    2383 </span><span class="lineNoCov">          0 :                 if ( cursp-&gt;next-&gt;to-&gt;me.y==cursp-&gt;me.y ) {</span>
<span class="lineNum">    2384 </span><span class="lineNoCov">          0 :                     dx = dy; dy = 0;    /* They should be constrained not to change in the y direction */</span>
<span class="lineNum">    2385 </span>            :                 } else
<span class="lineNum">    2386 </span><span class="lineNoCov">          0 :                     dx = dy*(cursp-&gt;next-&gt;to-&gt;me.x-cursp-&gt;me.x)/(cursp-&gt;next-&gt;to-&gt;me.y-cursp-&gt;me.y);</span>
<span class="lineNum">    2387 </span>            :             }
<span class="lineNum">    2388 </span>            :         } else {
<span class="lineNum">    2389 </span>            :             double len, theta;
<span class="lineNum">    2390 </span><span class="lineNoCov">          0 :             len = GetCalmReal8(ci-&gt;gw,CID_PrevR,_(&quot;Prev CP Dist&quot;),&amp;err);</span>
<span class="lineNum">    2391 </span><span class="lineNoCov">          0 :             theta = GetCalmReal8(ci-&gt;gw,CID_PrevTheta,_(&quot;Prev CP Angle&quot;),&amp;err)/RAD2DEG;</span>
<span class="lineNum">    2392 </span><span class="lineNoCov">          0 :             dx = len*cos(theta) - (cursp-&gt;prevcp.x-cursp-&gt;me.x);</span>
<span class="lineNum">    2393 </span><span class="lineNoCov">          0 :             dy = len*sin(theta) - (cursp-&gt;prevcp.y-cursp-&gt;me.y);</span>
<span class="lineNum">    2394 </span>            :         }
<span class="lineNum">    2395 </span><span class="lineNoCov">          0 :         if ( (dx==0 &amp;&amp; dy==0) || err )</span>
<span class="lineNum">    2396 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    2397 </span><span class="lineNoCov">          0 :         if ( cursp-&gt;pointtype==pt_hvcurve ) {</span>
<span class="lineNum">    2398 </span>            :             BasePoint diff;
<span class="lineNum">    2399 </span><span class="lineNoCov">          0 :             diff.x = cursp-&gt;prevcp.x+dx - cursp-&gt;me.x;</span>
<span class="lineNum">    2400 </span><span class="lineNoCov">          0 :             diff.y = cursp-&gt;prevcp.y+dy - cursp-&gt;me.y;</span>
<span class="lineNum">    2401 </span><span class="lineNoCov">          0 :             BP_HVForce(&amp;diff);</span>
<span class="lineNum">    2402 </span><span class="lineNoCov">          0 :             dx = diff.x - (cursp-&gt;prevcp.x - cursp-&gt;me.x);</span>
<span class="lineNum">    2403 </span><span class="lineNoCov">          0 :             dy = diff.y - (cursp-&gt;prevcp.y - cursp-&gt;me.y);</span>
<span class="lineNum">    2404 </span>            :         }
<span class="lineNum">    2405 </span><span class="lineNoCov">          0 :         cursp-&gt;prevcp.x += dx;</span>
<span class="lineNum">    2406 </span><span class="lineNoCov">          0 :         cursp-&gt;prevcp.y += dy;</span>
<span class="lineNum">    2407 </span><span class="lineNoCov">          0 :         cursp-&gt;noprevcp = false;</span>
<span class="lineNum">    2408 </span><span class="lineNoCov">          0 :         ci-&gt;prevchanged = true;</span>
<span class="lineNum">    2409 </span><span class="lineNoCov">          0 :         SplineSetSpirosClear(ci-&gt;curspl);</span>
<span class="lineNum">    2410 </span><span class="lineNoCov">          0 :         if (( dx&gt;.1 || dx&lt;-.1 || dy&gt;.1 || dy&lt;-.1 ) &amp;&amp; cursp-&gt;prevcpdef ) {</span>
<span class="lineNum">    2411 </span><span class="lineNoCov">          0 :             cursp-&gt;prevcpdef = false;</span>
<span class="lineNum">    2412 </span><span class="lineNoCov">          0 :             GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_PrevDef), false );</span>
<span class="lineNum">    2413 </span>            :         }
<span class="lineNum">    2414 </span><span class="lineNoCov">          0 :         if (( cursp-&gt;pointtype==pt_curve || cursp-&gt;pointtype==pt_hvcurve) &amp;&amp; cursp-&gt;next!=NULL ) {</span>
<span class="lineNum">    2415 </span>            :             double nlen, ptheta;
<span class="lineNum">    2416 </span>            :             double pdx, pdy;
<span class="lineNum">    2417 </span><span class="lineNoCov">          0 :             pdx = ci-&gt;cursp-&gt;prevcp.x-ci-&gt;cursp-&gt;me.x;</span>
<span class="lineNum">    2418 </span><span class="lineNoCov">          0 :             pdy = ci-&gt;cursp-&gt;prevcp.y-ci-&gt;cursp-&gt;me.y;</span>
<span class="lineNum">    2419 </span><span class="lineNoCov">          0 :             ptheta = atan2(pdy,pdx);</span>
<span class="lineNum">    2420 </span><span class="lineNoCov">          0 :             nlen = GetCalmReal8(ci-&gt;gw,CID_NextR,_(&quot;Next CP Dist&quot;),&amp;err);</span>
<span class="lineNum">    2421 </span><span class="lineNoCov">          0 :             ci-&gt;cursp-&gt;nextcp.x = ci-&gt;cursp-&gt;me.x - nlen*cos(ptheta);</span>
<span class="lineNum">    2422 </span><span class="lineNoCov">          0 :             ci-&gt;cursp-&gt;nextcp.y = ci-&gt;cursp-&gt;me.y - nlen*sin(ptheta);</span>
<span class="lineNum">    2423 </span><span class="lineNoCov">          0 :             if ( ci-&gt;cv-&gt;b.layerheads[ci-&gt;cv-&gt;b.drawmode]-&gt;order2 )</span>
<span class="lineNum">    2424 </span><span class="lineNoCov">          0 :                 SplinePointNextCPChanged2(cursp);</span>
<span class="lineNum">    2425 </span><span class="lineNoCov">          0 :             SplineRefigure(cursp-&gt;next);</span>
<span class="lineNum">    2426 </span>            :         }
<span class="lineNum">    2427 </span><span class="lineNoCov">          0 :         if ( ci-&gt;cv-&gt;b.layerheads[ci-&gt;cv-&gt;b.drawmode]-&gt;order2 )</span>
<span class="lineNum">    2428 </span><span class="lineNoCov">          0 :             SplinePointPrevCPChanged2(cursp);</span>
<span class="lineNum">    2429 </span><span class="lineNoCov">          0 :         if ( cursp-&gt;prev!=NULL )</span>
<span class="lineNum">    2430 </span><span class="lineNoCov">          0 :             SplineRefigure(cursp-&gt;prev);</span>
<span class="lineNum">    2431 </span><span class="lineNoCov">          0 :         CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b);</span>
<span class="lineNum">    2432 </span><span class="lineNoCov">          0 :         PIFillup(ci,GGadgetGetCid(g));</span>
<span class="lineNum">    2433 </span><span class="lineNoCov">          0 :     } else if ( e-&gt;type==et_controlevent &amp;&amp;</span>
<span class="lineNum">    2434 </span><span class="lineNoCov">          0 :             e-&gt;u.control.subtype == et_textfocuschanged &amp;&amp;</span>
<span class="lineNum">    2435 </span><span class="lineNoCov">          0 :             e-&gt;u.control.u.tf_focus.gained_focus ) {</span>
<span class="lineNum">    2436 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2437 </span><span class="lineNoCov">          0 :         PI_FigurePrev(ci);</span>
<span class="lineNum">    2438 </span>            :     }
<span class="lineNum">    2439 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="2440"><span class="lineNum">    2440 </span>            : }</a>
<span class="lineNum">    2441 </span>            : 
<span class="lineNum">    2442 </span><span class="lineNoCov">          0 : static int PI_NextIntChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    2443 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_textchanged ) {</span>
<span class="lineNum">    2444 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2445 </span><span class="lineNoCov">          0 :         real x=0, y=0;</span>
<span class="lineNum">    2446 </span><span class="lineNoCov">          0 :         int err=false;</span>
<span class="lineNum">    2447 </span><span class="lineNoCov">          0 :         SplinePoint *cursp = ci-&gt;cursp;</span>
<span class="lineNum">    2448 </span>            : 
<span class="lineNum">    2449 </span><span class="lineNoCov">          0 :         x = GetCalmReal8(ci-&gt;gw,CID_NextX,_(&quot;Next CP X&quot;),&amp;err);</span>
<span class="lineNum">    2450 </span><span class="lineNoCov">          0 :         y = GetCalmReal8(ci-&gt;gw,CID_NextY,_(&quot;Next CP Y&quot;),&amp;err);</span>
<span class="lineNum">    2451 </span><span class="lineNoCov">          0 :         if ( err || (x==cursp-&gt;nextcp.x &amp;&amp; y==cursp-&gt;nextcp.y) )</span>
<span class="lineNum">    2452 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    2453 </span><span class="lineNoCov">          0 :         cursp-&gt;nextcp.x = x;</span>
<span class="lineNum">    2454 </span><span class="lineNoCov">          0 :         cursp-&gt;nextcp.y = y;</span>
<span class="lineNum">    2455 </span><span class="lineNoCov">          0 :         cursp-&gt;me.x = (cursp-&gt;nextcp.x + cursp-&gt;prevcp.x)/2;</span>
<span class="lineNum">    2456 </span><span class="lineNoCov">          0 :         cursp-&gt;me.y = (cursp-&gt;nextcp.y + cursp-&gt;prevcp.y)/2;</span>
<span class="lineNum">    2457 </span><span class="lineNoCov">          0 :         SplineSetSpirosClear(ci-&gt;curspl);</span>
<span class="lineNum">    2458 </span><span class="lineNoCov">          0 :         if ( ci-&gt;cv-&gt;b.layerheads[ci-&gt;cv-&gt;b.drawmode]-&gt;order2 )</span>
<span class="lineNum">    2459 </span><span class="lineNoCov">          0 :             SplinePointNextCPChanged2(cursp);</span>
<span class="lineNum">    2460 </span><span class="lineNoCov">          0 :         if ( cursp-&gt;next!=NULL )</span>
<span class="lineNum">    2461 </span><span class="lineNoCov">          0 :             SplineRefigure(cursp-&gt;next);</span>
<span class="lineNum">    2462 </span><span class="lineNoCov">          0 :         CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b);</span>
<span class="lineNum">    2463 </span><span class="lineNoCov">          0 :         PIFillup(ci,GGadgetGetCid(g));</span>
<span class="lineNum">    2464 </span><span class="lineNoCov">          0 :     } else if ( e-&gt;type==et_controlevent &amp;&amp;</span>
<span class="lineNum">    2465 </span><span class="lineNoCov">          0 :             e-&gt;u.control.subtype == et_textfocuschanged &amp;&amp;</span>
<span class="lineNum">    2466 </span><span class="lineNoCov">          0 :             e-&gt;u.control.u.tf_focus.gained_focus ) {</span>
<span class="lineNum">    2467 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2468 </span><span class="lineNoCov">          0 :         PI_FigureNext(ci);</span>
<span class="lineNum">    2469 </span>            :     }
<span class="lineNum">    2470 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="2471"><span class="lineNum">    2471 </span>            : }</a>
<span class="lineNum">    2472 </span>            : 
<span class="lineNum">    2473 </span><span class="lineNoCov">          0 : static int PI_PrevIntChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    2474 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_textchanged ) {</span>
<span class="lineNum">    2475 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2476 </span><span class="lineNoCov">          0 :         real x=0, y=0;</span>
<span class="lineNum">    2477 </span><span class="lineNoCov">          0 :         int err=false;</span>
<span class="lineNum">    2478 </span><span class="lineNoCov">          0 :         SplinePoint *cursp = ci-&gt;cursp;</span>
<span class="lineNum">    2479 </span>            : 
<span class="lineNum">    2480 </span><span class="lineNoCov">          0 :         x = GetCalmReal8(ci-&gt;gw,CID_PrevX,_(&quot;Prev CP X&quot;),&amp;err);</span>
<span class="lineNum">    2481 </span><span class="lineNoCov">          0 :         y = GetCalmReal8(ci-&gt;gw,CID_PrevY,_(&quot;Prev CP Y&quot;),&amp;err);</span>
<span class="lineNum">    2482 </span><span class="lineNoCov">          0 :         if ( err || (x==cursp-&gt;prevcp.x &amp;&amp; y==cursp-&gt;prevcp.y) )</span>
<span class="lineNum">    2483 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    2484 </span><span class="lineNoCov">          0 :         cursp-&gt;prevcp.x = x;</span>
<span class="lineNum">    2485 </span><span class="lineNoCov">          0 :         cursp-&gt;prevcp.y = y;</span>
<span class="lineNum">    2486 </span><span class="lineNoCov">          0 :         cursp-&gt;me.x = (cursp-&gt;nextcp.x + cursp-&gt;prevcp.x)/2;</span>
<span class="lineNum">    2487 </span><span class="lineNoCov">          0 :         cursp-&gt;me.y = (cursp-&gt;nextcp.y + cursp-&gt;prevcp.y)/2;</span>
<span class="lineNum">    2488 </span><span class="lineNoCov">          0 :         SplineSetSpirosClear(ci-&gt;curspl);</span>
<span class="lineNum">    2489 </span><span class="lineNoCov">          0 :         if ( ci-&gt;cv-&gt;b.layerheads[ci-&gt;cv-&gt;b.drawmode]-&gt;order2 )</span>
<span class="lineNum">    2490 </span><span class="lineNoCov">          0 :             SplinePointPrevCPChanged2(cursp);</span>
<span class="lineNum">    2491 </span><span class="lineNoCov">          0 :         if ( cursp-&gt;prev!=NULL )</span>
<span class="lineNum">    2492 </span><span class="lineNoCov">          0 :             SplineRefigure(cursp-&gt;prev);</span>
<span class="lineNum">    2493 </span><span class="lineNoCov">          0 :         CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b);</span>
<span class="lineNum">    2494 </span><span class="lineNoCov">          0 :         PIFillup(ci,GGadgetGetCid(g));</span>
<span class="lineNum">    2495 </span><span class="lineNoCov">          0 :     } else if ( e-&gt;type==et_controlevent &amp;&amp;</span>
<span class="lineNum">    2496 </span><span class="lineNoCov">          0 :             e-&gt;u.control.subtype == et_textfocuschanged &amp;&amp;</span>
<span class="lineNum">    2497 </span><span class="lineNoCov">          0 :             e-&gt;u.control.u.tf_focus.gained_focus ) {</span>
<span class="lineNum">    2498 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2499 </span><span class="lineNoCov">          0 :         PI_FigureNext(ci);</span>
<span class="lineNum">    2500 </span>            :     }
<span class="lineNum">    2501 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="2502"><span class="lineNum">    2502 </span>            : }</a>
<span class="lineNum">    2503 </span>            : 
<span class="lineNum">    2504 </span><span class="lineNoCov">          0 : static int PI_NextDefChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    2505 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_radiochanged ) {</span>
<span class="lineNum">    2506 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2507 </span><span class="lineNoCov">          0 :         SplinePoint *cursp = ci-&gt;cursp;</span>
<span class="lineNum">    2508 </span>            : 
<span class="lineNum">    2509 </span><span class="lineNoCov">          0 :         cursp-&gt;nextcpdef = GGadgetIsChecked(g);</span>
<span class="lineNum">    2510 </span>            :         /* If they turned def off, that's a noop, but if they turned it on... */
<span class="lineNum">    2511 </span>            :         /*  then set things to the default */
<span class="lineNum">    2512 </span><span class="lineNoCov">          0 :         if ( cursp-&gt;nextcpdef ) {</span>
<span class="lineNum">    2513 </span><span class="lineNoCov">          0 :             BasePoint temp = cursp-&gt;prevcp;</span>
<span class="lineNum">    2514 </span><span class="lineNoCov">          0 :             SplineCharDefaultNextCP(cursp);</span>
<span class="lineNum">    2515 </span><span class="lineNoCov">          0 :             if ( !cursp-&gt;prevcpdef ) {</span>
<span class="lineNum">    2516 </span><span class="lineNoCov">          0 :                 cursp-&gt;prevcp = temp;</span>
<span class="lineNum">    2517 </span><span class="lineNoCov">          0 :                 SplineSetSpirosClear(ci-&gt;curspl);</span>
<span class="lineNum">    2518 </span>            :             }
<span class="lineNum">    2519 </span><span class="lineNoCov">          0 :             CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b);</span>
<span class="lineNum">    2520 </span><span class="lineNoCov">          0 :             PIFillup(ci,GGadgetGetCid(g));</span>
<span class="lineNum">    2521 </span>            :         }
<span class="lineNum">    2522 </span>            :     }
<span class="lineNum">    2523 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="2524"><span class="lineNum">    2524 </span>            : }</a>
<span class="lineNum">    2525 </span>            : 
<span class="lineNum">    2526 </span><span class="lineNoCov">          0 : static int PI_PrevDefChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    2527 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_radiochanged ) {</span>
<span class="lineNum">    2528 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2529 </span><span class="lineNoCov">          0 :         SplinePoint *cursp = ci-&gt;cursp;</span>
<span class="lineNum">    2530 </span>            : 
<span class="lineNum">    2531 </span><span class="lineNoCov">          0 :         cursp-&gt;prevcpdef = GGadgetIsChecked(g);</span>
<span class="lineNum">    2532 </span>            :         /* If they turned def off, that's a noop, but if they turned it on... */
<span class="lineNum">    2533 </span>            :         /*  then set things to the default */
<span class="lineNum">    2534 </span><span class="lineNoCov">          0 :         if ( cursp-&gt;prevcpdef ) {</span>
<span class="lineNum">    2535 </span><span class="lineNoCov">          0 :             BasePoint temp = cursp-&gt;nextcp;</span>
<span class="lineNum">    2536 </span><span class="lineNoCov">          0 :             SplineCharDefaultPrevCP(cursp);</span>
<span class="lineNum">    2537 </span><span class="lineNoCov">          0 :             if ( !cursp-&gt;nextcpdef ) {</span>
<span class="lineNum">    2538 </span><span class="lineNoCov">          0 :                 cursp-&gt;nextcp = temp;</span>
<span class="lineNum">    2539 </span><span class="lineNoCov">          0 :                 SplineSetSpirosClear(ci-&gt;curspl);</span>
<span class="lineNum">    2540 </span>            :             }
<span class="lineNum">    2541 </span><span class="lineNoCov">          0 :             CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b);</span>
<span class="lineNum">    2542 </span><span class="lineNoCov">          0 :             PIFillup(ci,GGadgetGetCid(g));</span>
<span class="lineNum">    2543 </span>            :         }
<span class="lineNum">    2544 </span>            :     }
<span class="lineNum">    2545 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="2546"><span class="lineNum">    2546 </span>            : }</a>
<span class="lineNum">    2547 </span>            : 
<span class="lineNum">    2548 </span><span class="lineNoCov">          0 : static int PI_PTypeChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    2549 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_radiochanged ) {</span>
<span class="lineNum">    2550 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2551 </span><span class="lineNoCov">          0 :         SplinePoint *cursp = ci-&gt;cursp;</span>
<span class="lineNum">    2552 </span><span class="lineNoCov">          0 :         enum pointtype pt = GGadgetGetCid(g)-CID_Curve + pt_curve;</span>
<span class="lineNum">    2553 </span>            : 
<span class="lineNum">    2554 </span><span class="lineNoCov">          0 :         if ( pt==cursp-&gt;pointtype ) {</span>
<span class="lineNum">    2555 </span>            :             /* Can't happen */
<span class="lineNum">    2556 </span><span class="lineNoCov">          0 :         } else if ( pt==pt_corner ) {</span>
<span class="lineNum">    2557 </span><span class="lineNoCov">          0 :             cursp-&gt;pointtype = pt_corner;</span>
<span class="lineNum">    2558 </span><span class="lineNoCov">          0 :             CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b);</span>
<span class="lineNum">    2559 </span>            :         } else {
<span class="lineNum">    2560 </span><span class="lineNoCov">          0 :             SPChangePointType(cursp,pt);</span>
<span class="lineNum">    2561 </span><span class="lineNoCov">          0 :             SplineSetSpirosClear(ci-&gt;curspl);</span>
<span class="lineNum">    2562 </span><span class="lineNoCov">          0 :             CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b);</span>
<span class="lineNum">    2563 </span><span class="lineNoCov">          0 :             PIFillup(ci,GGadgetGetCid(g));</span>
<span class="lineNum">    2564 </span>            :         }
<span class="lineNum">    2565 </span>            :     }
<span class="lineNum">    2566 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="2567"><span class="lineNum">    2567 </span>            : }</a>
<span class="lineNum">    2568 </span>            : 
<span class="lineNum">    2569 </span><span class="lineNoCov">          0 : static int PI_AspectChange(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    2570 </span><span class="lineNoCov">          0 :     if ( e==NULL || (e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_radiochanged )) {</span>
<span class="lineNum">    2571 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2572 </span><span class="lineNoCov">          0 :         int aspect = GTabSetGetSel(g);</span>
<span class="lineNum">    2573 </span>            : 
<span class="lineNum">    2574 </span><span class="lineNoCov">          0 :         _PI_ShowHints(ci,aspect==1);</span>
<span class="lineNum">    2575 </span>            :     }
<span class="lineNum">    2576 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="2577"><span class="lineNum">    2577 </span>            : }</a>
<span class="lineNum">    2578 </span>            : 
<span class="lineNum">    2579 </span><span class="lineNoCov">          0 : static int PI_HintSel(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    2580 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_listselected ) {</span>
<span class="lineNum">    2581 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    2582 </span>            : 
<span class="lineNum">    2583 </span><span class="lineNoCov">          0 :         _PI_ShowHints(ci,true);</span>
<span class="lineNum">    2584 </span>            : 
<span class="lineNum">    2585 </span><span class="lineNoCov">          0 :         if ( GGadgetIsListItemSelected(g,e-&gt;u.control.u.list.changed_index)) {</span>
<span class="lineNum">    2586 </span>            :             /* If we just selected something, check to make sure it doesn't */
<span class="lineNum">    2587 </span>            :             /*  conflict with any other hints. */
<span class="lineNum">    2588 </span>            :             /* Adobe says this is an error, but in &quot;three&quot; in AdobeSansMM */
<span class="lineNum">    2589 </span>            :             /*  (in black,extended) we have a hintmask which contains two */
<span class="lineNum">    2590 </span>            :             /*  overlapping hints */
<span class="lineNum">    2591 </span>            :             /* So just make it a warning */
<span class="lineNum">    2592 </span>            :             int i,j;
<span class="lineNum">    2593 </span><span class="lineNoCov">          0 :             StemInfo *h, *h2=NULL;</span>
<span class="lineNum">    2594 </span><span class="lineNoCov">          0 :             for ( i=0, h=ci-&gt;cv-&gt;b.sc-&gt;hstem; h!=NULL &amp;&amp; i!=e-&gt;u.control.u.list.changed_index; h=h-&gt;next, ++i );</span>
<span class="lineNum">    2595 </span><span class="lineNoCov">          0 :             if ( h!=NULL ) {</span>
<span class="lineNum">    2596 </span><span class="lineNoCov">          0 :                 for ( h2 = ci-&gt;cv-&gt;b.sc-&gt;hstem, i=0 ; h2!=NULL; h2=h2-&gt;next, ++i ) {</span>
<span class="lineNum">    2597 </span><span class="lineNoCov">          0 :                     if ( h2!=h &amp;&amp; GGadgetIsListItemSelected(g,i)) {</span>
<span class="lineNum">    2598 </span><span class="lineNoCov">          0 :                         if (( h2-&gt;start&lt;h-&gt;start &amp;&amp; h2-&gt;start+h2-&gt;width&gt;h-&gt;start ) ||</span>
<span class="lineNum">    2599 </span><span class="lineNoCov">          0 :                             ( h2-&gt;start&gt;=h-&gt;start &amp;&amp; h-&gt;start+h-&gt;width&gt;h2-&gt;start ))</span>
<span class="lineNum">    2600 </span>            :                 break;
<span class="lineNum">    2601 </span>            :                     }
<span class="lineNum">    2602 </span>            :                 }
<span class="lineNum">    2603 </span>            :             } else {
<span class="lineNum">    2604 </span><span class="lineNoCov">          0 :                 j = i;</span>
<span class="lineNum">    2605 </span><span class="lineNoCov">          0 :                 for ( h=ci-&gt;cv-&gt;b.sc-&gt;vstem; h!=NULL &amp;&amp; i!=e-&gt;u.control.u.list.changed_index; h=h-&gt;next, ++i );</span>
<span class="lineNum">    2606 </span><span class="lineNoCov">          0 :                 if ( h==NULL )</span>
<span class="lineNum">    2607 </span><span class="lineNoCov">          0 :                     IError(&quot;Failed to find hint&quot;);</span>
<span class="lineNum">    2608 </span>            :                 else {
<span class="lineNum">    2609 </span><span class="lineNoCov">          0 :                     for ( h2 = ci-&gt;cv-&gt;b.sc-&gt;vstem, i=j ; h2!=NULL; h2=h2-&gt;next, ++i ) {</span>
<span class="lineNum">    2610 </span><span class="lineNoCov">          0 :                         if ( h2!=h &amp;&amp; GGadgetIsListItemSelected(g,i)) {</span>
<span class="lineNum">    2611 </span><span class="lineNoCov">          0 :                             if (( h2-&gt;start&lt;h-&gt;start &amp;&amp; h2-&gt;start+h2-&gt;width&gt;h-&gt;start ) ||</span>
<span class="lineNum">    2612 </span><span class="lineNoCov">          0 :                                 ( h2-&gt;start&gt;=h-&gt;start &amp;&amp; h-&gt;start+h-&gt;width&gt;h2-&gt;start ))</span>
<span class="lineNum">    2613 </span>            :                     break;
<span class="lineNum">    2614 </span>            :                         }
<span class="lineNum">    2615 </span>            :                     }
<span class="lineNum">    2616 </span>            :                 }
<span class="lineNum">    2617 </span>            :             }
<span class="lineNum">    2618 </span><span class="lineNoCov">          0 :             if ( h2!=NULL )</span>
<span class="lineNum">    2619 </span><span class="lineNoCov">          0 :                 ff_post_error(_(&quot;Overlapped Hints&quot;),_(&quot;The hint you have just selected overlaps with &lt;%.2f,%.2f&gt;. You should deselect one of the two.&quot;),</span>
<span class="lineNum">    2620 </span>            :                         h2-&gt;start,h2-&gt;width);
<span class="lineNum">    2621 </span>            :         }
<span class="lineNum">    2622 </span>            :     }
<span class="lineNum">    2623 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="2624"><span class="lineNum">    2624 </span>            : }</a>
<span class="lineNum">    2625 </span>            : 
<span class="lineNum">    2626 </span><span class="lineNoCov">          0 : GTextInfo *SCHintList(SplineChar *sc,HintMask *hm) {</span>
<span class="lineNum">    2627 </span>            :     StemInfo *h;
<span class="lineNum">    2628 </span>            :     int i;
<span class="lineNum">    2629 </span>            :     GTextInfo *ti;
<span class="lineNum">    2630 </span>            :     char buffer[100];
<span class="lineNum">    2631 </span>            : 
<span class="lineNum">    2632 </span><span class="lineNoCov">          0 :     for ( h=sc-&gt;hstem, i=0; h!=NULL; h=h-&gt;next, ++i );</span>
<span class="lineNum">    2633 </span><span class="lineNoCov">          0 :     for ( h=sc-&gt;vstem     ; h!=NULL; h=h-&gt;next, ++i );</span>
<span class="lineNum">    2634 </span><span class="lineNoCov">          0 :     ti = calloc(i+1,sizeof(GTextInfo));</span>
<span class="lineNum">    2635 </span>            : 
<span class="lineNum">    2636 </span><span class="lineNoCov">          0 :     for ( h=sc-&gt;hstem, i=0; h!=NULL; h=h-&gt;next, ++i ) {</span>
<span class="lineNum">    2637 </span><span class="lineNoCov">          0 :         ti[i].fg = ti[i].bg = COLOR_DEFAULT;</span>
<span class="lineNum">    2638 </span><span class="lineNoCov">          0 :         ti[i].userdata = h;</span>
<span class="lineNum">    2639 </span><span class="lineNoCov">          0 :         if ( h-&gt;ghost &amp;&amp; h-&gt;width&gt;0 )</span>
<span class="lineNum">    2640 </span><span class="lineNoCov">          0 :             sprintf( buffer, &quot;H&lt;%g,%g&gt;&quot;,</span>
<span class="lineNum">    2641 </span><span class="lineNoCov">          0 :                     rint(h-&gt;start*100)/100+rint(h-&gt;width*100)/100, -rint(h-&gt;width*100)/100 );</span>
<span class="lineNum">    2642 </span>            :         else
<span class="lineNum">    2643 </span><span class="lineNoCov">          0 :             sprintf( buffer, &quot;H&lt;%g,%g&gt;&quot;,</span>
<span class="lineNum">    2644 </span><span class="lineNoCov">          0 :                     rint(h-&gt;start*100)/100, rint(h-&gt;width*100)/100 );</span>
<span class="lineNum">    2645 </span><span class="lineNoCov">          0 :         ti[i].text = uc_copy(buffer);</span>
<span class="lineNum">    2646 </span><span class="lineNoCov">          0 :         if ( hm!=NULL &amp;&amp; ((*hm)[i&gt;&gt;3]&amp;(0x80&gt;&gt;(i&amp;7))))</span>
<span class="lineNum">    2647 </span><span class="lineNoCov">          0 :             ti[i].selected = true;</span>
<span class="lineNum">    2648 </span>            :     }
<span class="lineNum">    2649 </span>            : 
<span class="lineNum">    2650 </span><span class="lineNoCov">          0 :     for ( h=sc-&gt;vstem    ; h!=NULL; h=h-&gt;next, ++i ) {</span>
<span class="lineNum">    2651 </span><span class="lineNoCov">          0 :         ti[i].fg = ti[i].bg = COLOR_DEFAULT;</span>
<span class="lineNum">    2652 </span><span class="lineNoCov">          0 :         ti[i].userdata = h;</span>
<span class="lineNum">    2653 </span><span class="lineNoCov">          0 :         if ( h-&gt;ghost &amp;&amp; h-&gt;width&gt;0 )</span>
<span class="lineNum">    2654 </span><span class="lineNoCov">          0 :             sprintf( buffer, &quot;V&lt;%g,%g&gt;&quot;,</span>
<span class="lineNum">    2655 </span><span class="lineNoCov">          0 :                     rint(h-&gt;start*100)/100+rint(h-&gt;width*100)/100, -rint(h-&gt;width*100)/100 );</span>
<span class="lineNum">    2656 </span>            :         else
<span class="lineNum">    2657 </span><span class="lineNoCov">          0 :             sprintf( buffer, &quot;V&lt;%g,%g&gt;&quot;,</span>
<span class="lineNum">    2658 </span><span class="lineNoCov">          0 :                     rint(h-&gt;start*100)/100, rint(h-&gt;width*100)/100 );</span>
<span class="lineNum">    2659 </span><span class="lineNoCov">          0 :         ti[i].text = uc_copy(buffer);</span>
<span class="lineNum">    2660 </span><span class="lineNoCov">          0 :         if ( hm!=NULL &amp;&amp; ((*hm)[i&gt;&gt;3]&amp;(0x80&gt;&gt;(i&amp;7))))</span>
<span class="lineNum">    2661 </span><span class="lineNoCov">          0 :             ti[i].selected = true;</span>
<span class="lineNum">    2662 </span>            :     }
<span class="lineNum">    2663 </span><span class="lineNoCov">          0 : return( ti );</span>
<a name="2664"><span class="lineNum">    2664 </span>            : }</a>
<span class="lineNum">    2665 </span>            : 
<span class="lineNum">    2666 </span><span class="lineNoCov">          0 : static void PointGetInfo(CharView *cv, SplinePoint *sp, SplinePointList *spl) {</span>
<span class="lineNum">    2667 </span><span class="lineNoCov">          0 :     GIData* gi = 0;</span>
<span class="lineNum">    2668 </span>            :     GRect pos;
<span class="lineNum">    2669 </span>            :     GWindowAttrs wattrs;
<span class="lineNum">    2670 </span><span class="lineNoCov">          0 :     const int gcdcount = 54;</span>
<span class="lineNum">    2671 </span><span class="lineNoCov">          0 :     GGadgetCreateData gcd[gcdcount], hgcd[2], h2gcd[2], mgcd[11];</span>
<span class="lineNum">    2672 </span>            :     GGadgetCreateData mb[5], pb[9];
<span class="lineNum">    2673 </span>            :     GGadgetCreateData *marray[11], *marray2[5], *marray3[5], *marray4[7],
<span class="lineNum">    2674 </span>            :         *varray[11], *harray1[4], *harray2[6], *hvarray1[25], *hvarray2[25],
<span class="lineNum">    2675 </span>            :         *hvarray3[16], *harray3[13];
<span class="lineNum">    2676 </span>            :     GTextInfo label[54], mlabel[11];
<span class="lineNum">    2677 </span>            :     GTabInfo aspects[4];
<span class="lineNum">    2678 </span>            :     static GBox cur, nextcp, prevcp;
<span class="lineNum">    2679 </span>            :     extern Color nextcpcol, prevcpcol;
<span class="lineNum">    2680 </span>            :     GWindow root;
<span class="lineNum">    2681 </span>            :     GRect screensize;
<span class="lineNum">    2682 </span>            :     GPoint pt;
<span class="lineNum">    2683 </span>            :     int j, defxpos, nextstarty, k, l;
<span class="lineNum">    2684 </span>            : 
<span class="lineNum">    2685 </span><span class="lineNoCov">          0 :     gi = calloc(1,sizeof(GIData));</span>
<span class="lineNum">    2686 </span>            : 
<span class="lineNum">    2687 </span><span class="lineNoCov">          0 :     cur.main_background = nextcp.main_background = prevcp.main_background = COLOR_DEFAULT;</span>
<span class="lineNum">    2688 </span><span class="lineNoCov">          0 :     cur.main_foreground = 0xff0000;</span>
<span class="lineNum">    2689 </span><span class="lineNoCov">          0 :     nextcp.main_foreground = nextcpcol;</span>
<span class="lineNum">    2690 </span><span class="lineNoCov">          0 :     prevcp.main_foreground = prevcpcol;</span>
<span class="lineNum">    2691 </span><span class="lineNoCov">          0 :     gi-&gt;cv = cv;</span>
<span class="lineNum">    2692 </span><span class="lineNoCov">          0 :     gi-&gt;sc = cv-&gt;b.sc;</span>
<span class="lineNum">    2693 </span><span class="lineNoCov">          0 :     gi-&gt;cursp = sp;</span>
<span class="lineNum">    2694 </span><span class="lineNoCov">          0 :     gi-&gt;curspl = spl;</span>
<span class="lineNum">    2695 </span><span class="lineNoCov">          0 :     gi-&gt;oldstate = SplinePointListCopy(cv-&gt;b.layerheads[cv-&gt;b.drawmode]-&gt;splines);</span>
<span class="lineNum">    2696 </span><span class="lineNoCov">          0 :     gi-&gt;done = false;</span>
<span class="lineNum">    2697 </span><span class="lineNoCov">          0 :     CVPreserveState(&amp;cv-&gt;b);</span>
<span class="lineNum">    2698 </span>            : 
<span class="lineNum">    2699 </span><span class="lineNoCov">          0 :     root = GDrawGetRoot(NULL);</span>
<span class="lineNum">    2700 </span><span class="lineNoCov">          0 :     GDrawGetSize(root,&amp;screensize);</span>
<span class="lineNum">    2701 </span>            : 
<span class="lineNum">    2702 </span><span class="lineNoCov">          0 :         memset(&amp;wattrs,0,sizeof(wattrs));</span>
<span class="lineNum">    2703 </span><span class="lineNoCov">          0 :         wattrs.mask = wam_events|wam_cursor|wam_utf8_wtitle|wam_positioned|wam_isdlg;</span>
<span class="lineNum">    2704 </span><span class="lineNoCov">          0 :         wattrs.event_masks = ~(1&lt;&lt;et_charup);</span>
<span class="lineNum">    2705 </span><span class="lineNoCov">          0 :         wattrs.restrict_input_to_me = 1;</span>
<span class="lineNum">    2706 </span><span class="lineNoCov">          0 :         wattrs.positioned = 1;</span>
<span class="lineNum">    2707 </span><span class="lineNoCov">          0 :         wattrs.cursor = ct_pointer;</span>
<span class="lineNum">    2708 </span><span class="lineNoCov">          0 :         wattrs.utf8_window_title = _(&quot;Point Info&quot;);</span>
<span class="lineNum">    2709 </span><span class="lineNoCov">          0 :         wattrs.is_dlg = true;</span>
<span class="lineNum">    2710 </span><span class="lineNoCov">          0 :         pos.width = GGadgetScale(GDrawPointsToPixels(NULL,PI_Width));</span>
<span class="lineNum">    2711 </span><span class="lineNoCov">          0 :         pos.height = GDrawPointsToPixels(NULL,PI_Height);</span>
<span class="lineNum">    2712 </span><span class="lineNoCov">          0 :         pt.x = cv-&gt;xoff + rint(sp-&gt;me.x*cv-&gt;scale);</span>
<span class="lineNum">    2713 </span><span class="lineNoCov">          0 :         pt.y = -cv-&gt;yoff + cv-&gt;height - rint(sp-&gt;me.y*cv-&gt;scale);</span>
<span class="lineNum">    2714 </span><span class="lineNoCov">          0 :         GDrawTranslateCoordinates(cv-&gt;v,root,&amp;pt);</span>
<span class="lineNum">    2715 </span><span class="lineNoCov">          0 :         if ( pt.x+20+pos.width&lt;=screensize.width )</span>
<span class="lineNum">    2716 </span><span class="lineNoCov">          0 :             pos.x = pt.x+20;</span>
<span class="lineNum">    2717 </span><span class="lineNoCov">          0 :         else if ( (pos.x = pt.x-10-screensize.width)&lt;0 )</span>
<span class="lineNum">    2718 </span><span class="lineNoCov">          0 :             pos.x = 0;</span>
<span class="lineNum">    2719 </span><span class="lineNoCov">          0 :         pos.y = pt.y;</span>
<span class="lineNum">    2720 </span><span class="lineNoCov">          0 :         if ( pos.y+pos.height+20 &gt; screensize.height )</span>
<span class="lineNum">    2721 </span><span class="lineNoCov">          0 :             pos.y = screensize.height - pos.height - 20;</span>
<span class="lineNum">    2722 </span><span class="lineNoCov">          0 :         if ( pos.y&lt;0 ) pos.y = 0;</span>
<span class="lineNum">    2723 </span><span class="lineNoCov">          0 :         gi-&gt;gw = GDrawCreateTopWindow(NULL,&amp;pos,pi_e_h,gi,&amp;wattrs);</span>
<span class="lineNum">    2724 </span>            : 
<span class="lineNum">    2725 </span><span class="lineNoCov">          0 :         memset(&amp;gcd,0,sizeof(gcd));</span>
<span class="lineNum">    2726 </span><span class="lineNoCov">          0 :         memset(&amp;label,0,sizeof(label));</span>
<span class="lineNum">    2727 </span><span class="lineNoCov">          0 :         memset(&amp;hgcd,0,sizeof(hgcd));</span>
<span class="lineNum">    2728 </span><span class="lineNoCov">          0 :         memset(&amp;h2gcd,0,sizeof(h2gcd));</span>
<span class="lineNum">    2729 </span><span class="lineNoCov">          0 :         memset(&amp;mgcd,0,sizeof(mgcd));</span>
<span class="lineNum">    2730 </span><span class="lineNoCov">          0 :         memset(&amp;mlabel,0,sizeof(mlabel));</span>
<span class="lineNum">    2731 </span><span class="lineNoCov">          0 :         memset(&amp;aspects,0,sizeof(aspects));</span>
<span class="lineNum">    2732 </span><span class="lineNoCov">          0 :         memset(&amp;pb,0,sizeof(pb));</span>
<span class="lineNum">    2733 </span>            : 
<span class="lineNum">    2734 </span><span class="lineNoCov">          0 :         j=k=0;</span>
<span class="lineNum">    2735 </span><span class="lineNoCov">          0 :         gi-&gt;gcd = malloc( gcdcount*sizeof(GGadgetCreateData) );</span>
<span class="lineNum">    2736 </span><span class="lineNoCov">          0 :         memcpy( gi-&gt;gcd, gcd, gcdcount*sizeof(GGadgetCreateData) );</span>
<span class="lineNum">    2737 </span>            : 
<span class="lineNum">    2738 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_Normal&quot;);</span>
<span class="lineNum">    2739 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    2740 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    2741 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    2742 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 5; gcd[j].gd.pos.y = 5;</span>
<span class="lineNum">    2743 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible|gg_cb_on;</span>
<span class="lineNum">    2744 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Normal;</span>
<span class="lineNum">    2745 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_InterpChanged;</span>
<span class="lineNum">    2746 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    2747 </span><span class="lineNoCov">          0 :         harray1[0] = &amp;gcd[j];</span>
<span class="lineNum">    2748 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2749 </span>            : 
<span class="lineNum">    2750 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_Interpolated&quot;);</span>
<span class="lineNum">    2751 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    2752 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    2753 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    2754 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 70; gcd[j].gd.pos.y = 5;</span>
<span class="lineNum">    2755 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible | gg_rad_continueold;</span>
<span class="lineNum">    2756 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Interpolated;</span>
<span class="lineNum">    2757 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_InterpChanged;</span>
<span class="lineNum">    2758 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    2759 </span><span class="lineNoCov">          0 :         harray1[1] = &amp;gcd[j]; harray1[2] = GCD_Glue; harray1[3] = NULL;</span>
<span class="lineNum">    2760 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2761 </span>            : 
<span class="lineNum">    2762 </span><span class="lineNoCov">          0 :         pb[2].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2763 </span><span class="lineNoCov">          0 :         pb[2].gd.u.boxelements = harray1;</span>
<span class="lineNum">    2764 </span><span class="lineNoCov">          0 :         pb[2].creator = GHBoxCreate;</span>
<span class="lineNum">    2765 </span><span class="lineNoCov">          0 :         varray[k++] = &amp;pb[2];</span>
<span class="lineNum">    2766 </span>            : 
<span class="lineNum">    2767 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;N_ever Interpolate&quot;);</span>
<span class="lineNum">    2768 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    2769 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    2770 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    2771 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 5; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+16;</span>
<span class="lineNum">    2772 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = cv-&gt;b.layerheads[cv-&gt;b.drawmode]-&gt;order2 ? (gg_enabled|gg_visible) : gg_visible;</span>
<span class="lineNum">    2773 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_NeverInterpolate;</span>
<span class="lineNum">    2774 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_NeverInterpChanged;</span>
<span class="lineNum">    2775 </span><span class="lineNoCov">          0 :         gcd[j].creator = GCheckBoxCreate;</span>
<span class="lineNum">    2776 </span><span class="lineNoCov">          0 :         varray[k++] = &amp;gcd[j];</span>
<span class="lineNum">    2777 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2778 </span>            : 
<span class="lineNum">    2779 </span><span class="lineNoCov">          0 :         gi-&gt;normal_start = j;</span>
<span class="lineNum">    2780 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_Base:&quot;);</span>
<span class="lineNum">    2781 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    2782 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    2783 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    2784 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 5; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+17+6;</span>
<span class="lineNum">    2785 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible|gg_dontcopybox;</span>
<span class="lineNum">    2786 </span><span class="lineNoCov">          0 :         gcd[j].gd.box = &amp;cur;</span>
<span class="lineNum">    2787 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    2788 </span><span class="lineNoCov">          0 :         harray2[0] = &amp;gcd[j]; harray2[1] = GCD_Glue;</span>
<span class="lineNum">    2789 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2790 </span>            : 
<span class="lineNum">    2791 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-6; gcd[j].gd.pos.width = 70;</span>
<span class="lineNum">    2792 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2793 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_BaseX;</span>
<span class="lineNum">    2794 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_BaseChanged;</span>
<span class="lineNum">    2795 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    2796 </span><span class="lineNoCov">          0 :         harray2[2] = &amp;gcd[j];</span>
<span class="lineNum">    2797 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2798 </span>            : 
<span class="lineNum">    2799 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 137; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y; gcd[j].gd.pos.width = 70;</span>
<span class="lineNum">    2800 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2801 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_BaseY;</span>
<span class="lineNum">    2802 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_BaseChanged;</span>
<span class="lineNum">    2803 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    2804 </span><span class="lineNoCov">          0 :         harray2[3] = &amp;gcd[j]; harray2[4] = GCD_Glue; harray2[5] = NULL;</span>
<span class="lineNum">    2805 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2806 </span>            : 
<span class="lineNum">    2807 </span><span class="lineNoCov">          0 :         pb[3].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2808 </span><span class="lineNoCov">          0 :         pb[3].gd.u.boxelements = harray2;</span>
<span class="lineNum">    2809 </span><span class="lineNoCov">          0 :         pb[3].creator = GHBoxCreate;</span>
<span class="lineNum">    2810 </span><span class="lineNoCov">          0 :         varray[k++] = &amp;pb[3];</span>
<span class="lineNum">    2811 </span>            : 
<span class="lineNum">    2812 </span><span class="lineNoCov">          0 :         l = 0;</span>
<span class="lineNum">    2813 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Prev CP:&quot;);</span>
<span class="lineNum">    2814 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    2815 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    2816 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 9; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+24+4;</span>
<span class="lineNum">    2817 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible|gg_dontcopybox;</span>
<span class="lineNum">    2818 </span><span class="lineNoCov">          0 :         gcd[j].gd.box = &amp;prevcp;</span>
<span class="lineNum">    2819 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    2820 </span><span class="lineNoCov">          0 :         hvarray1[l++] = &amp;gcd[j]; hvarray1[l++] = GCD_Glue;</span>
<span class="lineNum">    2821 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2822 </span>            : 
<span class="lineNum">    2823 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y; gcd[j].gd.pos.width = 65;</span>
<span class="lineNum">    2824 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2825 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_PrevPos;</span>
<span class="lineNum">    2826 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    2827 </span><span class="lineNoCov">          0 :         hvarray1[l++] = &amp;gcd[j];</span>
<span class="lineNum">    2828 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2829 </span>            : 
<span class="lineNum">    2830 </span><span class="lineNoCov">          0 :         defxpos = 130;</span>
<span class="lineNum">    2831 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) S_(&quot;ControlPoint|Default&quot;);</span>
<span class="lineNum">    2832 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    2833 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    2834 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = defxpos; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-3;</span>
<span class="lineNum">    2835 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = (gg_enabled|gg_visible);</span>
<span class="lineNum">    2836 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_PrevDef;</span>
<span class="lineNum">    2837 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_PrevDefChanged;</span>
<span class="lineNum">    2838 </span><span class="lineNoCov">          0 :         gcd[j].creator = GCheckBoxCreate;</span>
<span class="lineNum">    2839 </span><span class="lineNoCov">          0 :         hvarray1[l++] = &amp;gcd[j]; hvarray1[l++] = GCD_ColSpan; hvarray1[l++] = NULL;</span>
<span class="lineNum">    2840 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2841 </span>            : 
<span class="lineNum">    2842 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Offset&quot;);</span>
<span class="lineNum">    2843 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    2844 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    2845 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = gcd[3].gd.pos.x+10; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+18+4;</span>
<span class="lineNum">    2846 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2847 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    2848 </span><span class="lineNoCov">          0 :         hvarray1[l++] = &amp;gcd[j]; hvarray1[l++] = GCD_Glue;</span>
<span class="lineNum">    2849 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2850 </span>            : 
<span class="lineNum">    2851 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-4; gcd[j].gd.pos.width = 70;</span>
<span class="lineNum">    2852 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2853 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_PrevXOff;</span>
<span class="lineNum">    2854 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_PrevChanged;</span>
<span class="lineNum">    2855 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    2856 </span><span class="lineNoCov">          0 :         hvarray1[l++] = &amp;gcd[j];</span>
<span class="lineNum">    2857 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2858 </span>            : 
<span class="lineNum">    2859 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 137; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y; gcd[j].gd.pos.width = 70;</span>
<span class="lineNum">    2860 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2861 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_PrevYOff;</span>
<span class="lineNum">    2862 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_PrevChanged;</span>
<span class="lineNum">    2863 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    2864 </span><span class="lineNoCov">          0 :         hvarray1[l++] = &amp;gcd[j]; hvarray1[l++] = GCD_ColSpan; hvarray1[l++] = NULL;</span>
<span class="lineNum">    2865 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2866 </span>            : 
<span class="lineNum">    2867 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Dist&quot;);</span>
<span class="lineNum">    2868 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    2869 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    2870 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = gcd[3].gd.pos.x+10; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+28;</span>
<span class="lineNum">    2871 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2872 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    2873 </span><span class="lineNoCov">          0 :         hvarray1[l++] = &amp;gcd[j]; hvarray1[l++] = GCD_Glue;</span>
<span class="lineNum">    2874 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2875 </span>            : 
<span class="lineNum">    2876 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-4; gcd[j].gd.pos.width = 70;</span>
<span class="lineNum">    2877 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2878 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_PrevR;</span>
<span class="lineNum">    2879 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_PrevChanged;</span>
<span class="lineNum">    2880 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    2881 </span><span class="lineNoCov">          0 :         hvarray1[l++] = &amp;gcd[j];</span>
<span class="lineNum">    2882 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2883 </span>            : 
<span class="lineNum">    2884 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 137; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y; gcd[j].gd.pos.width = 60;</span>
<span class="lineNum">    2885 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2886 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_PrevTheta;</span>
<span class="lineNum">    2887 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_PrevChanged;</span>
<span class="lineNum">    2888 </span><span class="lineNoCov">          0 :         gcd[j].creator = GTextFieldCreate;</span>
<span class="lineNum">    2889 </span><span class="lineNoCov">          0 :         hvarray1[l++] = &amp;gcd[j];</span>
<span class="lineNum">    2890 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2891 </span>            : 
<span class="lineNum">    2892 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) U_(&quot;&quot;);</span>
<span class="lineNum">    2893 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    2894 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    2895 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = gcd[j-1].gd.pos.x+gcd[j-1].gd.pos.width+2; gcd[j].gd.pos.y = gcd[j-3].gd.pos.y;</span>
<span class="lineNum">    2896 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2897 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    2898 </span><span class="lineNoCov">          0 :         hvarray1[l++] = &amp;gcd[j]; hvarray1[l++] = NULL;</span>
<span class="lineNum">    2899 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2900 </span>            : 
<span class="lineNum">    2901 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Curvature: -0.00000000&quot;);</span>
<span class="lineNum">    2902 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    2903 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    2904 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 9; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+20;</span>
<span class="lineNum">    2905 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2906 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_PrevCurvature;</span>
<span class="lineNum">    2907 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    2908 </span><span class="lineNoCov">          0 :         hvarray1[l++] = &amp;gcd[j]; hvarray1[l++] = GCD_ColSpan; hvarray1[l++] = GCD_ColSpan;</span>
<span class="lineNum">    2909 </span><span class="lineNoCov">          0 :           hvarray1[l++] = GCD_Glue; hvarray1[l++] = GCD_Glue; hvarray1[l++] = NULL;</span>
<span class="lineNum">    2910 </span><span class="lineNoCov">          0 :          hvarray1[l++] = NULL;</span>
<span class="lineNum">    2911 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2912 </span>            : 
<span class="lineNum">    2913 </span><span class="lineNoCov">          0 :         pb[4].gd.pos.x = pb[4].gd.pos.y = 2;</span>
<span class="lineNum">    2914 </span><span class="lineNoCov">          0 :         pb[4].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2915 </span><span class="lineNoCov">          0 :         pb[4].gd.u.boxelements = hvarray1;</span>
<span class="lineNum">    2916 </span><span class="lineNoCov">          0 :         pb[4].creator = GHVGroupCreate;</span>
<span class="lineNum">    2917 </span><span class="lineNoCov">          0 :         varray[k++] = &amp;pb[4];</span>
<span class="lineNum">    2918 </span>            : 
<span class="lineNum">    2919 </span><span class="lineNoCov">          0 :         l = 0;</span>
<span class="lineNum">    2920 </span><span class="lineNoCov">          0 :         nextstarty = gcd[j-2].gd.pos.y+28;</span>
<span class="lineNum">    2921 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Next CP:&quot;);</span>
<span class="lineNum">    2922 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    2923 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    2924 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 9; gcd[j].gd.pos.y = nextstarty;</span>
<span class="lineNum">    2925 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible|gg_dontcopybox;</span>
<span class="lineNum">    2926 </span><span class="lineNoCov">          0 :         gcd[j].gd.box = &amp;nextcp;</span>
<span class="lineNum">    2927 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    2928 </span><span class="lineNoCov">          0 :         hvarray2[l++] = &amp;gcd[j]; hvarray2[l++] = GCD_Glue;</span>
<span class="lineNum">    2929 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2930 </span>            : 
<span class="lineNum">    2931 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = nextstarty;  gcd[j].gd.pos.width = 65;</span>
<span class="lineNum">    2932 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2933 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_NextPos;</span>
<span class="lineNum">    2934 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    2935 </span><span class="lineNoCov">          0 :         hvarray2[l++] = &amp;gcd[j];</span>
<span class="lineNum">    2936 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2937 </span>            : 
<span class="lineNum">    2938 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) S_(&quot;ControlPoint|Default&quot;);</span>
<span class="lineNum">    2939 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    2940 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    2941 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = defxpos; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-3;</span>
<span class="lineNum">    2942 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = (gg_enabled|gg_visible);</span>
<span class="lineNum">    2943 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_NextDef;</span>
<span class="lineNum">    2944 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_NextDefChanged;</span>
<span class="lineNum">    2945 </span><span class="lineNoCov">          0 :         gcd[j].creator = GCheckBoxCreate;</span>
<span class="lineNum">    2946 </span><span class="lineNoCov">          0 :         hvarray2[l++] = &amp;gcd[j]; hvarray2[l++] = GCD_ColSpan; hvarray2[l++] = NULL;</span>
<span class="lineNum">    2947 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2948 </span>            : 
<span class="lineNum">    2949 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Offset&quot;);</span>
<span class="lineNum">    2950 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    2951 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    2952 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = gcd[3].gd.pos.x+10; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+18+4;</span>
<span class="lineNum">    2953 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2954 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    2955 </span><span class="lineNoCov">          0 :         hvarray2[l++] = &amp;gcd[j]; hvarray2[l++] = GCD_Glue;</span>
<span class="lineNum">    2956 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2957 </span>            : 
<span class="lineNum">    2958 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-4; gcd[j].gd.pos.width = 70;</span>
<span class="lineNum">    2959 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2960 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_NextXOff;</span>
<span class="lineNum">    2961 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_NextChanged;</span>
<span class="lineNum">    2962 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    2963 </span><span class="lineNoCov">          0 :         hvarray2[l++] = &amp;gcd[j];</span>
<span class="lineNum">    2964 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2965 </span>            : 
<span class="lineNum">    2966 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 137; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y; gcd[j].gd.pos.width = 70;</span>
<span class="lineNum">    2967 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2968 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_NextYOff;</span>
<span class="lineNum">    2969 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_NextChanged;</span>
<span class="lineNum">    2970 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    2971 </span><span class="lineNoCov">          0 :         hvarray2[l++] = &amp;gcd[j]; hvarray2[l++] = GCD_ColSpan; hvarray2[l++] = NULL;</span>
<span class="lineNum">    2972 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2973 </span>            : 
<span class="lineNum">    2974 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Dist&quot;);</span>
<span class="lineNum">    2975 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    2976 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    2977 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = gcd[3].gd.pos.x+10; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+28;</span>
<span class="lineNum">    2978 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2979 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    2980 </span><span class="lineNoCov">          0 :         hvarray2[l++] = &amp;gcd[j]; hvarray2[l++] = GCD_Glue;</span>
<span class="lineNum">    2981 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2982 </span>            : 
<span class="lineNum">    2983 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-4; gcd[j].gd.pos.width = 70;</span>
<span class="lineNum">    2984 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2985 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_NextR;</span>
<span class="lineNum">    2986 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_NextChanged;</span>
<span class="lineNum">    2987 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    2988 </span><span class="lineNoCov">          0 :         hvarray2[l++] = &amp;gcd[j];</span>
<span class="lineNum">    2989 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2990 </span>            : 
<span class="lineNum">    2991 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 137; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y; gcd[j].gd.pos.width = 60;</span>
<span class="lineNum">    2992 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    2993 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_NextTheta;</span>
<span class="lineNum">    2994 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_NextChanged;</span>
<span class="lineNum">    2995 </span><span class="lineNoCov">          0 :         gcd[j].creator = GTextFieldCreate;</span>
<span class="lineNum">    2996 </span><span class="lineNoCov">          0 :         hvarray2[l++] = &amp;gcd[j];</span>
<span class="lineNum">    2997 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    2998 </span>            : 
<span class="lineNum">    2999 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) U_(&quot;&quot;);</span>
<span class="lineNum">    3000 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3001 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3002 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = gcd[j-1].gd.pos.x+gcd[j-1].gd.pos.width+2; gcd[j].gd.pos.y = gcd[j-3].gd.pos.y;</span>
<span class="lineNum">    3003 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3004 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    3005 </span><span class="lineNoCov">          0 :         hvarray2[l++] = &amp;gcd[j]; hvarray2[l++] = NULL;</span>
<span class="lineNum">    3006 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3007 </span>            : 
<span class="lineNum">    3008 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Curvature: -0.00000000&quot;);</span>
<span class="lineNum">    3009 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3010 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3011 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 9; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+20;</span>
<span class="lineNum">    3012 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3013 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_NextCurvature;</span>
<span class="lineNum">    3014 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    3015 </span><span class="lineNoCov">          0 :         hvarray2[l++] = &amp;gcd[j]; hvarray2[l++] = GCD_ColSpan; hvarray2[l++] = GCD_ColSpan;</span>
<span class="lineNum">    3016 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3017 </span>            : 
<span class="lineNum">    3018 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) &quot;: -0.00000000&quot;;</span>
<span class="lineNum">    3019 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3020 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3021 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 130; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y;</span>
<span class="lineNum">    3022 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible|gg_utf8_popup;</span>
<span class="lineNum">    3023 </span><span class="lineNoCov">          0 :         gcd[j].gd.popup_msg = (unichar_t *) _(&quot;This is the difference of the curvature between\nthe next and previous splines. Contours often\nlook nicer as this number approaches 0.&quot; );</span>
<span class="lineNum">    3024 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_DeltaCurvature;</span>
<span class="lineNum">    3025 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    3026 </span><span class="lineNoCov">          0 :         hvarray2[l++] = &amp;gcd[j]; hvarray2[l++] = GCD_ColSpan; hvarray2[l++] = NULL;</span>
<span class="lineNum">    3027 </span><span class="lineNoCov">          0 :         hvarray2[l++] = NULL;</span>
<span class="lineNum">    3028 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3029 </span>            : 
<span class="lineNum">    3030 </span><span class="lineNoCov">          0 :         pb[5].gd.pos.x = pb[5].gd.pos.y = 2;</span>
<span class="lineNum">    3031 </span><span class="lineNoCov">          0 :         pb[5].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3032 </span><span class="lineNoCov">          0 :         pb[5].gd.u.boxelements = hvarray2;</span>
<span class="lineNum">    3033 </span><span class="lineNoCov">          0 :         pb[5].creator = GHVGroupCreate;</span>
<span class="lineNum">    3034 </span><span class="lineNoCov">          0 :         varray[k++] = &amp;pb[5];</span>
<span class="lineNum">    3035 </span><span class="lineNoCov">          0 :         gi-&gt;normal_end = j;</span>
<span class="lineNum">    3036 </span>            : 
<span class="lineNum">    3037 </span><span class="lineNoCov">          0 :         gi-&gt;interp_start = j;</span>
<span class="lineNum">    3038 </span><span class="lineNoCov">          0 :         l = 0;</span>
<span class="lineNum">    3039 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_Base:&quot;);</span>
<span class="lineNum">    3040 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3041 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    3042 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3043 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 5; gcd[j].gd.pos.y = gcd[gi-&gt;normal_start].gd.pos.y;</span>
<span class="lineNum">    3044 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible|gg_dontcopybox;</span>
<span class="lineNum">    3045 </span><span class="lineNoCov">          0 :         gcd[j].gd.box = &amp;cur;</span>
<span class="lineNum">    3046 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    3047 </span><span class="lineNoCov">          0 :         hvarray3[l++] = &amp;gcd[j]; hvarray3[l++] = GCD_Glue;</span>
<span class="lineNum">    3048 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3049 </span>            : 
<span class="lineNum">    3050 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y; gcd[j].gd.pos.width = 65;</span>
<span class="lineNum">    3051 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3052 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_BasePos;</span>
<span class="lineNum">    3053 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    3054 </span><span class="lineNoCov">          0 :         hvarray3[l++] = &amp;gcd[j]; hvarray3[l++] = GCD_Glue; hvarray3[l++] = NULL;</span>
<span class="lineNum">    3055 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3056 </span>            : 
<span class="lineNum">    3057 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Prev CP:&quot;);</span>
<span class="lineNum">    3058 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3059 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3060 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 9; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+14+4;</span>
<span class="lineNum">    3061 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible|gg_dontcopybox;</span>
<span class="lineNum">    3062 </span><span class="lineNoCov">          0 :         gcd[j].gd.box = &amp;prevcp;</span>
<span class="lineNum">    3063 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    3064 </span><span class="lineNoCov">          0 :         hvarray3[l++] = &amp;gcd[j]; hvarray3[l++] = GCD_Glue;</span>
<span class="lineNum">    3065 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3066 </span>            : 
<span class="lineNum">    3067 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-4; gcd[j].gd.pos.width = 70;</span>
<span class="lineNum">    3068 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3069 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_PrevX;</span>
<span class="lineNum">    3070 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_PrevIntChanged;</span>
<span class="lineNum">    3071 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    3072 </span><span class="lineNoCov">          0 :         hvarray3[l++] = &amp;gcd[j];</span>
<span class="lineNum">    3073 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3074 </span>            : 
<span class="lineNum">    3075 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 137; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y; gcd[j].gd.pos.width = 70;</span>
<span class="lineNum">    3076 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3077 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_PrevY;</span>
<span class="lineNum">    3078 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_PrevIntChanged;</span>
<span class="lineNum">    3079 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    3080 </span><span class="lineNoCov">          0 :         hvarray3[l++] = &amp;gcd[j]; hvarray3[l++] = NULL;</span>
<span class="lineNum">    3081 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3082 </span>            : 
<span class="lineNum">    3083 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Next CP:&quot;);</span>
<span class="lineNum">    3084 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3085 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3086 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 9; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+24+4;</span>
<span class="lineNum">    3087 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible|gg_dontcopybox;</span>
<span class="lineNum">    3088 </span><span class="lineNoCov">          0 :         gcd[j].gd.box = &amp;nextcp;</span>
<span class="lineNum">    3089 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    3090 </span><span class="lineNoCov">          0 :         hvarray3[l++] = &amp;gcd[j]; hvarray3[l++] = GCD_Glue;</span>
<span class="lineNum">    3091 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3092 </span>            : 
<span class="lineNum">    3093 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-4; gcd[j].gd.pos.width = 70;</span>
<span class="lineNum">    3094 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3095 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_NextX;</span>
<span class="lineNum">    3096 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_NextIntChanged;</span>
<span class="lineNum">    3097 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    3098 </span><span class="lineNoCov">          0 :         hvarray3[l++] = &amp;gcd[j];</span>
<span class="lineNum">    3099 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3100 </span>            : 
<span class="lineNum">    3101 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 137; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y; gcd[j].gd.pos.width = 70;</span>
<span class="lineNum">    3102 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3103 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_NextY;</span>
<span class="lineNum">    3104 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_NextIntChanged;</span>
<span class="lineNum">    3105 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    3106 </span><span class="lineNoCov">          0 :         hvarray3[l++] = &amp;gcd[j]; hvarray3[l++] = NULL; hvarray3[l++] = NULL;</span>
<span class="lineNum">    3107 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3108 </span><span class="lineNoCov">          0 :         gi-&gt;interp_end = j;</span>
<span class="lineNum">    3109 </span>            : 
<span class="lineNum">    3110 </span><span class="lineNoCov">          0 :         pb[6].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3111 </span><span class="lineNoCov">          0 :         pb[6].gd.u.boxelements = hvarray3;</span>
<span class="lineNum">    3112 </span><span class="lineNoCov">          0 :         pb[6].creator = GHVBoxCreate;</span>
<span class="lineNum">    3113 </span><span class="lineNoCov">          0 :         varray[k++] = &amp;pb[6];</span>
<span class="lineNum">    3114 </span><span class="lineNoCov">          0 :         varray[k++] = GCD_Glue;</span>
<span class="lineNum">    3115 </span>            : 
<span class="lineNum">    3116 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Type:&quot;);</span>
<span class="lineNum">    3117 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3118 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3119 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = gcd[0].gd.pos.x; gcd[j].gd.pos.y = gcd[gi-&gt;normal_end-2].gd.pos.y+26;</span>
<span class="lineNum">    3120 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3121 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    3122 </span><span class="lineNoCov">          0 :         harray3[0] = &amp;gcd[j]; harray3[1] = GCD_Glue; harray3[2] = GCD_Glue;</span>
<span class="lineNum">    3123 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3124 </span>            : 
<span class="lineNum">    3125 </span><span class="lineNoCov">          0 :         label[j].image = &amp;GIcon_midcurve;</span>
<span class="lineNum">    3126 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3127 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-2;</span>
<span class="lineNum">    3128 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3129 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Curve;</span>
<span class="lineNum">    3130 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_PTypeChanged;</span>
<span class="lineNum">    3131 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    3132 </span><span class="lineNoCov">          0 :         harray3[3] = &amp;gcd[j]; harray3[4] = GCD_Glue;</span>
<span class="lineNum">    3133 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3134 </span>            : 
<span class="lineNum">    3135 </span><span class="lineNoCov">          0 :         label[j].image = &amp;GIcon_midhvcurve;</span>
<span class="lineNum">    3136 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3137 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-2;</span>
<span class="lineNum">    3138 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3139 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_HVCurve;</span>
<span class="lineNum">    3140 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_PTypeChanged;</span>
<span class="lineNum">    3141 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    3142 </span><span class="lineNoCov">          0 :         harray3[5] = &amp;gcd[j]; harray3[6] = GCD_Glue;</span>
<span class="lineNum">    3143 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3144 </span>            : 
<span class="lineNum">    3145 </span><span class="lineNoCov">          0 :         label[j].image = &amp;GIcon_midcorner;</span>
<span class="lineNum">    3146 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3147 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 100; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y;</span>
<span class="lineNum">    3148 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible | gg_rad_continueold;</span>
<span class="lineNum">    3149 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Corner;</span>
<span class="lineNum">    3150 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_PTypeChanged;</span>
<span class="lineNum">    3151 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    3152 </span><span class="lineNoCov">          0 :         harray3[7] = &amp;gcd[j]; harray3[8] = GCD_Glue;</span>
<span class="lineNum">    3153 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3154 </span>            : 
<span class="lineNum">    3155 </span><span class="lineNoCov">          0 :         label[j].image = &amp;GIcon_midtangent;</span>
<span class="lineNum">    3156 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3157 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 140; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y;</span>
<span class="lineNum">    3158 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible | gg_rad_continueold;</span>
<span class="lineNum">    3159 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Tangent;</span>
<span class="lineNum">    3160 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_PTypeChanged;</span>
<span class="lineNum">    3161 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    3162 </span><span class="lineNoCov">          0 :         harray3[9] = &amp;gcd[j]; harray3[10] = GCD_Glue; harray3[11] = GCD_Glue;</span>
<span class="lineNum">    3163 </span><span class="lineNoCov">          0 :         harray3[12] = NULL;</span>
<span class="lineNum">    3164 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3165 </span>            : 
<span class="lineNum">    3166 </span><span class="lineNoCov">          0 :         pb[7].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3167 </span><span class="lineNoCov">          0 :         pb[7].gd.u.boxelements = harray3;</span>
<span class="lineNum">    3168 </span><span class="lineNoCov">          0 :         pb[7].creator = GHBoxCreate;</span>
<span class="lineNum">    3169 </span><span class="lineNoCov">          0 :         varray[k++] = &amp;pb[7];</span>
<span class="lineNum">    3170 </span><span class="lineNoCov">          0 :         varray[k++] = NULL;</span>
<span class="lineNum">    3171 </span>            : 
<span class="lineNum">    3172 </span><span class="lineNoCov">          0 :         pb[0].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3173 </span><span class="lineNoCov">          0 :         pb[0].gd.u.boxelements = varray;</span>
<span class="lineNum">    3174 </span><span class="lineNoCov">          0 :         pb[0].creator = GVBoxCreate;</span>
<span class="lineNum">    3175 </span>            : 
<span class="lineNum">    3176 </span><span class="lineNoCov">          0 :         hgcd[0].gd.pos.x = 5; hgcd[0].gd.pos.y = 5;</span>
<span class="lineNum">    3177 </span><span class="lineNoCov">          0 :         hgcd[0].gd.pos.width = PI_Width-20; hgcd[0].gd.pos.height = gcd[j-1].gd.pos.y+10;</span>
<span class="lineNum">    3178 </span><span class="lineNoCov">          0 :         hgcd[0].gd.flags = gg_visible | gg_enabled | gg_list_multiplesel;</span>
<span class="lineNum">    3179 </span><span class="lineNoCov">          0 :         hgcd[0].gd.cid = CID_HintMask;</span>
<span class="lineNum">    3180 </span><span class="lineNoCov">          0 :         hgcd[0].gd.u.list = SCHintList(cv-&gt;b.sc,NULL);</span>
<span class="lineNum">    3181 </span><span class="lineNoCov">          0 :         hgcd[0].gd.handle_controlevent = PI_HintSel;</span>
<span class="lineNum">    3182 </span><span class="lineNoCov">          0 :         hgcd[0].creator = GListCreate;</span>
<span class="lineNum">    3183 </span>            : 
<span class="lineNum">    3184 </span><span class="lineNoCov">          0 :         h2gcd[0].gd.pos.x = 5; h2gcd[0].gd.pos.y = 5;</span>
<span class="lineNum">    3185 </span><span class="lineNoCov">          0 :         h2gcd[0].gd.pos.width = PI_Width-20; h2gcd[0].gd.pos.height = gcd[j-1].gd.pos.y+10;</span>
<span class="lineNum">    3186 </span><span class="lineNoCov">          0 :         h2gcd[0].gd.flags = gg_visible | gg_list_multiplesel;</span>
<span class="lineNum">    3187 </span><span class="lineNoCov">          0 :         h2gcd[0].gd.cid = CID_ActiveHints;</span>
<span class="lineNum">    3188 </span><span class="lineNoCov">          0 :         h2gcd[0].gd.u.list = SCHintList(cv-&gt;b.sc,NULL);</span>
<span class="lineNum">    3189 </span><span class="lineNoCov">          0 :         h2gcd[0].creator = GListCreate;</span>
<span class="lineNum">    3190 </span>            : 
<span class="lineNum">    3191 </span><span class="lineNoCov">          0 :         j = 0;</span>
<span class="lineNum">    3192 </span>            : 
<span class="lineNum">    3193 </span><span class="lineNoCov">          0 :         aspects[j].text = (unichar_t *) _(&quot;Location&quot;);</span>
<span class="lineNum">    3194 </span><span class="lineNoCov">          0 :         aspects[j].text_is_1byte = true;</span>
<span class="lineNum">    3195 </span><span class="lineNoCov">          0 :         aspects[j++].gcd = pb;</span>
<span class="lineNum">    3196 </span>            : 
<span class="lineNum">    3197 </span><span class="lineNoCov">          0 :         aspects[j].text = (unichar_t *) _(&quot;Hint Mask&quot;);</span>
<span class="lineNum">    3198 </span><span class="lineNoCov">          0 :         aspects[j].text_is_1byte = true;</span>
<span class="lineNum">    3199 </span><span class="lineNoCov">          0 :         aspects[j++].gcd = hgcd;</span>
<span class="lineNum">    3200 </span>            : 
<span class="lineNum">    3201 </span><span class="lineNoCov">          0 :         aspects[j].text = (unichar_t *) _(&quot;Active Hints&quot;);</span>
<span class="lineNum">    3202 </span><span class="lineNoCov">          0 :         aspects[j].text_is_1byte = true;</span>
<span class="lineNum">    3203 </span><span class="lineNoCov">          0 :         aspects[j++].gcd = h2gcd;</span>
<span class="lineNum">    3204 </span>            : 
<span class="lineNum">    3205 </span><span class="lineNoCov">          0 :         j = 0;</span>
<span class="lineNum">    3206 </span>            : 
<span class="lineNum">    3207 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.x = 4; mgcd[j].gd.pos.y = 6;</span>
<span class="lineNum">    3208 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.width = PI_Width-8;</span>
<span class="lineNum">    3209 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.height = hgcd[0].gd.pos.height+10+24;</span>
<span class="lineNum">    3210 </span><span class="lineNoCov">          0 :         mgcd[j].gd.u.tabs = aspects;</span>
<span class="lineNum">    3211 </span><span class="lineNoCov">          0 :         mgcd[j].gd.flags = gg_visible | gg_enabled;</span>
<span class="lineNum">    3212 </span><span class="lineNoCov">          0 :         mgcd[j].gd.handle_controlevent = PI_AspectChange;</span>
<span class="lineNum">    3213 </span><span class="lineNoCov">          0 :         mgcd[j].gd.cid = CID_TabSet;</span>
<span class="lineNum">    3214 </span><span class="lineNoCov">          0 :         mgcd[j++].creator = GTabSetCreate;</span>
<span class="lineNum">    3215 </span>            : 
<span class="lineNum">    3216 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.x = (PI_Width-2*50-10)/2; mgcd[j].gd.pos.y = mgcd[j-1].gd.pos.y+mgcd[j-1].gd.pos.height+5;</span>
<span class="lineNum">    3217 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.width = 53; mgcd[j].gd.pos.height = 0;</span>
<span class="lineNum">    3218 </span><span class="lineNoCov">          0 :         mgcd[j].gd.flags = gg_visible | gg_enabled;</span>
<span class="lineNum">    3219 </span><span class="lineNoCov">          0 :         mlabel[j].text = (unichar_t *) _(&quot;&lt; _Prev&quot;);</span>
<span class="lineNum">    3220 </span><span class="lineNoCov">          0 :         mlabel[j].text_is_1byte = true;</span>
<span class="lineNum">    3221 </span><span class="lineNoCov">          0 :         mlabel[j].text_in_resource = true;</span>
<span class="lineNum">    3222 </span><span class="lineNoCov">          0 :         mgcd[j].gd.label = &amp;mlabel[j];</span>
<span class="lineNum">    3223 </span><span class="lineNoCov">          0 :         mgcd[j].gd.cid = CID_Prev;</span>
<span class="lineNum">    3224 </span><span class="lineNoCov">          0 :         mgcd[j].gd.handle_controlevent = PI_NextPrev;</span>
<span class="lineNum">    3225 </span><span class="lineNoCov">          0 :         mgcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    3226 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3227 </span>            : 
<span class="lineNum">    3228 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.x = PI_Width-50-(PI_Width-2*50-10)/2; mgcd[j].gd.pos.y = mgcd[j-1].gd.pos.y;</span>
<span class="lineNum">    3229 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.width = 53; mgcd[j].gd.pos.height = 0;</span>
<span class="lineNum">    3230 </span><span class="lineNoCov">          0 :         mgcd[j].gd.flags = gg_visible | gg_enabled;</span>
<span class="lineNum">    3231 </span><span class="lineNoCov">          0 :         mlabel[j].text = (unichar_t *) _(&quot;_Next &gt;&quot;);</span>
<span class="lineNum">    3232 </span><span class="lineNoCov">          0 :         mlabel[j].text_is_1byte = true;</span>
<span class="lineNum">    3233 </span><span class="lineNoCov">          0 :         mlabel[j].text_in_resource = true;</span>
<span class="lineNum">    3234 </span><span class="lineNoCov">          0 :         mgcd[j].gd.label = &amp;mlabel[j];</span>
<span class="lineNum">    3235 </span><span class="lineNoCov">          0 :         mgcd[j].gd.cid = CID_Next;</span>
<span class="lineNum">    3236 </span><span class="lineNoCov">          0 :         mgcd[j].gd.handle_controlevent = PI_NextPrev;</span>
<span class="lineNum">    3237 </span><span class="lineNoCov">          0 :         mgcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    3238 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3239 </span>            : 
<span class="lineNum">    3240 </span>            : /* Why 3? */
<span class="lineNum">    3241 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.x = mgcd[j-2].gd.pos.x-50+3; mgcd[j].gd.pos.y = mgcd[j-1].gd.pos.y+26;</span>
<span class="lineNum">    3242 </span><span class="lineNoCov">          0 :         mgcd[j].gd.flags = gg_visible | gg_enabled;</span>
<span class="lineNum">    3243 </span><span class="lineNoCov">          0 :         mlabel[j].text = (unichar_t *) _(&quot;Prev On Contour&quot;);</span>
<span class="lineNum">    3244 </span><span class="lineNoCov">          0 :         mlabel[j].text_is_1byte = true;</span>
<span class="lineNum">    3245 </span><span class="lineNoCov">          0 :         mgcd[j].gd.label = &amp;mlabel[j];</span>
<span class="lineNum">    3246 </span><span class="lineNoCov">          0 :         mgcd[j].gd.cid = CID_PrevC;</span>
<span class="lineNum">    3247 </span><span class="lineNoCov">          0 :         mgcd[j].gd.handle_controlevent = PI_NextPrev;</span>
<span class="lineNum">    3248 </span><span class="lineNoCov">          0 :         mgcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    3249 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3250 </span>            : 
<span class="lineNum">    3251 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.x = mgcd[j-2].gd.pos.x; mgcd[j].gd.pos.y = mgcd[j-1].gd.pos.y;</span>
<span class="lineNum">    3252 </span><span class="lineNoCov">          0 :         mgcd[j].gd.flags = gg_visible | gg_enabled;</span>
<span class="lineNum">    3253 </span><span class="lineNoCov">          0 :         mlabel[j].text = (unichar_t *) _(&quot;Next On Contour&quot;);</span>
<span class="lineNum">    3254 </span><span class="lineNoCov">          0 :         mlabel[j].text_is_1byte = true;</span>
<span class="lineNum">    3255 </span><span class="lineNoCov">          0 :         mgcd[j].gd.label = &amp;mlabel[j];</span>
<span class="lineNum">    3256 </span><span class="lineNoCov">          0 :         mgcd[j].gd.cid = CID_NextC;</span>
<span class="lineNum">    3257 </span><span class="lineNoCov">          0 :         mgcd[j].gd.handle_controlevent = PI_NextPrev;</span>
<span class="lineNum">    3258 </span><span class="lineNoCov">          0 :         mgcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    3259 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3260 </span>            : 
<span class="lineNum">    3261 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.x = 5; mgcd[j].gd.pos.y = mgcd[j-1].gd.pos.y+28;</span>
<span class="lineNum">    3262 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.width = PI_Width-10;</span>
<span class="lineNum">    3263 </span><span class="lineNoCov">          0 :         mgcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3264 </span><span class="lineNoCov">          0 :         mgcd[j].creator = GLineCreate;</span>
<span class="lineNum">    3265 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3266 </span>            : 
<span class="lineNum">    3267 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.x = 20-3; mgcd[j].gd.pos.y = PI_Height-33-3;</span>
<span class="lineNum">    3268 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.width = -1; mgcd[j].gd.pos.height = 0;</span>
<span class="lineNum">    3269 </span><span class="lineNoCov">          0 :         mgcd[j].gd.flags = gg_visible | gg_enabled | gg_but_default;</span>
<span class="lineNum">    3270 </span><span class="lineNoCov">          0 :         mlabel[j].text = (unichar_t *) _(&quot;_OK&quot;);</span>
<span class="lineNum">    3271 </span><span class="lineNoCov">          0 :         mlabel[j].text_is_1byte = true;</span>
<span class="lineNum">    3272 </span><span class="lineNoCov">          0 :         mlabel[j].text_in_resource = true;</span>
<span class="lineNum">    3273 </span><span class="lineNoCov">          0 :         mgcd[j].gd.mnemonic = 'O';</span>
<span class="lineNum">    3274 </span><span class="lineNoCov">          0 :         mgcd[j].gd.label = &amp;mlabel[j];</span>
<span class="lineNum">    3275 </span><span class="lineNoCov">          0 :         mgcd[j].gd.handle_controlevent = PI_Ok;</span>
<span class="lineNum">    3276 </span><span class="lineNoCov">          0 :         mgcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    3277 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3278 </span>            : 
<span class="lineNum">    3279 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.x = -20; mgcd[j].gd.pos.y = PI_Height-33;</span>
<span class="lineNum">    3280 </span><span class="lineNoCov">          0 :         mgcd[j].gd.pos.width = -1; mgcd[j].gd.pos.height = 0;</span>
<span class="lineNum">    3281 </span><span class="lineNoCov">          0 :         mgcd[j].gd.flags = gg_visible | gg_enabled | gg_but_cancel;</span>
<span class="lineNum">    3282 </span><span class="lineNoCov">          0 :         mlabel[j].text = (unichar_t *) _(&quot;_Cancel&quot;);</span>
<span class="lineNum">    3283 </span><span class="lineNoCov">          0 :         mlabel[j].text_is_1byte = true;</span>
<span class="lineNum">    3284 </span><span class="lineNoCov">          0 :         mlabel[j].text_in_resource = true;</span>
<span class="lineNum">    3285 </span><span class="lineNoCov">          0 :         mgcd[j].gd.label = &amp;mlabel[j];</span>
<span class="lineNum">    3286 </span><span class="lineNoCov">          0 :         mgcd[j].gd.mnemonic = 'C';</span>
<span class="lineNum">    3287 </span><span class="lineNoCov">          0 :         mgcd[j].gd.handle_controlevent = PI_Cancel;</span>
<span class="lineNum">    3288 </span><span class="lineNoCov">          0 :         mgcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    3289 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3290 </span>            : 
<span class="lineNum">    3291 </span><span class="lineNoCov">          0 :         marray[0] = &amp;mgcd[0]; marray[1] = NULL;</span>
<span class="lineNum">    3292 </span><span class="lineNoCov">          0 :         marray[2] = &amp;mb[2]; marray[3] = NULL;</span>
<span class="lineNum">    3293 </span><span class="lineNoCov">          0 :         marray[4] = &amp;mb[3]; marray[5] = NULL;</span>
<span class="lineNum">    3294 </span><span class="lineNoCov">          0 :         marray[6] = &amp;mgcd[5]; marray[7] = NULL;</span>
<span class="lineNum">    3295 </span><span class="lineNoCov">          0 :         marray[8] = &amp;mb[4]; marray[9] = NULL;</span>
<span class="lineNum">    3296 </span><span class="lineNoCov">          0 :         marray[10] = NULL;</span>
<span class="lineNum">    3297 </span><span class="lineNoCov">          0 :         marray2[0] = GCD_Glue; marray2[1] = &amp;mgcd[1]; marray2[2] = &amp;mgcd[2]; marray2[3] = GCD_Glue; marray2[4] = NULL;</span>
<span class="lineNum">    3298 </span><span class="lineNoCov">          0 :         marray3[0] = GCD_Glue; marray3[1] = &amp;mgcd[3]; marray3[2] = &amp;mgcd[4]; marray3[3] = GCD_Glue; marray3[4] = NULL;</span>
<span class="lineNum">    3299 </span><span class="lineNoCov">          0 :         marray4[0] = GCD_Glue; marray4[1] = &amp;mgcd[6]; marray4[2] = GCD_Glue; marray4[3] = GCD_Glue; marray4[4] = &amp;mgcd[7]; marray4[5] = GCD_Glue; marray4[6] = NULL;</span>
<span class="lineNum">    3300 </span>            : 
<span class="lineNum">    3301 </span><span class="lineNoCov">          0 :         memset(mb,0,sizeof(mb));</span>
<span class="lineNum">    3302 </span><span class="lineNoCov">          0 :         mb[0].gd.pos.x = mb[0].gd.pos.y = 2;</span>
<span class="lineNum">    3303 </span><span class="lineNoCov">          0 :         mb[0].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3304 </span><span class="lineNoCov">          0 :         mb[0].gd.u.boxelements = marray;</span>
<span class="lineNum">    3305 </span><span class="lineNoCov">          0 :         mb[0].creator = GHVGroupCreate;</span>
<span class="lineNum">    3306 </span>            : 
<span class="lineNum">    3307 </span><span class="lineNoCov">          0 :         mb[2].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3308 </span><span class="lineNoCov">          0 :         mb[2].gd.u.boxelements = marray2;</span>
<span class="lineNum">    3309 </span><span class="lineNoCov">          0 :         mb[2].creator = GHBoxCreate;</span>
<span class="lineNum">    3310 </span>            : 
<span class="lineNum">    3311 </span><span class="lineNoCov">          0 :         mb[3].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3312 </span><span class="lineNoCov">          0 :         mb[3].gd.u.boxelements = marray3;</span>
<span class="lineNum">    3313 </span><span class="lineNoCov">          0 :         mb[3].creator = GHBoxCreate;</span>
<span class="lineNum">    3314 </span>            : 
<span class="lineNum">    3315 </span><span class="lineNoCov">          0 :         mb[4].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3316 </span><span class="lineNoCov">          0 :         mb[4].gd.u.boxelements = marray4;</span>
<span class="lineNum">    3317 </span><span class="lineNoCov">          0 :         mb[4].creator = GHBoxCreate;</span>
<span class="lineNum">    3318 </span>            : 
<span class="lineNum">    3319 </span><span class="lineNoCov">          0 :         GGadgetsCreate(gi-&gt;gw,mb);</span>
<span class="lineNum">    3320 </span><span class="lineNoCov">          0 :         gi-&gt;group1ret = pb[4].ret; gi-&gt;group2ret = pb[5].ret;</span>
<span class="lineNum">    3321 </span><span class="lineNoCov">          0 :         memcpy( gi-&gt;gcd, gcd, gcdcount*sizeof(GGadgetCreateData) ); // This copies pointers, but only to static things.</span>
<span class="lineNum">    3322 </span><span class="lineNoCov">          0 :         GTextInfoListFree(hgcd[0].gd.u.list);</span>
<span class="lineNum">    3323 </span><span class="lineNoCov">          0 :         GTextInfoListFree(h2gcd[0].gd.u.list);</span>
<span class="lineNum">    3324 </span>            : 
<span class="lineNum">    3325 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableRow(mb[0].ret,0);</span>
<span class="lineNum">    3326 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(mb[2].ret,gb_expandgluesame);</span>
<span class="lineNum">    3327 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(mb[3].ret,gb_expandgluesame);</span>
<span class="lineNum">    3328 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(mb[4].ret,gb_expandgluesame);</span>
<span class="lineNum">    3329 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableRow(pb[0].ret,gb_expandglue);</span>
<span class="lineNum">    3330 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(pb[2].ret,gb_expandglue);</span>
<span class="lineNum">    3331 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(pb[3].ret,gb_expandglue);</span>
<span class="lineNum">    3332 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(pb[4].ret,gb_expandglue);</span>
<span class="lineNum">    3333 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(pb[5].ret,gb_expandglue);</span>
<span class="lineNum">    3334 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(pb[6].ret,gb_expandglue);</span>
<span class="lineNum">    3335 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(pb[7].ret,gb_expandglue);</span>
<span class="lineNum">    3336 </span>            : 
<span class="lineNum">    3337 </span><span class="lineNoCov">          0 :         PIChangePoint(gi);</span>
<span class="lineNum">    3338 </span>            : 
<span class="lineNum">    3339 </span><span class="lineNoCov">          0 :         GHVBoxFitWindow(mb[0].ret);</span>
<span class="lineNum">    3340 </span>            : 
<span class="lineNum">    3341 </span><span class="lineNoCov">          0 :         gi-&gt;nonmodal = 1;</span>
<span class="lineNum">    3342 </span><span class="lineNoCov">          0 :         dlist_pushfront( &amp;cv-&gt;pointInfoDialogs, (struct dlistnode *)gi );</span>
<span class="lineNum">    3343 </span><span class="lineNoCov">          0 :         GWidgetHidePalettes();</span>
<span class="lineNum">    3344 </span><span class="lineNoCov">          0 :         GDrawResize(gi-&gt;gw,</span>
<span class="lineNum">    3345 </span>            :                     GGadgetScale(GDrawPointsToPixels(NULL,PI_Width)),
<span class="lineNum">    3346 </span>            :                     GDrawPointsToPixels(NULL,PI_Height));
<span class="lineNum">    3347 </span><span class="lineNoCov">          0 :         GDrawSetVisible(gi-&gt;gw,true);</span>
<span class="lineNum">    3348 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">    3349 </span>            : 
<span class="lineNum">    3350 </span>            : /* ************************************************************************** */
<span class="lineNum">    3351 </span>            : /* ****************************** Spiro Points ****************************** */
<a name="3352"><span class="lineNum">    3352 </span>            : /* ************************************************************************** */</a>
<span class="lineNum">    3353 </span>            : 
<span class="lineNum">    3354 </span><span class="lineNoCov">          0 : static void SpiroFillup(GIData *ci, int except_cid) {</span>
<span class="lineNum">    3355 </span>            :     char buffer[50];
<span class="lineNum">    3356 </span>            :     int ty;
<span class="lineNum">    3357 </span>            : 
<span class="lineNum">    3358 </span><span class="lineNoCov">          0 :     mysprintf(buffer, &quot;%.2f&quot;, ci-&gt;curcp-&gt;x );</span>
<span class="lineNum">    3359 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_BaseX )</span>
<span class="lineNum">    3360 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_BaseX),buffer);</span>
<span class="lineNum">    3361 </span>            : 
<span class="lineNum">    3362 </span><span class="lineNoCov">          0 :     mysprintf(buffer, &quot;%.2f&quot;, ci-&gt;curcp-&gt;y );</span>
<span class="lineNum">    3363 </span><span class="lineNoCov">          0 :     if ( except_cid!=CID_BaseY )</span>
<span class="lineNum">    3364 </span><span class="lineNoCov">          0 :         GGadgetSetTitle8(GWidgetGetControl(ci-&gt;gw,CID_BaseY),buffer);</span>
<span class="lineNum">    3365 </span>            : 
<span class="lineNum">    3366 </span><span class="lineNoCov">          0 :     ty = ci-&gt;curcp-&gt;ty&amp;0x7f;</span>
<span class="lineNum">    3367 </span><span class="lineNoCov">          0 :     if ( ty == SPIRO_OPEN_CONTOUR )</span>
<span class="lineNum">    3368 </span><span class="lineNoCov">          0 :         ty = SPIRO_G4;</span>
<span class="lineNum">    3369 </span><span class="lineNoCov">          0 :     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_Curve), ty==SPIRO_G4 );</span>
<span class="lineNum">    3370 </span><span class="lineNoCov">          0 :     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_Tangent), ty==SPIRO_G2 );</span>
<span class="lineNum">    3371 </span><span class="lineNoCov">          0 :     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_Corner), ty==SPIRO_CORNER );</span>
<span class="lineNum">    3372 </span><span class="lineNoCov">          0 :     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_SpiroLeft), ty==SPIRO_LEFT );</span>
<span class="lineNum">    3373 </span><span class="lineNoCov">          0 :     GGadgetSetChecked(GWidgetGetControl(ci-&gt;gw,CID_SpiroRight), ty==SPIRO_RIGHT );</span>
<a name="3374"><span class="lineNum">    3374 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    3375 </span>            : 
<span class="lineNum">    3376 </span><span class="lineNoCov">          0 : static void SpiroChangePoint(GIData *ci) {</span>
<span class="lineNum">    3377 </span>            : 
<span class="lineNum">    3378 </span><span class="lineNoCov">          0 :     SpiroFillup(ci,0);</span>
<a name="3379"><span class="lineNum">    3379 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    3380 </span>            : 
<span class="lineNum">    3381 </span><span class="lineNoCov">          0 : static int PI_SpiroNextPrev(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    3382 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_buttonactivate ) {</span>
<span class="lineNum">    3383 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    3384 </span><span class="lineNoCov">          0 :         CharView *cv = ci-&gt;cv;</span>
<span class="lineNum">    3385 </span><span class="lineNoCov">          0 :         int cid = GGadgetGetCid(g);</span>
<span class="lineNum">    3386 </span>            :         SplinePointList *spl;
<span class="lineNum">    3387 </span><span class="lineNoCov">          0 :         int index = ci-&gt;curcp - ci-&gt;curspl-&gt;spiros;</span>
<span class="lineNum">    3388 </span>            :         BasePoint here;
<span class="lineNum">    3389 </span>            : 
<span class="lineNum">    3390 </span><span class="lineNoCov">          0 :         SPIRO_DESELECT(ci-&gt;curcp);</span>
<span class="lineNum">    3391 </span><span class="lineNoCov">          0 :         if ( cid == CID_Next ) {</span>
<span class="lineNum">    3392 </span><span class="lineNoCov">          0 :             if ( index &lt; ci-&gt;curspl-&gt;spiro_cnt-2 )</span>
<span class="lineNum">    3393 </span><span class="lineNoCov">          0 :                 ci-&gt;curcp = &amp;ci-&gt;curspl-&gt;spiros[index+1];</span>
<span class="lineNum">    3394 </span>            :             else {
<span class="lineNum">    3395 </span><span class="lineNoCov">          0 :                 if ( ci-&gt;curspl-&gt;next == NULL ) {</span>
<span class="lineNum">    3396 </span><span class="lineNoCov">          0 :                     ci-&gt;curspl = cv-&gt;b.layerheads[cv-&gt;b.drawmode]-&gt;splines;</span>
<span class="lineNum">    3397 </span><span class="lineNoCov">          0 :                     GDrawBeep(NULL);</span>
<span class="lineNum">    3398 </span>            :                 } else
<span class="lineNum">    3399 </span><span class="lineNoCov">          0 :                     ci-&gt;curspl = ci-&gt;curspl-&gt;next;</span>
<span class="lineNum">    3400 </span><span class="lineNoCov">          0 :                 ci-&gt;curcp = &amp;ci-&gt;curspl-&gt;spiros[0];</span>
<span class="lineNum">    3401 </span>            :             }
<span class="lineNum">    3402 </span><span class="lineNoCov">          0 :         } else if ( cid == CID_Prev ) {</span>
<span class="lineNum">    3403 </span><span class="lineNoCov">          0 :             if ( index!=0 ) {</span>
<span class="lineNum">    3404 </span><span class="lineNoCov">          0 :                 ci-&gt;curcp = &amp;ci-&gt;curspl-&gt;spiros[index-1];</span>
<span class="lineNum">    3405 </span>            :             } else {
<span class="lineNum">    3406 </span><span class="lineNoCov">          0 :                 if ( ci-&gt;curspl==cv-&gt;b.layerheads[cv-&gt;b.drawmode]-&gt;splines ) {</span>
<span class="lineNum">    3407 </span><span class="lineNoCov">          0 :                     for ( spl = cv-&gt;b.layerheads[cv-&gt;b.drawmode]-&gt;splines; spl-&gt;next!=NULL; spl=spl-&gt;next );</span>
<span class="lineNum">    3408 </span><span class="lineNoCov">          0 :                     GDrawBeep(NULL);</span>
<span class="lineNum">    3409 </span>            :                 } else {
<span class="lineNum">    3410 </span><span class="lineNoCov">          0 :                     for ( spl = cv-&gt;b.layerheads[cv-&gt;b.drawmode]-&gt;splines; spl-&gt;next!=ci-&gt;curspl; spl=spl-&gt;next );</span>
<span class="lineNum">    3411 </span>            :                 }
<span class="lineNum">    3412 </span><span class="lineNoCov">          0 :                 ci-&gt;curspl = spl;</span>
<span class="lineNum">    3413 </span><span class="lineNoCov">          0 :                 ci-&gt;curcp = &amp;ci-&gt;curspl-&gt;spiros[ci-&gt;curspl-&gt;spiro_cnt-2];</span>
<span class="lineNum">    3414 </span>            :             }
<span class="lineNum">    3415 </span><span class="lineNoCov">          0 :         } else if ( cid==CID_NextC ) {</span>
<span class="lineNum">    3416 </span><span class="lineNoCov">          0 :             if ( index &lt; ci-&gt;curspl-&gt;spiro_cnt-2 )</span>
<span class="lineNum">    3417 </span><span class="lineNoCov">          0 :                 ci-&gt;curcp = &amp;ci-&gt;curspl-&gt;spiros[index+1];</span>
<span class="lineNum">    3418 </span>            :             else {
<span class="lineNum">    3419 </span><span class="lineNoCov">          0 :                 ci-&gt;curcp = &amp;ci-&gt;curspl-&gt;spiros[0];</span>
<span class="lineNum">    3420 </span><span class="lineNoCov">          0 :                 GDrawBeep(NULL);</span>
<span class="lineNum">    3421 </span>            :             }
<span class="lineNum">    3422 </span>            :         } else /* CID_PrevC */ {
<span class="lineNum">    3423 </span><span class="lineNoCov">          0 :             if ( index!=0 )</span>
<span class="lineNum">    3424 </span><span class="lineNoCov">          0 :                 ci-&gt;curcp = &amp;ci-&gt;curspl-&gt;spiros[index-1];</span>
<span class="lineNum">    3425 </span>            :             else {
<span class="lineNum">    3426 </span><span class="lineNoCov">          0 :                 ci-&gt;curcp = &amp;ci-&gt;curspl-&gt;spiros[ci-&gt;curspl-&gt;spiro_cnt-2];</span>
<span class="lineNum">    3427 </span><span class="lineNoCov">          0 :                 GDrawBeep(NULL);</span>
<span class="lineNum">    3428 </span>            :             }
<span class="lineNum">    3429 </span>            :         }
<span class="lineNum">    3430 </span><span class="lineNoCov">          0 :         SPIRO_SELECT(ci-&gt;curcp);</span>
<span class="lineNum">    3431 </span><span class="lineNoCov">          0 :         SpiroChangePoint(ci);</span>
<span class="lineNum">    3432 </span><span class="lineNoCov">          0 :         here.x = ci-&gt;curcp-&gt;x; here.y = ci-&gt;curcp-&gt;y;</span>
<span class="lineNum">    3433 </span><span class="lineNoCov">          0 :         CVShowPoint(cv,&amp;here);</span>
<span class="lineNum">    3434 </span><span class="lineNoCov">          0 :         SCUpdateAll(cv-&gt;b.sc);</span>
<span class="lineNum">    3435 </span>            :     }
<span class="lineNum">    3436 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="3437"><span class="lineNum">    3437 </span>            : }</a>
<span class="lineNum">    3438 </span>            : 
<span class="lineNum">    3439 </span><span class="lineNoCov">          0 : static int PI_SpiroChanged(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    3440 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp;</span>
<span class="lineNum">    3441 </span><span class="lineNoCov">          0 :             (e-&gt;u.control.subtype == et_textchanged ||</span>
<span class="lineNum">    3442 </span><span class="lineNoCov">          0 :              e-&gt;u.control.subtype == et_radiochanged)) {</span>
<span class="lineNum">    3443 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    3444 </span>            :         double x,y;
<span class="lineNum">    3445 </span>            :         int ty;
<span class="lineNum">    3446 </span><span class="lineNoCov">          0 :         int err=false;</span>
<span class="lineNum">    3447 </span><span class="lineNoCov">          0 :         spiro_cp *curcp = ci-&gt;curcp;</span>
<span class="lineNum">    3448 </span>            : 
<span class="lineNum">    3449 </span><span class="lineNoCov">          0 :         x = GetCalmReal8(ci-&gt;gw,CID_BaseX,_(&quot;X&quot;),&amp;err);</span>
<span class="lineNum">    3450 </span><span class="lineNoCov">          0 :         y = GetCalmReal8(ci-&gt;gw,CID_BaseY,_(&quot;Y&quot;),&amp;err);</span>
<span class="lineNum">    3451 </span><span class="lineNoCov">          0 :         ty = GGadgetIsChecked(GWidgetGetControl(ci-&gt;gw,CID_Curve))? SPIRO_G4 :</span>
<span class="lineNum">    3452 </span><span class="lineNoCov">          0 :              GGadgetIsChecked(GWidgetGetControl(ci-&gt;gw,CID_Tangent))? SPIRO_G2 :</span>
<span class="lineNum">    3453 </span><span class="lineNoCov">          0 :              GGadgetIsChecked(GWidgetGetControl(ci-&gt;gw,CID_Corner))? SPIRO_CORNER :</span>
<span class="lineNum">    3454 </span><span class="lineNoCov">          0 :              GGadgetIsChecked(GWidgetGetControl(ci-&gt;gw,CID_SpiroLeft))? SPIRO_LEFT :</span>
<span class="lineNum">    3455 </span>            :                      SPIRO_RIGHT;
<span class="lineNum">    3456 </span><span class="lineNoCov">          0 :         curcp-&gt;x = x;</span>
<span class="lineNum">    3457 </span><span class="lineNoCov">          0 :         curcp-&gt;y = y;</span>
<span class="lineNum">    3458 </span><span class="lineNoCov">          0 :         curcp-&gt;ty = ty | 0x80;</span>
<span class="lineNum">    3459 </span><span class="lineNoCov">          0 :         SSRegenerateFromSpiros(ci-&gt;curspl);</span>
<span class="lineNum">    3460 </span><span class="lineNoCov">          0 :         CVCharChangedUpdate(&amp;ci-&gt;cv-&gt;b);</span>
<span class="lineNum">    3461 </span>            :     }
<span class="lineNum">    3462 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="3463"><span class="lineNum">    3463 </span>            : }</a>
<span class="lineNum">    3464 </span>            : 
<span class="lineNum">    3465 </span><span class="lineNoCov">          0 : static int PI_SpiroOk(GGadget *g, GEvent *e) {</span>
<span class="lineNum">    3466 </span><span class="lineNoCov">          0 :     if ( e-&gt;type==et_controlevent &amp;&amp; e-&gt;u.control.subtype == et_buttonactivate ) {</span>
<span class="lineNum">    3467 </span><span class="lineNoCov">          0 :         GIData *ci = GDrawGetUserData(GGadgetGetWindow(g));</span>
<span class="lineNum">    3468 </span>            : 
<span class="lineNum">    3469 </span><span class="lineNoCov">          0 :         ci-&gt;done = true;</span>
<span class="lineNum">    3470 </span>            :         /* All the work has been done as we've gone along */
<span class="lineNum">    3471 </span><span class="lineNoCov">          0 :         PI_Close(g);</span>
<span class="lineNum">    3472 </span>            :     }
<span class="lineNum">    3473 </span><span class="lineNoCov">          0 : return( true );</span>
<a name="3474"><span class="lineNum">    3474 </span>            : }</a>
<span class="lineNum">    3475 </span>            : 
<span class="lineNum">    3476 </span><span class="lineNoCov">          0 : static void SpiroPointGetInfo(CharView *cv, spiro_cp *scp, SplinePointList *spl) {</span>
<span class="lineNum">    3477 </span><span class="lineNoCov">          0 :     GIData *gip = calloc(1, sizeof(GIData));</span>
<span class="lineNum">    3478 </span>            :     GRect pos;
<span class="lineNum">    3479 </span>            :     GWindowAttrs wattrs;
<span class="lineNum">    3480 </span>            :     GGadgetCreateData gcd[20];
<span class="lineNum">    3481 </span>            :     GGadgetCreateData pb[9];
<span class="lineNum">    3482 </span>            :     GGadgetCreateData *varray[20], *harray2[10], *harray3[15], *harray4[6],
<span class="lineNum">    3483 </span>            :             *harray5[6], *harray6[9];
<span class="lineNum">    3484 </span>            :     GTextInfo label[20];
<span class="lineNum">    3485 </span>            :     GWindow root;
<span class="lineNum">    3486 </span>            :     GRect screensize;
<span class="lineNum">    3487 </span>            :     GPoint pt;
<span class="lineNum">    3488 </span>            :     int j,k;
<span class="lineNum">    3489 </span>            : 
<span class="lineNum">    3490 </span><span class="lineNoCov">          0 :     gip-&gt;cv = cv;</span>
<span class="lineNum">    3491 </span><span class="lineNoCov">          0 :     gip-&gt;sc = cv-&gt;b.sc;</span>
<span class="lineNum">    3492 </span><span class="lineNoCov">          0 :     gip-&gt;curcp = scp;</span>
<span class="lineNum">    3493 </span><span class="lineNoCov">          0 :     gip-&gt;curspl = spl;</span>
<span class="lineNum">    3494 </span><span class="lineNoCov">          0 :     gip-&gt;oldstate = SplinePointListCopy(cv-&gt;b.layerheads[cv-&gt;b.drawmode]-&gt;splines);</span>
<span class="lineNum">    3495 </span><span class="lineNoCov">          0 :     gip-&gt;done = false;</span>
<span class="lineNum">    3496 </span><span class="lineNoCov">          0 :     CVPreserveState(&amp;cv-&gt;b);</span>
<span class="lineNum">    3497 </span>            : 
<span class="lineNum">    3498 </span><span class="lineNoCov">          0 :     root = GDrawGetRoot(NULL);</span>
<span class="lineNum">    3499 </span><span class="lineNoCov">          0 :     GDrawGetSize(root,&amp;screensize);</span>
<span class="lineNum">    3500 </span>            : 
<span class="lineNum">    3501 </span><span class="lineNoCov">          0 :         memset(&amp;wattrs,0,sizeof(wattrs));</span>
<span class="lineNum">    3502 </span><span class="lineNoCov">          0 :         wattrs.mask = wam_events|wam_cursor|wam_utf8_wtitle|wam_positioned|wam_isdlg|wam_restrict;</span>
<span class="lineNum">    3503 </span><span class="lineNoCov">          0 :         wattrs.event_masks = ~(1&lt;&lt;et_charup);</span>
<span class="lineNum">    3504 </span><span class="lineNoCov">          0 :         wattrs.restrict_input_to_me = 1;</span>
<span class="lineNum">    3505 </span><span class="lineNoCov">          0 :         wattrs.positioned = 1;</span>
<span class="lineNum">    3506 </span><span class="lineNoCov">          0 :         wattrs.cursor = ct_pointer;</span>
<span class="lineNum">    3507 </span><span class="lineNoCov">          0 :         wattrs.utf8_window_title = _(&quot;Spiro Point Info&quot;);</span>
<span class="lineNum">    3508 </span><span class="lineNoCov">          0 :         wattrs.is_dlg = true;</span>
<span class="lineNum">    3509 </span><span class="lineNoCov">          0 :         pos.width = GGadgetScale(GDrawPointsToPixels(NULL,PI_Width));</span>
<span class="lineNum">    3510 </span><span class="lineNoCov">          0 :         pos.height = GDrawPointsToPixels(NULL,PI_Height);</span>
<span class="lineNum">    3511 </span><span class="lineNoCov">          0 :         pt.x = cv-&gt;xoff + rint(scp-&gt;x*cv-&gt;scale);</span>
<span class="lineNum">    3512 </span><span class="lineNoCov">          0 :         pt.y = -cv-&gt;yoff + cv-&gt;height - rint(scp-&gt;y*cv-&gt;scale);</span>
<span class="lineNum">    3513 </span><span class="lineNoCov">          0 :         GDrawTranslateCoordinates(cv-&gt;v,root,&amp;pt);</span>
<span class="lineNum">    3514 </span><span class="lineNoCov">          0 :         if ( pt.x+20+pos.width&lt;=screensize.width )</span>
<span class="lineNum">    3515 </span><span class="lineNoCov">          0 :             pos.x = pt.x+20;</span>
<span class="lineNum">    3516 </span><span class="lineNoCov">          0 :         else if ( (pos.x = pt.x-10-screensize.width)&lt;0 )</span>
<span class="lineNum">    3517 </span><span class="lineNoCov">          0 :             pos.x = 0;</span>
<span class="lineNum">    3518 </span><span class="lineNoCov">          0 :         pos.y = pt.y;</span>
<span class="lineNum">    3519 </span><span class="lineNoCov">          0 :         if ( pos.y+pos.height+20 &gt; screensize.height )</span>
<span class="lineNum">    3520 </span><span class="lineNoCov">          0 :             pos.y = screensize.height - pos.height - 20;</span>
<span class="lineNum">    3521 </span><span class="lineNoCov">          0 :         if ( pos.y&lt;0 ) pos.y = 0;</span>
<span class="lineNum">    3522 </span><span class="lineNoCov">          0 :         gip-&gt;gw = GDrawCreateTopWindow(NULL,&amp;pos,pi_e_h,gip,&amp;wattrs);</span>
<span class="lineNum">    3523 </span>            : 
<span class="lineNum">    3524 </span><span class="lineNoCov">          0 :         memset(&amp;gcd,0,sizeof(gcd));</span>
<span class="lineNum">    3525 </span><span class="lineNoCov">          0 :         memset(&amp;label,0,sizeof(label));</span>
<span class="lineNum">    3526 </span><span class="lineNoCov">          0 :         memset(&amp;pb,0,sizeof(pb));</span>
<span class="lineNum">    3527 </span>            : 
<span class="lineNum">    3528 </span><span class="lineNoCov">          0 :         j=k=0;</span>
<span class="lineNum">    3529 </span><span class="lineNoCov">          0 :         gip-&gt;gcd = gcd;</span>
<span class="lineNum">    3530 </span>            : 
<span class="lineNum">    3531 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_X:&quot;);</span>
<span class="lineNum">    3532 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3533 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    3534 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3535 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3536 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    3537 </span><span class="lineNoCov">          0 :         harray2[0] = &amp;gcd[j]; harray2[1] = GCD_Glue;</span>
<span class="lineNum">    3538 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3539 </span>            : 
<span class="lineNum">    3540 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-6; gcd[j].gd.pos.width = 70;</span>
<span class="lineNum">    3541 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3542 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_BaseX;</span>
<span class="lineNum">    3543 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_SpiroChanged;</span>
<span class="lineNum">    3544 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    3545 </span><span class="lineNoCov">          0 :         harray2[2] = &amp;gcd[j]; harray2[3] = GCD_Glue; harray2[4] = GCD_Glue;</span>
<span class="lineNum">    3546 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3547 </span>            : 
<span class="lineNum">    3548 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_Y:&quot;);</span>
<span class="lineNum">    3549 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3550 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    3551 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3552 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3553 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    3554 </span><span class="lineNoCov">          0 :         harray2[5] = &amp;gcd[j]; harray2[6] = GCD_Glue;</span>
<span class="lineNum">    3555 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3556 </span>            : 
<span class="lineNum">    3557 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 137; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y; gcd[j].gd.pos.width = 70;</span>
<span class="lineNum">    3558 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3559 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_BaseY;</span>
<span class="lineNum">    3560 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_SpiroChanged;</span>
<span class="lineNum">    3561 </span><span class="lineNoCov">          0 :         gcd[j].creator = GNumericFieldCreate;</span>
<span class="lineNum">    3562 </span><span class="lineNoCov">          0 :         harray2[7] = &amp;gcd[j]; harray2[8] = NULL;</span>
<span class="lineNum">    3563 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3564 </span>            : 
<span class="lineNum">    3565 </span><span class="lineNoCov">          0 :         pb[2].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3566 </span><span class="lineNoCov">          0 :         pb[2].gd.u.boxelements = harray2;</span>
<span class="lineNum">    3567 </span><span class="lineNoCov">          0 :         pb[2].creator = GHBoxCreate;</span>
<span class="lineNum">    3568 </span><span class="lineNoCov">          0 :         varray[k++] = &amp;pb[2]; varray[k++] = NULL;</span>
<span class="lineNum">    3569 </span>            : 
<span class="lineNum">    3570 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Type:&quot;);</span>
<span class="lineNum">    3571 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3572 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3573 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = gcd[0].gd.pos.x;</span>
<span class="lineNum">    3574 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3575 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLabelCreate;</span>
<span class="lineNum">    3576 </span><span class="lineNoCov">          0 :         harray3[0] = &amp;gcd[j]; harray3[1] = GCD_Glue; harray3[2] = GCD_Glue;</span>
<span class="lineNum">    3577 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3578 </span>            : 
<span class="lineNum">    3579 </span><span class="lineNoCov">          0 :         label[j].image = &amp;GIcon_smallspirocurve;</span>
<span class="lineNum">    3580 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3581 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-2;</span>
<span class="lineNum">    3582 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3583 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Curve;</span>
<span class="lineNum">    3584 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_SpiroChanged;</span>
<span class="lineNum">    3585 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    3586 </span><span class="lineNoCov">          0 :         harray3[3] = &amp;gcd[j]; harray3[4] = GCD_Glue;</span>
<span class="lineNum">    3587 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3588 </span>            : 
<span class="lineNum">    3589 </span><span class="lineNoCov">          0 :         label[j].image = &amp;GIcon_smallspirog2curve;</span>
<span class="lineNum">    3590 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3591 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 60; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y-2;</span>
<span class="lineNum">    3592 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3593 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Tangent;</span>
<span class="lineNum">    3594 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_SpiroChanged;</span>
<span class="lineNum">    3595 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    3596 </span><span class="lineNoCov">          0 :         harray3[5] = &amp;gcd[j]; harray3[6] = GCD_Glue;</span>
<span class="lineNum">    3597 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3598 </span>            : 
<span class="lineNum">    3599 </span><span class="lineNoCov">          0 :         label[j].image = &amp;GIcon_smallspirocorner;</span>
<span class="lineNum">    3600 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3601 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 100; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y;</span>
<span class="lineNum">    3602 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible | gg_rad_continueold;</span>
<span class="lineNum">    3603 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Corner;</span>
<span class="lineNum">    3604 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_SpiroChanged;</span>
<span class="lineNum">    3605 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    3606 </span><span class="lineNoCov">          0 :         harray3[7] = &amp;gcd[j]; harray3[8] = GCD_Glue;</span>
<span class="lineNum">    3607 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3608 </span>            : 
<span class="lineNum">    3609 </span><span class="lineNoCov">          0 :         label[j].image = &amp;GIcon_smallspiroleft;</span>
<span class="lineNum">    3610 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3611 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 140; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y;</span>
<span class="lineNum">    3612 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible | gg_rad_continueold;</span>
<span class="lineNum">    3613 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_SpiroLeft;</span>
<span class="lineNum">    3614 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_SpiroChanged;</span>
<span class="lineNum">    3615 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    3616 </span><span class="lineNoCov">          0 :         harray3[9] = &amp;gcd[j]; harray3[10] = GCD_Glue;</span>
<span class="lineNum">    3617 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3618 </span>            : 
<span class="lineNum">    3619 </span><span class="lineNoCov">          0 :         label[j].image = &amp;GIcon_smallspiroright;</span>
<span class="lineNum">    3620 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3621 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 140; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y;</span>
<span class="lineNum">    3622 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible | gg_rad_continueold;</span>
<span class="lineNum">    3623 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_SpiroRight;</span>
<span class="lineNum">    3624 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_SpiroChanged;</span>
<span class="lineNum">    3625 </span><span class="lineNoCov">          0 :         gcd[j].creator = GRadioCreate;</span>
<span class="lineNum">    3626 </span><span class="lineNoCov">          0 :         harray3[11] = &amp;gcd[j]; harray3[12] = GCD_Glue; harray3[13] = GCD_Glue;</span>
<span class="lineNum">    3627 </span><span class="lineNoCov">          0 :         harray3[14] = NULL;</span>
<span class="lineNum">    3628 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3629 </span>            : 
<span class="lineNum">    3630 </span><span class="lineNoCov">          0 :         pb[3].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3631 </span><span class="lineNoCov">          0 :         pb[3].gd.u.boxelements = harray3;</span>
<span class="lineNum">    3632 </span><span class="lineNoCov">          0 :         pb[3].creator = GHBoxCreate;</span>
<span class="lineNum">    3633 </span><span class="lineNoCov">          0 :         varray[k++] = &amp;pb[3];</span>
<span class="lineNum">    3634 </span><span class="lineNoCov">          0 :         varray[k++] = NULL;</span>
<span class="lineNum">    3635 </span><span class="lineNoCov">          0 :         varray[k++] = GCD_Glue;</span>
<span class="lineNum">    3636 </span><span class="lineNoCov">          0 :         varray[k++] = NULL;</span>
<span class="lineNum">    3637 </span>            : 
<span class="lineNum">    3638 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_visible | gg_enabled;</span>
<span class="lineNum">    3639 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;&lt; _Prev&quot;);</span>
<span class="lineNum">    3640 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3641 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    3642 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3643 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Prev;</span>
<span class="lineNum">    3644 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_SpiroNextPrev;</span>
<span class="lineNum">    3645 </span><span class="lineNoCov">          0 :         gcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    3646 </span><span class="lineNoCov">          0 :         harray4[0] = GCD_Glue; harray4[1] = &amp;gcd[j];</span>
<span class="lineNum">    3647 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3648 </span>            : 
<span class="lineNum">    3649 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_visible | gg_enabled;</span>
<span class="lineNum">    3650 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_Next &gt;&quot;);</span>
<span class="lineNum">    3651 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3652 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    3653 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3654 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_Next;</span>
<span class="lineNum">    3655 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_SpiroNextPrev;</span>
<span class="lineNum">    3656 </span><span class="lineNoCov">          0 :         gcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    3657 </span><span class="lineNoCov">          0 :         harray4[2] = &amp;gcd[j]; harray4[3] = GCD_Glue; harray4[4] = NULL;</span>
<span class="lineNum">    3658 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3659 </span>            : 
<span class="lineNum">    3660 </span><span class="lineNoCov">          0 :         pb[4].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3661 </span><span class="lineNoCov">          0 :         pb[4].gd.u.boxelements = harray4;</span>
<span class="lineNum">    3662 </span><span class="lineNoCov">          0 :         pb[4].creator = GHBoxCreate;</span>
<span class="lineNum">    3663 </span><span class="lineNoCov">          0 :         varray[k++] = &amp;pb[4];</span>
<span class="lineNum">    3664 </span><span class="lineNoCov">          0 :         varray[k++] = NULL;</span>
<span class="lineNum">    3665 </span>            : 
<span class="lineNum">    3666 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_visible | gg_enabled;</span>
<span class="lineNum">    3667 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Prev On Contour&quot;);</span>
<span class="lineNum">    3668 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3669 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3670 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_PrevC;</span>
<span class="lineNum">    3671 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_SpiroNextPrev;</span>
<span class="lineNum">    3672 </span><span class="lineNoCov">          0 :         gcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    3673 </span><span class="lineNoCov">          0 :         harray5[0] = GCD_Glue; harray5[1] = &amp;gcd[j];</span>
<span class="lineNum">    3674 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3675 </span>            : 
<span class="lineNum">    3676 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_visible | gg_enabled;</span>
<span class="lineNum">    3677 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;Next On Contour&quot;);</span>
<span class="lineNum">    3678 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3679 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3680 </span><span class="lineNoCov">          0 :         gcd[j].gd.cid = CID_NextC;</span>
<span class="lineNum">    3681 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_SpiroNextPrev;</span>
<span class="lineNum">    3682 </span><span class="lineNoCov">          0 :         gcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    3683 </span><span class="lineNoCov">          0 :         harray5[2] = &amp;gcd[j]; harray5[3] = GCD_Glue; harray5[4] = NULL;</span>
<span class="lineNum">    3684 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3685 </span>            : 
<span class="lineNum">    3686 </span><span class="lineNoCov">          0 :         pb[5].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3687 </span><span class="lineNoCov">          0 :         pb[5].gd.u.boxelements = harray5;</span>
<span class="lineNum">    3688 </span><span class="lineNoCov">          0 :         pb[5].creator = GHBoxCreate;</span>
<span class="lineNum">    3689 </span><span class="lineNoCov">          0 :         varray[k++] = &amp;pb[5];</span>
<span class="lineNum">    3690 </span><span class="lineNoCov">          0 :         varray[k++] = NULL;</span>
<span class="lineNum">    3691 </span>            : 
<span class="lineNum">    3692 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 5; gcd[j].gd.pos.y = gcd[j-1].gd.pos.y+28;</span>
<span class="lineNum">    3693 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.width = PI_Width-10;</span>
<span class="lineNum">    3694 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3695 </span><span class="lineNoCov">          0 :         gcd[j].creator = GLineCreate;</span>
<span class="lineNum">    3696 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3697 </span><span class="lineNoCov">          0 :         varray[k++] = &amp;gcd[j-1];</span>
<span class="lineNum">    3698 </span><span class="lineNoCov">          0 :         varray[k++] = NULL;</span>
<span class="lineNum">    3699 </span><span class="lineNoCov">          0 :         varray[k++] = GCD_Glue;</span>
<span class="lineNum">    3700 </span><span class="lineNoCov">          0 :         varray[k++] = NULL;</span>
<span class="lineNum">    3701 </span>            : 
<span class="lineNum">    3702 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = 20-3; gcd[j].gd.pos.y = PI_Height-33-3;</span>
<span class="lineNum">    3703 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_visible | gg_enabled | gg_but_default;</span>
<span class="lineNum">    3704 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_OK&quot;);</span>
<span class="lineNum">    3705 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3706 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    3707 </span><span class="lineNoCov">          0 :         gcd[j].gd.mnemonic = 'O';</span>
<span class="lineNum">    3708 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3709 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_SpiroOk;</span>
<span class="lineNum">    3710 </span><span class="lineNoCov">          0 :         gcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    3711 </span><span class="lineNoCov">          0 :         harray6[0] = GCD_Glue; harray6[1] = &amp;gcd[j]; harray6[2] = GCD_Glue; harray6[3] = GCD_Glue;</span>
<span class="lineNum">    3712 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3713 </span>            : 
<span class="lineNum">    3714 </span><span class="lineNoCov">          0 :         gcd[j].gd.pos.x = -20; gcd[j].gd.pos.y = PI_Height-33;</span>
<span class="lineNum">    3715 </span><span class="lineNoCov">          0 :         gcd[j].gd.flags = gg_visible | gg_enabled | gg_but_cancel;</span>
<span class="lineNum">    3716 </span><span class="lineNoCov">          0 :         label[j].text = (unichar_t *) _(&quot;_Cancel&quot;);</span>
<span class="lineNum">    3717 </span><span class="lineNoCov">          0 :         label[j].text_is_1byte = true;</span>
<span class="lineNum">    3718 </span><span class="lineNoCov">          0 :         label[j].text_in_resource = true;</span>
<span class="lineNum">    3719 </span><span class="lineNoCov">          0 :         gcd[j].gd.label = &amp;label[j];</span>
<span class="lineNum">    3720 </span><span class="lineNoCov">          0 :         gcd[j].gd.mnemonic = 'C';</span>
<span class="lineNum">    3721 </span><span class="lineNoCov">          0 :         gcd[j].gd.handle_controlevent = PI_Cancel;</span>
<span class="lineNum">    3722 </span><span class="lineNoCov">          0 :         gcd[j].creator = GButtonCreate;</span>
<span class="lineNum">    3723 </span><span class="lineNoCov">          0 :         harray6[4] = GCD_Glue; harray6[5] = &amp;gcd[j]; harray6[6] = GCD_Glue; harray6[7] = NULL;</span>
<span class="lineNum">    3724 </span><span class="lineNoCov">          0 :         ++j;</span>
<span class="lineNum">    3725 </span>            : 
<span class="lineNum">    3726 </span><span class="lineNoCov">          0 :         pb[6].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3727 </span><span class="lineNoCov">          0 :         pb[6].gd.u.boxelements = harray6;</span>
<span class="lineNum">    3728 </span><span class="lineNoCov">          0 :         pb[6].creator = GHBoxCreate;</span>
<span class="lineNum">    3729 </span><span class="lineNoCov">          0 :         varray[k++] = &amp;pb[6];</span>
<span class="lineNum">    3730 </span><span class="lineNoCov">          0 :         varray[k++] = NULL;</span>
<span class="lineNum">    3731 </span><span class="lineNoCov">          0 :         varray[k++] = NULL;</span>
<span class="lineNum">    3732 </span>            : 
<span class="lineNum">    3733 </span><span class="lineNoCov">          0 :         pb[0].gd.pos.x = pb[0].gd.pos.y = 2;</span>
<span class="lineNum">    3734 </span><span class="lineNoCov">          0 :         pb[0].gd.flags = gg_enabled|gg_visible;</span>
<span class="lineNum">    3735 </span><span class="lineNoCov">          0 :         pb[0].gd.u.boxelements = varray;</span>
<span class="lineNum">    3736 </span><span class="lineNoCov">          0 :         pb[0].creator = GHVGroupCreate;</span>
<span class="lineNum">    3737 </span>            : 
<span class="lineNum">    3738 </span><span class="lineNoCov">          0 :         GGadgetsCreate(gip-&gt;gw,pb);</span>
<span class="lineNum">    3739 </span>            : 
<span class="lineNum">    3740 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableRow(pb[0].ret,gb_expandglue);</span>
<span class="lineNum">    3741 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(pb[2].ret,gb_expandglue);</span>
<span class="lineNum">    3742 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(pb[3].ret,gb_expandglue);</span>
<span class="lineNum">    3743 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(pb[4].ret,gb_expandglue);</span>
<span class="lineNum">    3744 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(pb[5].ret,gb_expandglue);</span>
<span class="lineNum">    3745 </span><span class="lineNoCov">          0 :         GHVBoxSetExpandableCol(pb[6].ret,gb_expandgluesame);</span>
<span class="lineNum">    3746 </span>            : 
<span class="lineNum">    3747 </span><span class="lineNoCov">          0 :         SpiroChangePoint(gip);</span>
<span class="lineNum">    3748 </span>            : 
<span class="lineNum">    3749 </span><span class="lineNoCov">          0 :         GHVBoxFitWindow(pb[0].ret);</span>
<span class="lineNum">    3750 </span>            : 
<span class="lineNum">    3751 </span><span class="lineNoCov">          0 :     GWidgetHidePalettes();</span>
<span class="lineNum">    3752 </span><span class="lineNoCov">          0 :     GDrawSetVisible(gip-&gt;gw,true);</span>
<span class="lineNum">    3753 </span><span class="lineNoCov">          0 :     while ( !gip-&gt;done )</span>
<span class="lineNum">    3754 </span><span class="lineNoCov">          0 :         GDrawProcessOneEvent(NULL);</span>
<a name="3755"><span class="lineNum">    3755 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    3756 </span>            : 
<span class="lineNum">    3757 </span><span class="lineNoCov">          0 : void CVGetInfo(CharView *cv) {</span>
<span class="lineNum">    3758 </span>            :     SplinePoint *sp;
<span class="lineNum">    3759 </span>            :     SplinePointList *spl;
<span class="lineNum">    3760 </span>            :     RefChar *ref;
<span class="lineNum">    3761 </span>            :     ImageList *img;
<span class="lineNum">    3762 </span>            :     AnchorPoint *ap;
<span class="lineNum">    3763 </span>            :     spiro_cp *scp;
<span class="lineNum">    3764 </span>            : 
<span class="lineNum">    3765 </span><span class="lineNoCov">          0 :     if ( !CVOneThingSel(cv,&amp;sp,&amp;spl,&amp;ref,&amp;img,&amp;ap,&amp;scp)) {</span>
<span class="lineNum">    3766 </span><span class="lineNoCov">          0 :     } else if ( ref!=NULL )</span>
<span class="lineNum">    3767 </span><span class="lineNoCov">          0 :         RefGetInfo(cv,ref);</span>
<span class="lineNum">    3768 </span><span class="lineNoCov">          0 :     else if ( img!=NULL )</span>
<span class="lineNum">    3769 </span><span class="lineNoCov">          0 :         ImgGetInfo(cv,img);</span>
<span class="lineNum">    3770 </span><span class="lineNoCov">          0 :     else if ( ap!=NULL )</span>
<span class="lineNum">    3771 </span><span class="lineNoCov">          0 :         ApGetInfo(cv,ap);</span>
<span class="lineNum">    3772 </span><span class="lineNoCov">          0 :     else if ( scp!=NULL )</span>
<span class="lineNum">    3773 </span><span class="lineNoCov">          0 :         SpiroPointGetInfo(cv,scp,spl);</span>
<span class="lineNum">    3774 </span>            :     else
<span class="lineNum">    3775 </span><span class="lineNoCov">          0 :         PointGetInfo(cv,sp,spl);</span>
<a name="3776"><span class="lineNum">    3776 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    3777 </span>            : 
<span class="lineNum">    3778 </span><span class="lineNoCov">          0 : void CVPGetInfo(CharView *cv) {</span>
<span class="lineNum">    3779 </span>            : 
<span class="lineNum">    3780 </span><span class="lineNoCov">          0 :     if ( cv-&gt;p.ref!=NULL )</span>
<span class="lineNum">    3781 </span><span class="lineNoCov">          0 :         RefGetInfo(cv,cv-&gt;p.ref);</span>
<span class="lineNum">    3782 </span><span class="lineNoCov">          0 :     else if ( cv-&gt;p.img!=NULL )</span>
<span class="lineNum">    3783 </span><span class="lineNoCov">          0 :         ImgGetInfo(cv,cv-&gt;p.img);</span>
<span class="lineNum">    3784 </span><span class="lineNoCov">          0 :     else if ( cv-&gt;p.ap!=NULL )</span>
<span class="lineNum">    3785 </span><span class="lineNoCov">          0 :         ApGetInfo(cv,cv-&gt;p.ap);</span>
<span class="lineNum">    3786 </span><span class="lineNoCov">          0 :     else if ( cv-&gt;p.sp!=NULL )</span>
<span class="lineNum">    3787 </span><span class="lineNoCov">          0 :         PointGetInfo(cv,cv-&gt;p.sp,cv-&gt;p.spl);</span>
<span class="lineNum">    3788 </span><span class="lineNoCov">          0 :     else if ( cv-&gt;p.spiro!=NULL )</span>
<span class="lineNum">    3789 </span><span class="lineNoCov">          0 :         SpiroPointGetInfo(cv,cv-&gt;p.spiro,cv-&gt;p.spl);</span>
<a name="3790"><span class="lineNum">    3790 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    3791 </span>            : 
<span class="lineNum">    3792 </span><span class="lineNoCov">          0 : void SCRefBy(SplineChar *sc) {</span>
<span class="lineNum">    3793 </span><span class="lineNoCov">          0 :     int cnt,i,tot=0;</span>
<span class="lineNum">    3794 </span><span class="lineNoCov">          0 :     char **deps = NULL;</span>
<span class="lineNum">    3795 </span>            :     struct splinecharlist *d;
<span class="lineNum">    3796 </span>            :     char *buts[3];
<span class="lineNum">    3797 </span>            : 
<span class="lineNum">    3798 </span><span class="lineNoCov">          0 :     buts[0] = _(&quot;_Show&quot;);</span>
<span class="lineNum">    3799 </span><span class="lineNoCov">          0 :     buts[1] = _(&quot;_Cancel&quot;);</span>
<span class="lineNum">    3800 </span><span class="lineNoCov">          0 :     buts[2] = NULL;</span>
<span class="lineNum">    3801 </span>            : 
<span class="lineNum">    3802 </span><span class="lineNoCov">          0 :     for ( i=0; i&lt;2; ++i ) {</span>
<span class="lineNum">    3803 </span><span class="lineNoCov">          0 :         cnt = 0;</span>
<span class="lineNum">    3804 </span><span class="lineNoCov">          0 :         for ( d = sc-&gt;dependents; d!=NULL; d=d-&gt;next ) {</span>
<span class="lineNum">    3805 </span><span class="lineNoCov">          0 :             if ( deps!=NULL )</span>
<span class="lineNum">    3806 </span><span class="lineNoCov">          0 :                 deps[tot-cnt] = copy(d-&gt;sc-&gt;name);</span>
<span class="lineNum">    3807 </span><span class="lineNoCov">          0 :             ++cnt;</span>
<span class="lineNum">    3808 </span>            :         }
<span class="lineNum">    3809 </span><span class="lineNoCov">          0 :         if ( cnt==0 )</span>
<span class="lineNum">    3810 </span><span class="lineNoCov">          0 : return;</span>
<span class="lineNum">    3811 </span><span class="lineNoCov">          0 :         if ( i==0 )</span>
<span class="lineNum">    3812 </span><span class="lineNoCov">          0 :             deps = calloc(cnt+1,sizeof(unichar_t *));</span>
<span class="lineNum">    3813 </span><span class="lineNoCov">          0 :         tot = cnt-1;</span>
<span class="lineNum">    3814 </span>            :     }
<span class="lineNum">    3815 </span>            : 
<span class="lineNum">    3816 </span><span class="lineNoCov">          0 :     i = gwwv_choose_with_buttons(_(&quot;Dependents&quot;),(const char **) deps, cnt, 0, buts, _(&quot;Dependents&quot;) );</span>
<span class="lineNum">    3817 </span><span class="lineNoCov">          0 :     if ( i!=-1 ) {</span>
<span class="lineNum">    3818 </span><span class="lineNoCov">          0 :         i = tot-i;</span>
<span class="lineNum">    3819 </span><span class="lineNoCov">          0 :         for ( d = sc-&gt;dependents, cnt=0; d!=NULL &amp;&amp; cnt&lt;i; d=d-&gt;next, ++cnt );</span>
<span class="lineNum">    3820 </span><span class="lineNoCov">          0 :         CharViewCreate(d-&gt;sc,(FontView *) (sc-&gt;parent-&gt;fv),-1);</span>
<span class="lineNum">    3821 </span>            :     }
<span class="lineNum">    3822 </span><span class="lineNoCov">          0 :     for ( i=0; i&lt;=tot; ++i )</span>
<span class="lineNum">    3823 </span><span class="lineNoCov">          0 :         free( deps[i] );</span>
<span class="lineNum">    3824 </span><span class="lineNoCov">          0 :     free(deps);</span>
<a name="3825"><span class="lineNum">    3825 </span>            : }</a>
<span class="lineNum">    3826 </span>            : 
<span class="lineNum">    3827 </span><span class="lineNoCov">          0 : static int UsedIn(char *name, char *subs) {</span>
<span class="lineNum">    3828 </span><span class="lineNoCov">          0 :     int nlen = strlen( name );</span>
<span class="lineNum">    3829 </span><span class="lineNoCov">          0 :     while ( *subs!='\0' ) {</span>
<span class="lineNum">    3830 </span><span class="lineNoCov">          0 :         if ( strncmp(subs,name,nlen)==0 &amp;&amp; (subs[nlen]==' ' || subs[nlen]=='\0'))</span>
<span class="lineNum">    3831 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    3832 </span><span class="lineNoCov">          0 :         while ( *subs!=' ' &amp;&amp; *subs!='\0' ) ++subs;</span>
<span class="lineNum">    3833 </span><span class="lineNoCov">          0 :         while ( *subs==' ' ) ++subs;</span>
<span class="lineNum">    3834 </span>            :     }
<span class="lineNum">    3835 </span><span class="lineNoCov">          0 : return( false );</span>
<a name="3836"><span class="lineNum">    3836 </span>            : }</a>
<span class="lineNum">    3837 </span>            : 
<span class="lineNum">    3838 </span><span class="lineNoCov">          0 : int SCUsedBySubs(SplineChar *sc) {</span>
<span class="lineNum">    3839 </span>            :     int k, i;
<span class="lineNum">    3840 </span>            :     SplineFont *_sf, *sf;
<span class="lineNum">    3841 </span>            :     PST *pst;
<span class="lineNum">    3842 </span>            : 
<span class="lineNum">    3843 </span><span class="lineNoCov">          0 :     if ( sc==NULL )</span>
<span class="lineNum">    3844 </span><span class="lineNoCov">          0 : return( false );</span>
<span class="lineNum">    3845 </span>            : 
<span class="lineNum">    3846 </span><span class="lineNoCov">          0 :     _sf = sc-&gt;parent;</span>
<span class="lineNum">    3847 </span><span class="lineNoCov">          0 :     if ( _sf-&gt;cidmaster!=NULL ) _sf=_sf-&gt;cidmaster;</span>
<span class="lineNum">    3848 </span><span class="lineNoCov">          0 :     k=0;</span>
<span class="lineNum">    3849 </span>            :     do {
<span class="lineNum">    3850 </span><span class="lineNoCov">          0 :         sf = _sf-&gt;subfontcnt==0 ? _sf : _sf-&gt;subfonts[k];</span>
<span class="lineNum">    3851 </span><span class="lineNoCov">          0 :         for ( i=0; i&lt;sf-&gt;glyphcnt; ++i ) if ( sf-&gt;glyphs[i]!=NULL ) {</span>
<span class="lineNum">    3852 </span><span class="lineNoCov">          0 :             for ( pst=sf-&gt;glyphs[i]-&gt;possub; pst!=NULL; pst=pst-&gt;next ) {</span>
<span class="lineNum">    3853 </span><span class="lineNoCov">          0 :                 if ( pst-&gt;type==pst_substitution || pst-&gt;type==pst_alternate ||</span>
<span class="lineNum">    3854 </span><span class="lineNoCov">          0 :                         pst-&gt;type==pst_multiple || pst-&gt;type==pst_ligature )</span>
<span class="lineNum">    3855 </span><span class="lineNoCov">          0 :                     if ( UsedIn(sc-&gt;name,pst-&gt;u.mult.components))</span>
<span class="lineNum">    3856 </span><span class="lineNoCov">          0 : return( true );</span>
<span class="lineNum">    3857 </span>            :             }
<span class="lineNum">    3858 </span>            :         }
<span class="lineNum">    3859 </span><span class="lineNoCov">          0 :         ++k;</span>
<span class="lineNum">    3860 </span><span class="lineNoCov">          0 :     } while ( k&lt;_sf-&gt;subfontcnt );</span>
<span class="lineNum">    3861 </span><span class="lineNoCov">          0 : return( false );</span>
<a name="3862"><span class="lineNum">    3862 </span>            : }</a>
<span class="lineNum">    3863 </span>            : 
<span class="lineNum">    3864 </span><span class="lineNoCov">          0 : void SCSubBy(SplineChar *sc) {</span>
<span class="lineNum">    3865 </span>            :     int i,j,k,tot;
<span class="lineNum">    3866 </span><span class="lineNoCov">          0 :     char **deps = NULL;</span>
<span class="lineNum">    3867 </span>            :     SplineChar **depsc;
<span class="lineNum">    3868 </span>            :     char ubuf[200];
<span class="lineNum">    3869 </span>            :     SplineFont *sf, *_sf;
<span class="lineNum">    3870 </span>            :     PST *pst;
<span class="lineNum">    3871 </span>            :     char *buts[3];
<span class="lineNum">    3872 </span>            : 
<span class="lineNum">    3873 </span><span class="lineNoCov">          0 :     buts[0] = _(&quot;Show&quot;);</span>
<span class="lineNum">    3874 </span><span class="lineNoCov">          0 :     buts[1] = _(&quot;_Cancel&quot;);</span>
<span class="lineNum">    3875 </span><span class="lineNoCov">          0 :     buts[2] = NULL;</span>
<span class="lineNum">    3876 </span>            : 
<span class="lineNum">    3877 </span><span class="lineNoCov">          0 :     if ( sc==NULL )</span>
<span class="lineNum">    3878 </span><span class="lineNoCov">          0 : return;</span>
<span class="lineNum">    3879 </span>            : 
<span class="lineNum">    3880 </span><span class="lineNoCov">          0 :     _sf = sc-&gt;parent;</span>
<span class="lineNum">    3881 </span><span class="lineNoCov">          0 :     if ( _sf-&gt;cidmaster!=NULL ) _sf=_sf-&gt;cidmaster;</span>
<span class="lineNum">    3882 </span><span class="lineNoCov">          0 :     for ( j=0; j&lt;2; ++j ) {</span>
<span class="lineNum">    3883 </span><span class="lineNoCov">          0 :         tot = 0;</span>
<span class="lineNum">    3884 </span><span class="lineNoCov">          0 :         k=0;</span>
<span class="lineNum">    3885 </span>            :         do {
<span class="lineNum">    3886 </span><span class="lineNoCov">          0 :             sf = _sf-&gt;subfontcnt==0 ? _sf : _sf-&gt;subfonts[k];</span>
<span class="lineNum">    3887 </span><span class="lineNoCov">          0 :             for ( i=0; i&lt;sf-&gt;glyphcnt; ++i ) if ( sf-&gt;glyphs[i]!=NULL ) {</span>
<span class="lineNum">    3888 </span><span class="lineNoCov">          0 :                 for ( pst=sf-&gt;glyphs[i]-&gt;possub; pst!=NULL; pst=pst-&gt;next ) {</span>
<span class="lineNum">    3889 </span><span class="lineNoCov">          0 :                     if ( pst-&gt;type==pst_substitution || pst-&gt;type==pst_alternate ||</span>
<span class="lineNum">    3890 </span><span class="lineNoCov">          0 :                             pst-&gt;type==pst_multiple || pst-&gt;type==pst_ligature )</span>
<span class="lineNum">    3891 </span><span class="lineNoCov">          0 :                         if ( UsedIn(sc-&gt;name,pst-&gt;u.mult.components)) {</span>
<span class="lineNum">    3892 </span><span class="lineNoCov">          0 :                             if ( deps!=NULL ) {</span>
<span class="lineNum">    3893 </span><span class="lineNoCov">          0 :                                 snprintf(ubuf,sizeof(ubuf),</span>
<span class="lineNum">    3894 </span><span class="lineNoCov">          0 :                                         _(&quot;Subtable %.60s in glyph %.60s&quot;),</span>
<span class="lineNum">    3895 </span><span class="lineNoCov">          0 :                                         pst-&gt;subtable-&gt;subtable_name,</span>
<span class="lineNum">    3896 </span><span class="lineNoCov">          0 :                                         sf-&gt;glyphs[i]-&gt;name);</span>
<span class="lineNum">    3897 </span><span class="lineNoCov">          0 :                                 deps[tot] = copy(ubuf);</span>
<span class="lineNum">    3898 </span><span class="lineNoCov">          0 :                                 depsc[tot] = sf-&gt;glyphs[i];</span>
<span class="lineNum">    3899 </span>            :                             }
<span class="lineNum">    3900 </span><span class="lineNoCov">          0 :                             ++tot;</span>
<span class="lineNum">    3901 </span>            :                         }
<span class="lineNum">    3902 </span>            :                 }
<span class="lineNum">    3903 </span>            :             }
<span class="lineNum">    3904 </span><span class="lineNoCov">          0 :             ++k;</span>
<span class="lineNum">    3905 </span><span class="lineNoCov">          0 :         } while ( k&lt;_sf-&gt;subfontcnt );</span>
<span class="lineNum">    3906 </span><span class="lineNoCov">          0 :         if ( tot==0 )</span>
<span class="lineNum">    3907 </span><span class="lineNoCov">          0 : return;</span>
<span class="lineNum">    3908 </span><span class="lineNoCov">          0 :         if ( j==0 ) {</span>
<span class="lineNum">    3909 </span><span class="lineNoCov">          0 :             deps = calloc(tot+1,sizeof(char *));</span>
<span class="lineNum">    3910 </span><span class="lineNoCov">          0 :             depsc = malloc(tot*sizeof(SplineChar *));</span>
<span class="lineNum">    3911 </span>            :         }
<span class="lineNum">    3912 </span>            :     }
<span class="lineNum">    3913 </span>            : 
<span class="lineNum">    3914 </span><span class="lineNoCov">          0 :     i = gwwv_choose_with_buttons(_(&quot;Dependent Substitutions&quot;),(const char **) deps, tot, 0, buts, _(&quot;Dependent Substitutions&quot;) );</span>
<span class="lineNum">    3915 </span><span class="lineNoCov">          0 :     if ( i&gt;-1 ) {</span>
<span class="lineNum">    3916 </span><span class="lineNoCov">          0 :         CharViewCreate(depsc[i],(FontView *) (sc-&gt;parent-&gt;fv),-1);</span>
<span class="lineNum">    3917 </span>            :     }
<span class="lineNum">    3918 </span><span class="lineNoCov">          0 :     for ( i=0; i&lt;=tot; ++i )</span>
<span class="lineNum">    3919 </span><span class="lineNoCov">          0 :         free( deps[i] );</span>
<span class="lineNum">    3920 </span><span class="lineNoCov">          0 :     free(deps);</span>
<span class="lineNum">    3921 </span><span class="lineNoCov">          0 :     free(depsc);</span>
<span class="lineNum">    3922 </span>            : }
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.10</a></td></tr>
  </table>
  <br>

</body>
</html>
